!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c=a("../lib/backbone"),d=a("../model/AnswerModel"),e=a("../lib/underscore"),f=c.Collection.extend({model:d,retryTimer:null,initialize:function(){c.Collection.prototype.initialize.apply(this,arguments),this.changedModels=[]},getChangedAnswers:function(){return this.changedModels.map(function(a){return a.toJSON()})},clearChanged:function(){this.changedModels=[]},setAnswer:function(a,b){this.get(a).set(b)},_onModelEvent:function(a,b){var d=c.Collection.prototype._onModelEvent.apply(this,arguments);return"change"===a&&-1===this.changedModels.indexOf(b)&&this.changedModels.push(b),d},_removeReference:function(a){var b=c.Collection.prototype._removeReference.apply(this,arguments);return this.changedModels=e.without(this.changedModels,a),b}});b.exports=f},{"../lib/backbone":66,"../lib/underscore":72,"../model/AnswerModel":73}],2:[function(a,b){"use strict";var c=a("./BaseAssembly"),d=c.extend({createContainer:function(){var b=a("../container/Dialog");return new b(this.options)},createContent:function(){var b=a("../content/Alert");return new b(this.options)}});b.exports=d},{"../container/Dialog":14,"../content/Alert":23,"./BaseAssembly":3}],3:[function(a,b){"use strict";var c=a("../../lib/backbone"),d=c.View.extend({contentEvents:null,containerEvents:{cancel:"onContainerCancel",hide:"onContainerHide",show:"onContainerShow"},containerMethodProxy:["show","hide","pin","unpin","reset"],contentMethodProxy:[],initialize:function(){this.container=this.createContainer(),this.proxyContainer(this.container),this.bindContainerEvents(this.container),this.content=this.createContent(),this.proxyContent(this.content),this.bindContentEvents(this.content),this.container.setContent(this.content)},createContainer:function(){},createContent:function(){},bindContainerEvents:function(a){this.containerEvents&&Object.keys(this.containerEvents).forEach(function(b){a.on(b,this[this.containerEvents[b]],this)},this)},unbindContainerEvents:function(a){this.containerEvents&&Object.keys(this.containerEvents).forEach(function(b){a.off(b,this[this.containerEvents[b]],this)},this)},bindContentEvents:function(a){this.contentEvents&&Object.keys(this.contentEvents).forEach(function(b){a.on(b,this[this.contentEvents[b]],this)},this)},unbindContentEvents:function(a){this.contentEvents&&Object.keys(this.contentEvents).forEach(function(b){a.off(b,this[this.contentEvents[b]],this)},this)},proxyContainer:function(){this.containerMethodProxy.forEach(function(a){!this[a]&&this.container[a]&&(this[a]=this.container[a].bind(this.container))},this)},proxyContent:function(){this.contentMethodProxy.forEach(function(a){!this[a]&&this.content[a]&&(this[a]=this.content[a].bind(this.content))},this)},isVisible:function(){return this.container.visible},destroy:function(){this.content.destroy(),this.container.destroy(),this.$el.remove()},onContainerCancel:function(){this.trigger("cancel")},onContainerHide:function(){this.trigger("hide")},onContainerShow:function(){this.trigger("show")}});b.exports=d},{"../../lib/backbone":66}],4:[function(a,b){"use strict";var c=a("../../lib/underscore"),d=a("../../component/assembly/BaseAssembly"),e=d.extend({contentEvents:c.defaults({submit:"onContentSubmit",cancel:"onCancel"},d.prototype.contentEvents),createContainer:function(){var b=a("../../component/container/Dialog");return new b},createContent:function(){var b=a("../content/CommitExercise");return new b({remainQuestions:this.options.remainQuestions,elapsed:this.options.elapsed})},onContentSubmit:function(){this.trigger("submit")},onCancel:function(){this.trigger("cancel")}});b.exports=e},{"../../component/assembly/BaseAssembly":3,"../../component/container/Dialog":14,"../../lib/underscore":72,"../content/CommitExercise":28}],5:[function(a,b){"use strict";var c=a("./BaseAssembly"),d=c.extend({createContainer:function(){var b=a("../container/Tooltip");return new b({classAdd:"device-tip-tooltip-wrap device-tip-"+this.options.device+"-tooltip-wrap",direction:["bottom"]})},createContent:function(){var b=a("../content/DeviceTip");return new b({device:this.options.device})}});b.exports=d},{"../container/Tooltip":21,"../content/DeviceTip":30,"./BaseAssembly":3}],6:[function(a,b){"use strict";var c=a("./BaseAssembly"),d=c.extend({contentEvents:{submit:"onSubmit"},createContainer:function(){var b=a("../container/Prompt");return new b({title:"("+this.options.sheetName+") 第"+(this.options.questionIndex+1)+"题笔记",classAdd:"note-panel-dialog-wrap",submitButton:"确认",closeButton:"取消"})},createContent:function(){var b=a("../content/NotePanel");return new b({note:this.options.note,question:this.options.question,course:this.options.course})},onSubmit:function(a){this.trigger("submit",a)}});b.exports=d},{"../container/Prompt":20,"../content/NotePanel":36,"./BaseAssembly":3}],7:[function(a,b){"use strict";var c=a("./BaseAssembly"),d=c.extend({createContainer:function(){var b=a("../container/Dialog");return new b({classAdd:"pause-dialog-wrap"})},createContent:function(){var b=a("../content/Pause");return new b}});b.exports=d},{"../container/Dialog":14,"../content/Pause":38,"./BaseAssembly":3}],8:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=c.extend({contentEvents:{cancel:"onCancel"},createContainer:function(){var b=a("../../../common/component/container/Dialog");return new b},createContent:function(){var b=a("../content/PayConfirm");return new b},onCancel:function(){this.trigger("cancel")}});b.exports=d},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Dialog":14,"../content/PayConfirm":40}],9:[function(a,b){"use strict";var c=a("./BaseAssembly"),d=c.extend({createContainer:function(){var b=a("../container/Tooltip");return new b({direction:["bottom"]})},createContent:function(){var b=a("../content/PaymentTip");return new b}});b.exports=d},{"../container/Tooltip":21,"../content/PaymentTip":42,"./BaseAssembly":3}],10:[function(a,b){"use strict";var c=a("./BaseAssembly"),d=c.extend({contentEvents:{submit:"onSubmit",cancel:"onCancel"},createContainer:function(){var b=a("../container/Dialog");return new b},createContent:function(){var b=a("../content/StartExercise");return new b({model:this.model})},onSubmit:function(){this.trigger("submit")},onCancel:function(){this.trigger("cancel")}});b.exports=d},{"../container/Dialog":14,"../content/StartExercise":49,"./BaseAssembly":3}],11:[function(a,b){"use strict";var c=a("./BaseAssembly"),d=c.extend({createContainer:function(){var b=a("../container/Tooltip");return new b(this.options)},createContent:function(){var b=a("../content/Tooltip");return new b(this.options.contentOptions)}});b.exports=d},{"../container/Tooltip":21,"../content/Tooltip":50,"./BaseAssembly":3}],12:[function(a,b){"use strict";var c=a("../../lib/backbone"),d=a("../../lib/underscore"),e=c.View.extend({template:null,content:null,contentEvents:{destroy:"onDestroy"},initialize:function(){this.options.classAdd&&(this.el.className+=" "+this.options.classAdd)},getRenderData:function(a){return d.extend({},this.options,a)},render:function(a){this.el.childNodes.length>0||(this.template&&(this.el.innerHTML=this.template.render(this.getRenderData(a))),this.getBody().appendChild(this.content.el))},reset:function(a){null===a?this.options={}:d.extend(this.options,a),this.render(),this.content.reset(this.options.contentOptions)},getBody:function(){return this.el},setContent:function(a){this.content&&(this.removeContent(),this.content=null),this.bindContent(a),a.setContainer(this),this.content=a},removeContent:function(){this.unbindContent(this.content),this.content.setContainer(null);var a=this.getBody();a&&this.content.el.parentNode===a&&a.removeChild(this.content.el),this.content=null},bindContent:function(a){return this.contentEvents?void Object.keys(this.contentEvents).forEach(function(b){a.on(b,this[this.contentEvents[b]],this)},this):null},unbindContent:function(a){return this.contentEvents?void Object.keys(this.contentEvents).forEach(function(b){a.off(b,this[this.contentEvents[b]],this)},this):null},destroy:function(){this.$el.remove()},onDestroy:function(){this.removeContent()},onCloseClick:function(){this.hide(),this.trigger("cancel")}});b.exports=e},{"../../lib/backbone":66,"../../lib/underscore":72}],13:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n    <div class="dialog-hd">\n        <span class="title bold">',(d=c.title)?d=d.call(a,{hash:{},data:b}):(d=a&&a.title,d=typeof d===l?d.call(a,{hash:{},data:b}):d),e+=m(d)+'</span>\n        <button class="close">&times;</button>\n    </div>\n    '}function g(a,b){var d,e="";return e+='\n    <div class="dialog-ft">\n        ',(d=c.footer)?d=d.call(a,{hash:{},data:b}):(d=a&&a.footer,d=typeof d===l?d.call(a,{hash:{},data:b}):d),(d||0===d)&&(e+=d),e+="\n    </div>\n    "}function h(a,b){var d,e="";return e+='\n    <div class="dialog-ft">\n        <span class="btn btn-primary close-btn"><span class="btn-inner">',(d=c.closeButton)?d=d.call(a,{hash:{},data:b}):(d=a&&a.closeButton,d=typeof d===l?d.call(a,{hash:{},data:b}):d),e+=m(d)+"</span></span>\n    </div>\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this,o=c.blockHelperMissing;return k+='<div class="dialog">\n    ',i=c["if"].call(b,b&&b.title,{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(i||0===i)&&(k+=i),k+='\n    <div class="dialog-bd"></div>\n    ',j={hash:{},inverse:n.noop,fn:n.program(3,g,e),data:e},(i=c.footer)?i=i.call(b,j):(i=b&&b.footer,i=typeof i===l?i.call(b,j):i),c.footer||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+="\n    ",i=c["if"].call(b,b&&b.closeButton,{hash:{},inverse:n.noop,fn:n.program(5,h,e),data:e}),(i||0===i)&&(k+=i),k+="\n</div>\n"})},{"./../../util/Template":90}],14:[function(a,b){"use strict";var c=a("../../lib/jquery"),d=a("../../lib/underscore"),e=a("./BaseContainer"),f=e.extend({className:"dialog-wrap",template:a("./Dialog.handlebars"),contentEvents:d.defaults({resize:"onResize"},e.prototype.contentEvents),events:d.extend({"click .dialog-hd .close":"onCloseClick","click .dialog-ft .close-btn":"onCloseClick"},e.prototype.events),hideTimer:null,visible:!1,getBody:function(){return this.$(".dialog-bd").get(0)},hide:function(){clearTimeout(this.hideTimer),this.visible&&(this.hideTimer=setTimeout(this.doHide.bind(this),50))},show:function(){clearTimeout(this.hideTimer),this.visible||this.doShow()},doHide:function(){this.$el.detach(),f.hideLayer(),this.visible=!1,this.trigger("hide")},doShow:function(){f.showLayer(),this.$el.css("z-index",f.layerCount+1),this.$el.css("visibility","hidden"),this.$el.appendTo(document.body),this.reposition(),this.$el.css("visibility","visible"),this.visible=!0,this.trigger("show")},reposition:function(){this.options.isFixed||a("../../util/Rect").get(this.onGetRect.bind(this))},destroy:function(){e.prototype.destroy.apply(this,arguments),f.hideLayer()},onResize:function(){this.reposition()},onGetRect:function(a){var b=this.$el.outerHeight(),c=a.top+a.height/2;c=Math.max(a.top,c-b/2);var d=this.$el.outerWidth(),e=a.left+a.width/2;e=Math.max(a.left,e-d/2),this.$el.css({top:c,left:e})}},{layerCount:null,$backdrop:null,showLayer:function(){f.$backdrop||(f.$backdrop=c('<div class="dialog-backdrop"></div>')),f.$backdrop.appendTo(document.body),f.layerCount?f.layerCount+=2:f.layerCount=parseInt(f.$backdrop.css("z-index"),10),f.$backdrop.css("z-index",f.layerCount)},hideLayer:function(){var a=c(".dialog-wrap");if(0===a.size())return void f.$backdrop.detach();var b=d.max(a.toArray().map(function(a){return parseInt(c(a).css("z-index"),10)}));f.$backdrop.css("z-index",b-1)}});b.exports=f},{"../../lib/jquery":67,"../../lib/underscore":72,"../../util/Rect":87,"./BaseContainer":12,"./Dialog.handlebars":13}],15:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="";return f+='\n\n<div class="direction-wrap">\n    <span class="popover-arrow-wrap"></span>\n    <div class="menu"></div>\n</div>\n'})},{"./../../util/Template":90}],16:[function(a,b){"use strict";var c=a("./Popover"),d=a("./Tooltip"),e=d.extend({className:c.prototype.className+" flat-menu-wrap",template:a("./FlatMenu.handlebars"),getBody:function(){return this.$(".menu").get(0)}});b.exports=e},{"./FlatMenu.handlebars":15,"./Popover":18,"./Tooltip":21}],17:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='<div class="popover-hd">',(d=c.title)?d=d.call(a,{hash:{},data:b}):(d=a&&a.title,d=typeof d===k?d.call(a,{hash:{},data:b}):d),(d||0===d)&&(e+=d),e+="</div>"}function g(a,b){var d,e="";return e+='\n    <div class="split"></div>\n    <div class="popover-ft">\n        ',(d=c.footer)?d=d.call(a,{hash:{},data:b}):(d=a&&a.footer,d=typeof d===k?d.call(a,{hash:{},data:b}):d),(d||0===d)&&(e+=d),e+="\n    </div>\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this,m=c.blockHelperMissing;return j+='<div class="popover direction-wrap">\n    <span class="popover-arrow-wrap"></span>\n    ',h=c["if"].call(b,b&&b.title,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(j+=h),j+='\n    <div class="popover-bd"></div>\n    ',i={hash:{},inverse:l.noop,fn:l.program(3,g,e),data:e},(h=c.footer)?h=h.call(b,i):(h=b&&b.footer,h=typeof h===k?h.call(b,i):h),c.footer||(h=m.call(b,h,i)),(h||0===h)&&(j+=h),j+="\n</div>\n"})},{"./../../util/Template":90}],18:[function(a,b){"use strict";var c=a("../../lib/jquery"),d=a("../../lib/underscore"),e=a("./BaseContainer"),f=e.extend({className:"popover-wrap",template:a("./Popover.handlebars"),contentEvents:d.defaults({rectChange:"onContentRectChange"},e.contentEvents),hideTimer:null,isPinToPage:!1,isDocumentBinded:!1,ignoreClickFlag:!1,triggerElement:null,visible:!1,defaultOptions:{direction:["top","bottom","left","right"],triggerAlign:["center","center"]},initialize:function(){e.prototype.initialize.apply(this,arguments),d.defaults(this.options,this.defaultOptions),d.bindAll(this,"onDocumentClick","onWindowResize"),this.onWindowResize=d.debounce(this.onWindowResize,50)},getBody:function(){return this.$(".popover-bd").get(0)},hide:function(){"#noHide"!==location.hash&&(clearTimeout(this.hideTimer),this.visible&&(this.hideTimer=setTimeout(this.doHide.bind(this),100)))},show:function(a){this.ignoreDocumentClick(),a&&(this.triggerElement=a),this.reposition(),clearTimeout(this.hideTimer),this.visible||this.doShow()},doHide:function(){this.unbindDocumentEvent(),this.unbindWindowEvent(),this.options.animate?this.options.animate.hide(this.$el):this.$el.detach(),this.visible=!1,this.trigger("hide")},doShow:function(){this.bindDocumentEvent(),this.bindWindowEvent(),this.options.animate?this.options.animate.show(this.$el):0===this.$el.parents().size()&&this.$el.appendTo(document.body),this.visible=!0,this.trigger("show")},reposition:function(){var a=0!==this.$el.closest(document.body).size();a||(this.$el.css({visibility:"hidden",top:0,left:0}),this.$el.appendTo(document.body));var b=this.calcOffset();a||this.$el.detach().css({visibility:"visible"}),this.$el.css(d.extend({left:b.left,top:b.top}))},getLayerRect:function(){var a=this.$el.offset();return a.width=this.$el.outerWidth(!0),a.height=this.$el.outerHeight(!0),a.right=a.left+a.width,a.bottom=a.top+a.height,a},calcOffset:function(){var b=this.getLayerRect(),c=null,e=null,f=this.$el.children(".direction-wrap"),g=d.isArray(this.options.direction)?this.options.direction:[this.options.direction];f.removeClass(g.map(function(a){return"popover-direction-"+a}).join(" "));var h=a("../../lib/Position"),i=a("../../util/Viewport");return g.some(function(a){e="popover-direction-"+a;var d={element:this.el,x:"left",y:"top"},g={element:this.triggerElement,x:this.options.triggerAlign[0],y:this.options.triggerAlign[1]};switch(a){case"top":d.y="bottom",g.y="top";break;case"bottom":d.y="top",g.y="bottom";break;case"right":d.x="left",g.x="right";break;case"left":d.x="right",g.x="left"}var j=this.$(".popover-arrow-wrap");if(j.size()>0){f.addClass(e);var k=j.offset(),l=j.width(),m=j.height();switch(a){case"top":d.x+=" + "+(k.left-b.left+l/2+"px"),d.y+=" + "+(k.top+m-b.bottom+"px");break;case"right":d.x+=" + "+(k.left-b.left+"px"),d.y+=" + "+(k.top-b.top+m/2+"px");break;case"bottom":d.x+=" + "+(k.left-b.left+l/2+"px"),d.y+=" + "+(k.top-b.top+"px");break;case"left":d.x+=" + "+(k.left+l-b.right+"px"),d.y+=" + "+(k.top-b.top+m/2+"px")}f.removeClass(e)}c=h.getPinOffset(d,g);var n=i.isOverflow({left:c.left,top:c.top,right:c.left+b.width,bottom:c.top+b.height});return n===i.NO_OVERFLOW?!0:!1},this),f.addClass(e),c},ignoreDocumentClick:function(){this.ignoreClickFlag=!0,setTimeout(function(){this.ignoreClickFlag=!1}.bind(this),25)},bindDocumentEvent:function(){this.isDocumentBinded||this.isPinToPage||(c(document).on("click",this.onDocumentClick),this.isDocumentBinded=!0)},bindWindowEvent:function(){this.isWindowBinded||(c(window).on("resize",this.onWindowResize),this.isWindowBinded=!0)},unbindWindowEvent:function(){this.isWindowBinded&&(c(window).off("resize",this.onWindowResize),this.isWindowBinded=!1)},unbindDocumentEvent:function(){this.isDocumentBinded&&(c(document).off("click",this.onDocumentClick),this.isDocumentBinded=!1)},pin:function(){this.unbindDocumentEvent(),this.isPinToPage=!0},unpin:function(){this.isPinToPage=!1,this.bindDocumentEvent()},onDocumentClick:function(a){this.ignoreClickFlag||a.target===this.el||this.$(a.target).size()>0||c(a.target).parent(".plupload.html5").size()>0||this.hide()},onWindowResize:function(){this.reposition()},onContentRectChange:function(){this.reposition()}});b.exports=f},{"../../lib/Position":65,"../../lib/jquery":67,"../../lib/underscore":72,"../../util/Viewport":93,"./BaseContainer":12,"./Popover.handlebars":17}],19:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n    <div class="dialog-hd">\n        <span class="title bold">',(d=c.title)?d=d.call(a,{hash:{},data:b}):(d=a&&a.title,d=typeof d===k?d.call(a,{hash:{},data:b}):d),e+=l(d)+"</span>\n        ",d=c["if"].call(a,a&&a.closeButton,{hash:{},inverse:m.noop,fn:m.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n    </div>\n    "}function g(){return'\n        <button class="close">&times;</button>\n        '}function h(a,b){var d,e="";return e+='\n        <span class="btn btn-altern close-btn"><span class="btn-inner">',(d=c.closeButton)?d=d.call(a,{hash:{},data:b}):(d=a&&a.closeButton,d=typeof d===k?d.call(a,{hash:{},data:b}):d),e+=l(d)+"</span></span>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return j+='<div class="dialog">\n    ',i=c["if"].call(b,b&&b.title,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+='\n    <div class="dialog-bd"></div>\n    <div class="dialog-ft">\n        <span class="btn btn-primary submit-btn"><span class="btn-inner">',(i=c.submitButton)?i=i.call(b,{hash:{},data:e}):(i=b&&b.submitButton,i=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(i)+"</span></span>\n        ",i=c["if"].call(b,b&&b.closeButton,{hash:{},inverse:m.noop,fn:m.program(4,h,e),data:e}),(i||0===i)&&(j+=i),j+="\n    </div>\n</div>\n"})},{"./../../util/Template":90}],20:[function(a,b){"use strict";var c=a("./Dialog"),d=a("../../../common/lib/underscore"),e=c.extend({events:d.extend({"click .dialog-ft .submit-btn:not([disabled])":"onSubmitClick"},c.prototype.events),template:a("./Prompt.handlebars"),onSubmitClick:function(a){a.preventDefault(),this.trigger("submit",a)}});b.exports=e},{"../../../common/lib/underscore":72,"./Dialog":14,"./Prompt.handlebars":19}],21:[function(a,b){"use strict";var c=a("../../lib/jquery"),d=a("./Popover"),e=d.extend({events:{mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},className:d.prototype.className+" tooltip-wrap",showTimer:null,initialize:function(){d.prototype.initialize.apply(this,arguments),this.onTriggerLeave=this.onTriggerLeave.bind(this),this.options.tipClass&&this.$el.addClass(this.options.tipClass)},isTriggerBinded:!1,show:function(a){this.ignoreDocumentClick(),this.triggerElement&&this.unbindTriggerEvent(),a&&(this.triggerElement=a),this.bindTriggerEvent(),clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.reposition(),this.visible||(this.showTimer=setTimeout(this.doShow.bind(this),200))},hide:function(){clearTimeout(this.showTimer),d.prototype.hide.apply(this,arguments)},onMouseEnter:function(){clearTimeout(this.hideTimer)},onMouseLeave:function(){this.isPinToPage||this.hide()},bindTriggerEvent:function(){this.isTriggerBinded||(c(this.triggerElement).on("mouseleave",this.onTriggerLeave),this.isTriggerBinded=!0)},unbindTriggerEvent:function(){this.isTriggerBinded&&(c(this.triggerElement).off("mouseleave",this.onTriggerLeave),this.isTriggerBinded=!1)},onTriggerLeave:function(){this.hide()}});b.exports=e},{"../../lib/jquery":67,"./Popover":18}],22:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='<i class="icon-',(d=c.icon)?d=d.call(a,{hash:{},data:b}):(d=a&&a.icon,d=typeof d===i?d.call(a,{hash:{},data:b}):d),e+=j(d)+'"></i>'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return g=c["if"].call(b,b&&b.icon,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),(g=c.content)?g=g.call(b,{hash:{},data:e}):(g=b&&b.content,g=typeof g===i?g.call(b,{hash:{},data:e}):g),(g||0===g)&&(h+=g),(g=c.htmlContent)?g=g.call(b,{hash:{},data:e}):(g=b&&b.htmlContent,g=typeof g===i?g.call(b,{hash:{},data:e}):g),(g||0===g)&&(h+=g),h+="\n"})},{"./../../util/Template":90}],23:[function(a,b){"use strict";var c=a("./BaseContent"),d=c.extend({className:"alert-wrap",template:a("./Alert.handlebars")});b.exports=d},{"./Alert.handlebars":22,"./BaseContent":25}],24:[function(a,b){"use strict";var c=a("../../../common/lib/jquery"),d=a("../../../common/lib/backbone"),e=a("../../../common/lib/moment"),f=a("../../../common/lib/underscore"),g=d.View.extend({events:{"mousedown .audio-play, .audio-stop":"onControllerMousedown","click .audio-play":"onPlayButtonClick","click .audio-stop":"onStopButtonClick","click .audio-player-progressbar":"onProgressbarClick"},playPosition:null,progressWidth:null,totalTime:null,onMoving:null,isLoad:null,bindTimer:null,initialize:function(){this.progressWidth=this.$(".audio-player-progressbar").width(),this.onDocumentMousemove=this.onDocumentMousemove.bind(this),this.onDocumentMouseup=this.onDocumentMouseup.bind(this),this.drawProgress=f.debounce(this.drawProgress.bind(this),10),this.getProgressbarOffset=f.memoize(this.getProgressbarOffset),this.getController=f.memoize(this.getController),this.getPlayTime=f.memoize(this.getPlayTime),this.getPlayBar=f.memoize(this.getPlayBar),this.getBufferBar=f.memoize(this.getBufferBar)},hasTip:function(){return this.$(".pinned-tip").size()>0},setTip:function(a){this.$(".pinned-tip").data("tip",a)},setTotalTime:function(a){this.isLoad&&(this.totalTime=a,this.$(".audio-player-timer").removeClass("hidden"),this.$(".total-time").text(this.formatSeconds(a)))},setPosition:function(a,b){this.playPosition=a,this.onMoving||this.drawProgress(a,b)},setStatePlay:function(){this.$(".audio-play").addClass("hidden"),this.$(".audio-stop").removeClass("hidden")},setStateStop:function(){this.$(".audio-play").removeClass("hidden"),this.$(".audio-stop").addClass("hidden")},getPlayerUrl:function(){return this.$el.data("url")},getProgressbarOffset:function(){return this.$(".audio-player-progressbar").offset().left},getController:function(){return this.$(".audio-player-controller")},getPlayTime:function(){return this.$(".play-time")},getPlayBar:function(){return this.$(".play-bar")},getBufferBar:function(){return this.$(".buffer-bar")},getPositionFromMouseEvent:function(a){var b=Math.min(Math.max(a.clientX-this.getProgressbarOffset(),0),this.progressWidth);return parseInt(b/this.progressWidth*this.totalTime,10)},bindDocumentMoveEvent:function(){c(document).on("mousemove",this.onDocumentMousemove)},bindDocumentupEvent:function(){c(document).on("mouseup",this.onDocumentMouseup),c(document).on("selectstart",this.onDocumentSelectStart)},unbindDocumentEvent:function(){c(document).off("mousemove",this.onDocumentMousemove),c(document).off("mouseup",this.onDocumentMouseup),c(document).off("selectstart",this.onDocumentSelectStart)},formatSeconds:function(a){a=parseInt(a,10);var b=null;return b=e.utc(1e3*a).format(3600>a?"mm:ss":"HH:mm:ss")},drawProgress:function(a,b){this.isLoad&&(this.getPlayTime().text(this.formatSeconds(a)),this.getPlayBar().width(a/this.totalTime*this.progressWidth),this.getBufferBar().width(void 0!==b?(a+b)/this.totalTime*this.progressWidth:0),this.getController().css("left",a/this.totalTime*this.progressWidth))},onProgressbarClick:function(a){this.trigger("seek",this,this.getPositionFromMouseEvent(a))},onControllerMousedown:function(){this.$(".audio-player-controller").addClass("controller-press"),this.bindDocumentupEvent(),this.bindTimer=setTimeout(function(){this.bindDocumentMoveEvent()}.bind(this),300)},onPlayButtonClick:function(){return this.isLoad?void(this.onMoving||this.trigger("play",this,this.playPosition)):void this.trigger("load",this)},onStopButtonClick:function(){this.onMoving||this.trigger("stop",this)},onDocumentMousemove:function(a){this.onMoving=!0,this.drawProgress(this.getPositionFromMouseEvent(a))},onDocumentMouseup:function(a){clearTimeout(this.bindTimer),this.unbindDocumentEvent(),this.$(".audio-player-controller").removeClass("controller-press"),this.onMoving&&(this.trigger("seek",this,this.getPositionFromMouseEvent(a)),setTimeout(function(){this.onMoving=!1}.bind(this),100))},onDocumentSelectStart:function(a){a.preventDefault()},onLoad:function(a){this.isLoad=!0,this.setTotalTime(a.duration)}});b.exports=g},{"../../../common/lib/backbone":66,"../../../common/lib/jquery":67,"../../../common/lib/moment":68,"../../../common/lib/underscore":72}],25:[function(a,b){"use strict";var c=a("../../../common/lib/backbone"),d=a("../../../common/lib/underscore"),e=c.View.extend({container:null,containerEvents:null,reset:function(a){null===a?this.options={}:d.extend(this.options,a),this.render()},destroy:function(){this.$el.remove(),this.trigger("destroy",this)},setContainer:function(a){this.container&&this.unbindContainer(this.container),this.container=a,this.container&&this.bindContainer(this.container)},bindContainer:function(a){return this.containerEvents?void Object.keys(this.containerEvents).forEach(function(b){a.on(b,this[this.containerEvents[b]],this)},this):null},unbindContainer:function(a){return this.containerEvents?void Object.keys(this.containerEvents).forEach(function(b){a.off(b,this[this.containerEvents[b]],this)},this):null},getRenderData:function(a){return d.extend({},this.options,a)},render:function(){this.template&&(this.el.innerHTML=this.template.render(this.getRenderData.apply(this,arguments)))}});b.exports=e},{"../../../common/lib/backbone":66,"../../../common/lib/underscore":72}],26:[function(a,b){"use strict";var c=a("../../lib/backbone"),d=c.View.extend({events:{"click .chapter-switch":"onChapterNavClick","load img":"onImageLoad","click .return-top":"onReturnClick"},sheet:null,currentChapterIndex:null,initialize:function(){this.initQuestionSheet(),this.currentChapterIndex=this.$el.data("currentChapterIndex");var b=a("../../util/ScrollUtil");b.on(this.onScrollForReturnTop,this),this.headerFix=this.$(".placeholder .fixed-head").outerHeight(),this.topFix=this.$el.offset().top,this.$returnTop=this.$(".return-top-wrap")},initQuestionSheet:function(){var b=this.$(".sheet-wrap");if(0!==b.size()){this.$(".exercise-ft").height(b.outerHeight(!0));var c=a("./QuestionSheet");this.sheet=new c({el:b.get(0)}),this.sheet.on("switch",this.onSheetSwitch,this),this.sheet.on("expand",this.onSheetExpand,this),this.sheet.on("shrink",this.onSheetShrink,this)}},scrollToQuestion:function(b){var c=this.$("#question"+b);c.prev(".material").size()>0&&(c=c.closest(".material-wrap"));var d=a("../../util/ScrollUtil");setTimeout(function(){d.to(c,{fix:this.headerFix})}.bind(this),30)},scrollToTop:function(){var b=a("../../util/ScrollUtil");b.to(this.$(".placeholder").next(),{fix:this.headerFix})},switchChapterNav:function(a){this.$(".chapter-nav li:eq("+a+")").addClass("active").siblings(".active").removeClass("active"),this.$(".chapter-desc-list .chapter-desc[data-chapter-index="+a+"]").removeClass("hide").siblings().addClass("hide")},createRequest:function(){},fetch:function(a){var b=this.createRequest(a);return b.fail(this.onFetchFail.bind(this)),b.done(this.onFetchSuccess.bind(this,a)),b},onImageLoad:function(){this.sheet&&this.sheet.resetOffset()},onFetchSuccess:function(a,b){this.currentChapterIndex=a.chapterIndex,this.$(".chapter-wrap").replaceWith(b),this.sheet&&this.sheet.resetOffset(),void 0===a.questionIndex?this.scrollToTop():this.scrollToQuestion(a.questionIndex)},onFetchFail:function(){},onChapterNavClick:function(a){a.preventDefault();var b=this.$(a.currentTarget).data("chapterIndex");this.fetch({chapterIndex:b}),this.switchChapterNav(b)},onSheetSwitch:function(a,b){return a!==this.currentChapterIndex?(this.fetch({chapterIndex:a,questionIndex:b}),void this.switchChapterNav(a)):void this.scrollToQuestion(b)},onReturnClick:function(a){a.preventDefault(),this.scrollToTop()},onScrollForReturnTop:function(a){a.top>this.topFix+this.headerFix?this.$returnTop.removeClass("hide"):this.$returnTop.addClass("hide")}});b.exports=d},{"../../lib/backbone":66,"../../util/ScrollUtil":89,"./QuestionSheet":45}],27:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){function f(){return'\n    <div class="lead">答题时间已到，为保证模考效果，请交卷</div>\n    <div class="button-row">\n        <span class="btn btn-paper btn-paper-xlarge submit">交卷</span>\n        <br />\n        <span class="btn btn-paper btn-paper-xlarge cancel">暂不交卷，继续做</span>\n    </div>\n    '}function g(a,b){var d,e="";return e+='\n    <div class="lead">还剩',(d=c.remainQuestions)?d=d.call(a,{hash:{},data:b}):(d=a&&a.remainQuestions,d=typeof d===j?d.call(a,{hash:{},data:b}):d),e+=k(d)+'道题未答完，确定要交卷吗？</div>\n    <div class="button-row">\n        <span class="btn btn-paper btn-paper-xlarge submit">确定交卷</span>\n        <br />\n        <span class="btn btn-paper btn-paper-xlarge cancel">谢谢提醒，继续做</span>\n    </div>\n    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="commit-exercise">\n    ',h=c["if"].call(b,b&&b.elapsed,{hash:{},inverse:l.program(3,g,e),fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n</div>\n"})},{"./../../util/Template":90}],28:[function(a,b){"use strict";var c=a("../../component/content/BaseContent"),d=c.extend({className:"commit-exercise-wrap",events:{"click .submit":"onSubmit","click .cancel":"onCancel"},template:a("./CommitExercise.handlebars"),onSubmit:function(a){a.preventDefault(),this.container.hide(),this.trigger("submit")},onCancel:function(a){a.preventDefault(),this.container.hide(),this.trigger("cancel")}});b.exports=d},{"../../component/content/BaseContent":25,"./CommitExercise.handlebars":27}],29:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};
var f,g="",h="function",i=this.escapeExpression;return g+='\n\n<div class="device-tip">\n    <p>本套题通过粉笔题库',(f=c.deviceText)?f=f.call(b,{hash:{},data:e}):(f=b&&b.deviceText,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'完成。</p>\n    <p>粉笔题库同时支持网页版答题、<a href="/m">手机答题</a>和线下答题。</p>\n</div>\n'})},{"./../../util/Template":90}],30:[function(a,b){"use strict";var c=a("./BaseContent"),d=c.extend({className:"device-tip-wrap",template:a("./DeviceTip.handlebars"),getRenderData:function(){var a=c.prototype.getRenderData.apply(this,arguments);return a.deviceText={web:"网页版",mobile:"手机版",card:"答题卡"}[a.device],a}});b.exports=d},{"./BaseContent":25,"./DeviceTip.handlebars":29}],31:[function(a,b){"use strict";var c=a("../../lib/underscore"),d=a("./ExerciseSolution"),e=d.extend({events:c.defaults({"click .understand":"onUnderstandClick"},d.prototype.events),onUnderstandClick:function(b){b.preventDefault();var c=this.$(b.currentTarget).closest(".question-wrap"),d=c.data("id"),e=a("../../util/Command").execute("deleteErrorQuestion",{urlPattern:{questionId:d}});e.done(function(){0===c.next(".split-box:visible").fadeOut().size()&&c.prev(".split-box:visible").fadeOut(),c.fadeOut(function(){var a=c.closest(".material-wrap");a.size()>0&&0===a.find(".question-wrap:visible").size()&&(a.fadeOut(),0===a.next(".split-box:visible").fadeOut().size()&&a.prev(".split-box:visible").fadeOut())})})}});b.exports=e},{"../../lib/underscore":72,"../../util/Command":80,"./ExerciseSolution":34}],32:[function(a,b){"use strict";var c=a("../../lib/underscore"),d=a("../../lib/jquery"),e=a("./BaseExercise"),f=e.extend({events:c.defaults({"click .commit-exercise":"onCommitClick","click .pause":"onPauseClick","dblclick .timer":"onClockClick","click .material-popup":"onMaterialPopupClick"},e.prototype.events),questionEvents:{"change:collect":"onQuestionCollectChange","change:answer":"onQuestionAnswerChange"},timer:null,sheet:null,touched:!1,offsetTop:null,fixed:!1,currentRequest:null,retryTimer:null,initialize:function(){e.prototype.initialize.apply(this,arguments);var b=this.$el.data(),f=a("../../model/ExerciseModel");this.model=new f(c.pick(b,"sheetName","version","id","elapsedTime","sheetQuestionCount","sheetTime","status","sheetType")),this.model.set("lastActionTime",Date.now()),d(document.body).on("click","a[href]:not([target=_blank]):not(.exercise-link)",this.onLinkClick.bind(this)),this.touched=this.model.get("status")>=0;var g=a("../../collection/AnswerCollection");this.answerCollection=new g,this.questions=[],this.resetQuestions()},resetQuestions:function(){this.answerCollection.reset(),this.questions.forEach(function(a){this.removeQuestion(a)},this),this.questions=[],this.$(".question-wrap").toArray().forEach(function(a){this.addQuestion(a)},this)},destroy:function(){this.questions.forEach(function(a){this.removeQuestion(a)},this)},createQuestion:function(b){var c=a("../item/Question");return new c({el:b,exercise:this.model})},addQuestion:function(a){var b=this.createQuestion(a);this.answerCollection.add(b.model),this.questions.push(b),c.onEvents(b,this.questionEvents,this)},removeQuestion:function(a){c.offEvents(a,this.questionEvents,this),this.answerCollection.remove(a.model),this.questions=c.without(this.questions,a),a.destroy()},changeAnswerCount:function(a){var b=this.$(".chapter-nav .active .answer-count"),c=a+parseInt(b.first().text(),10);b.text(c)},getAnswerByIndex:function(a,b){return c.pick(a,b)},getSaveData:function(a){var b=c.defaults({id:this.model.id,version:this.model.get("version")+1},a),d=this.answerCollection.getChangedAnswers();return d.length>0&&(b.answers=c.object(d.map(function(a){return a.questionIndex}),d)),b},save:function(a,b){clearTimeout(this.retryTimer),this.currentRequest&&this.currentRequest.abort(),b=b||{};var e=b.retryCount||0;a=this.getSaveData(a),this.currentRequest=this.model.save(null,{contentType:"application/json",data:JSON.stringify(a),success:this.onSaveDone.bind(this)});var f=new d.Deferred;return this.currentRequest.always(function(){this.currentRequest=null}.bind(this)),this.currentRequest.done(function(){f.resolve.apply(f,arguments)}),this.currentRequest.fail(function(b,d,g){if(0!==b.status&&b.status>=400&&b.status<600||"abort"===g)return void f.reject.apply(f,arguments);var h=1e3*c.fib(e++);this.retryTimer=setTimeout(function(){this.save(a,{retryCount:e+1}).done(function(){f.resolve.apply(f,arguments)}).fail(function(){this.onSaveError.apply(this,arguments),f.reject.apply(f,arguments)})}.bind(this),h)}.bind(this)),f.promise()},showCommitExercise:function(b){this.stopTimer();var c=a("../assembly/CommitExercise"),d=new c({remainQuestions:b.remainQuestions,elapsed:b.elapsed});d.reset(),d.show(),d.on("submit",this.doCommit,this),d.on("cancel",this.startTimer,this)},getRemainQuestionCount:function(){return this.sheet.getRemainQuestionCount()},commit:function(){var a=this.getRemainQuestionCount();return 0===a?void this.doCommit():void this.showCommitExercise({remainQuestions:a})},doCommit:function(){var b=this.save({status:1}),c=a("../../util/Message").loading("正在生成练习报告...");b.done(function(a){0===a.code&&c.hide()}.bind(this)),b.fail(function(){c.hide()}),b.done(this.onCommitSuccess.bind(this)),b.fail(this.onCommitFail.bind(this))},pause:function(){var b=a("../assembly/Pause"),c=new b;c.reset(),c.show(),c.on("hide",function(){this.model.set("lastActionTime",Date.now()),this.startTimer()},this),this.stopTimer()},startTimer:function(){this.startTime=Date.now(),this.stopTimer();var b=a("../../util/Timer");this.timer=b.interval(this.onTimer.bind(this),1e3)},stopTimer:function(){var b=a("../../util/Timer");b.clear(this.timer)},renderElapsedTime:function(){var b=a("../../util/DateUtil"),c=null;this.model.get("sheetTime")?(c=this.model.get("sheetTime")-this.model.get("elapsedTime"),this.$(".timer").siblings(".text").text(c>=0?"剩余时间":"超时")):c=this.model.get("elapsedTime"),this.$(".timer").text(b.formatElapsedTime(Math.abs(c)))},render:function(){function b(){c.renderElapsedTime();var b=a("../../util/TimeOffset");b.setSystemTime(c.$el.data("systemTime")),c.model.set("lastActionTime",Date.now()),c.startTimer()}var c=this;if(this.model.get("sheetType")>2||this.model.get("status")>=0||-1!==location.search.indexOf("chapterIndex="))b();else{var d=a("../assembly/StartExercise"),e=new d({model:this.model});e.on("submit",b),e.on("cancel",function(){location.href="/"}),e.reset(),e.show()}},createRequest:function(b){var c=a("../../util/Command").execute("getExercise",{urlPattern:{exerciseId:this.model.id}},{data:b});return c},syncAnswers:function(a){c.forEach(a,function(a){var b=this.answerCollection.get(a.questionId);b&&(b.set(c.defaults(b.toJSON(),a)),this.sheet&&this.sheet.setAnswered(b.get("questionIndex"),!b.isEmpty()))},this)},onSaveDone:function(a,b){return b&&0===b.code?(this.syncAnswers(b.answers),void this.save()):void this.answerCollection.clearChanged()},onSaveError:function(){},onCommitClick:function(){this.commit()},onPauseClick:function(){this.pause()},onMaterialPopupClick:function(b){b.preventDefault();var c=a("../content/PopupMaterial"),d=this.$(b.currentTarget).closest(".material");c.popup(d)},onTimer:function(){this.startTime+=1e3;var a=(this.model.get("elapsedTime")||0)+1;if("#rpwtrpjj"===location.hash&&(a=this.model.get("sheetTime")-900-2,location.hash=""),"#rpwtrpjj2"===location.hash&&(a=this.model.get("sheetTime")-2,location.hash=""),this.model.set("elapsedTime",a),this.renderElapsedTime(),this.model.get("sheetTime")>0&&a===this.model.get("sheetTime")&&this.showCommitExercise({elapsed:!0}),this.model.get("sheetTime")&&this.model.get("sheetTime")-a===900){var b=this.$(".remain-time-banner"),c=!1;b.fadeIn(),b.one("mouseenter",function(){c||(b.fadeOut(),c=!0)}),setTimeout(function(){c||(b.fadeOut(),c=!0)},5e3),setTimeout(function(){d(document).scrollTop()>b.offset().top&&b.addClass("fixed")},25)}},onLinkClick:function(b){function c(){e.hide(),a("../../../common/util/Message").success("试卷已保存"),setTimeout(function(){location.href=d},300)}if(!b.isDefaultPrevented()&&(this.touched||0!==this.$(b.currentTarget).closest(".save-exercise").size())){var d=this.$(b.currentTarget).attr("href");if(d){b.preventDefault();var e=a("../../../common/util/Message").loading("正在保存试卷...");this.touched?setTimeout(c,1e3):this.save().done(c)}}},onCommitSuccess:function(){},onCommitFail:function(){},onClockClick:function(a){if(a.shiftKey){a.preventDefault();var b=this,d=function(){b.$(".answers").toArray().forEach(function(a){var d=b.$(a).find(".answer:not(.active)"),e=c.random(0,d.size()-1);d.eq(e).click()},b)}.bind(b);d(),setTimeout(function(){var a=b.$(".chapter-nav .active").next().first();a.size()>0&&!function c(){a.find("a").click(),setTimeout(function(){d(),a=a.next().first(),a.size()>0&&c()},1e3)}()},1e3)}},onQuestionAnswerChange:function(a,b){this.model.set("lastActionTime",Date.now()),this.touched=!0,"remove"===a.lastAction?this.changeAnswerCount(-1):"create"===a.lastAction&&this.changeAnswerCount(1),this.sheet&&this.sheet.setAnswered(b.get("questionIndex"),!b.isEmpty()),this.save()},onQuestionCollectChange:function(a,b){this.sheet&&this.sheet.setCollected(b.get("questionIndex"),a.isCollected())},onFetchSuccess:function(){e.prototype.onFetchSuccess.apply(this,arguments),this.resetQuestions()}}),g=a("./mixin/PopPageScroll");g.mixin(f);var h=a("./mixin/FixHead");h.mixin(f),b.exports=f},{"../../../common/util/Message":85,"../../collection/AnswerCollection":1,"../../lib/jquery":67,"../../lib/underscore":72,"../../model/ExerciseModel":74,"../../util/Command":80,"../../util/DateUtil":81,"../../util/Message":85,"../../util/TimeOffset":91,"../../util/Timer":92,"../assembly/CommitExercise":4,"../assembly/Pause":7,"../assembly/StartExercise":10,"../content/PopupMaterial":44,"../item/Question":61,"./BaseExercise":26,"./mixin/FixHead":51,"./mixin/PopPageScroll":52}],33:[function(a,b){"use strict";var c=a("../../lib/backbone"),d=a("../../lib/jquery"),e=c.View.extend({events:{"mouseover .platform":"onDeviceHover","click .platform":"onDeviceClick"},deviceTip:null,initialize:function(){d(this.fixedShareBar.bind(this))},fixedShareBar:function(){function b(){f.scrollTop()<e-d(window).height()?c.addClass("fixed"):c.removeClass("fixed")}var c=this.$(".share-wrap");if(0!==c.size()){var e=this.$el.offset().top+this.$el.height(),f=d(document),g=a("../../util/ScrollUtil");g.on(b,this),b()}},showDevice:function(b){var c=this.$(b);if(!this.deviceTip){var d=a("../assembly/DeviceTip");this.deviceTip=new d({device:c.data("device")}),this.deviceTip.reset()}this.deviceTip.show(b)},onDeviceHover:function(a){this.showDevice(a.currentTarget)},onDeviceClick:function(a){this.showDevice(a.currentTarget)}}),f=a("./mixin/PopPageScroll");f.mixin(e),b.exports=e},{"../../lib/backbone":66,"../../lib/jquery":67,"../../util/ScrollUtil":89,"../assembly/DeviceTip":5,"./mixin/PopPageScroll":52}],34:[function(a,b){"use strict";var c=a("../../lib/underscore"),d=a("./BaseExercise"),e=d.extend({events:c.defaults({"click .shrink-solution":"onShrinkSolutionClick","click .expand-solution":"onExpandSolutionClick","click .view-all-question":"onViewAllQuestionClick","change .incorrect-only":"onIncorrectOnlyChange","click .flag, .cancel-flag":"onMarkedClick","click .material-popup":"onMaterialPopupClick","click .edit-note":"onNoteEditClick"},d.prototype.events),incorrectOnly:!1,initialize:function(){d.prototype.initialize.apply(this,arguments),this.initAudio()},initAudio:function(){var b=this.$(".audio-player");if(!(b.size()<=0)){var c=a("../../util/AudioPlayerManager"),d=a("../../component/content/AudioPlayer"),e=c.getInstance();b.each(function(){var a=new d({el:this});a.render(),e.registryPlayer(a)})}},showCorrect:function(){this.$(".question-with-solution-wrap, .split-box, .material-wrap").show(),this.toggleEmpty(),this.sheet&&this.sheet.resetOffset()},hideCorrect:function(){this.$(".question-with-solution-wrap.correct").each(function(a,b){var c=this.$(b).hide().next(".split-box");0===c.size()&&(c=this.$(b).prev(".split-box")),c.hide()}.bind(this)),this.$(".material-wrap").each(function(a,b){if(0===this.$(b).find(".question-with-solution-wrap:not(.correct)").size()){var c=this.$(b).hide().next(".split-box");0===c.size()&&(c=this.$(b).prev(".split-box")),c.hide()}}.bind(this)),this.toggleEmpty(),this.sheet&&this.sheet.resetOffset()},toggleEmpty:function(){this.$(".empty-tip").remove(),this.incorrectOnly&&0===this.$(".question-with-solution-wrap:not(.correct)").size()&&this.$(".placeholder").after('<div class="muted empty-tip">恭喜，本小节没有错题，<a href="#" class="view-all-question">查看所有题目解析</a></div>')},createRequest:function(b){var c=a("../../util/Command").execute("getSolution",{urlPattern:{exerciseId:this.$el.data("exerciseId")}},{data:b});return c},toggleCorrect:function(){this.incorrectOnly=this.$(".incorrect-only").prop("checked"),this.incorrectOnly?this.hideCorrect():this.showCorrect()},toggleMarked:function(a){var b=!a.data("collected");a.data("collected",b),b?this.collect(a):this.uncollect(a),this.sheet&&this.sheet.setCollected(a.data("questionIndex"),b)},collect:function(b){b.data("marked",!0),b.find(".cancel-flag").show(),b.find(".flag").hide();var c={questionId:b.data("id")};b.data("coursePrefix")&&(c.course=b.data("coursePrefix")),a("../../util/Command").execute("collect",{urlPattern:c})},uncollect:function(b){b.data("marked",!1),b.find(".cancel-flag").hide(),b.find(".flag").show();var c={questionId:b.data("id")};b.data("coursePrefix")&&(c.course=b.data("coursePrefix")),a("../../util/Command").execute("uncollect",{urlPattern:c})},onFetchSuccess:function(){d.prototype.onFetchSuccess.apply(this,arguments),this.initAudio(),this.incorrectOnly&&this.hideCorrect()},onExpandSolutionClick:function(a){a.preventDefault(),window._gaq&&window._gaq.push(["_trackEvent","ExpandSolution"]),this.$(a.target).closest(".question-with-solution-wrap").find(".question, .solution-wrap").addClass("expanded")},onShrinkSolutionClick:function(a){a.preventDefault(),window._gaq&&window._gaq.push(["_trackEvent","ShrinkSolution"]),this.$(a.target).closest(".question-with-solution-wrap").find(".question, .solution-wrap").removeClass("expanded")},onIncorrectOnlyChange:function(){setTimeout(function(){this.toggleCorrect()}.bind(this),25)},onViewAllQuestionClick:function(a){a.preventDefault(),this.$(".incorrect-only").click()},onSheetSwitch:function(a,b,c){c&&this.$(".incorrect-only:checked").size()>0&&this.$(".incorrect-only").click(),d.prototype.onSheetSwitch.apply(this,arguments)},onMaterialPopupClick:function(b){b.preventDefault();var c=a("../content/PopupMaterial"),d=this.$(b.currentTarget).closest(".material");c.popup(d)},onMarkedClick:function(a){var b=this.$(a.currentTarget).closest(".question-wrap");this.toggleMarked(b)},onNoteEditClick:function(b){b.preventDefault();var c=this.$(b.currentTarget).closest(".note-item"),d=this.$(b.currentTarget).closest("div[data-note-id]").data("noteId");d&&!c.data("noteId")&&c.data("noteId",d);var e={content:c.find(".note-content").text(),accessories:c.find(".note-accessories").html()};c.data("noteId")&&(e.id=c.data("noteId"));var f=c.closest(".question-wrap"),g={id:f.data("id")},h=a("../assembly/NotePanel"),i=new h({note:e,question:g,sheetName:this.$el.data("sheetName"),questionIndex:f.data("questionIndex"),course:f.data("coursePrefix")||null});i.reset(),i.show(),i.on("submit",function(b){i.hide(),c.data("noteId",b&&b.id||null);var d={};f.data("coursePrefix")&&(d.course=f.data("coursePrefix"));var e=a("../../../common/util/Command").execute("getNote",{urlPattern:d},{data:{questionId:f.data("id")}}),g=a("../../../common/util/Message").loading("正在更新笔记...");e.done(function(a){c.find(".item-inner").html(a)}).fail(function(b){a("../../../common/util/ExceptionUtil").alert(null,{xhr:b})}).always(function(){g.hide()})}.bind(this))}}),f=a("./mixin/PopPageScroll");f.mixin(e);var g=a("./mixin/FixHead");g.mixin(e),b.exports=e},{"../../../common/util/Command":80,"../../../common/util/ExceptionUtil":83,"../../../common/util/Message":85,"../../component/content/AudioPlayer":24,"../../lib/underscore":72,"../../util/AudioPlayerManager":79,"../../util/Command":80,"../assembly/NotePanel":6,"../content/PopupMaterial":44,"./BaseExercise":26,"./mixin/FixHead":51,"./mixin/PopPageScroll":52}],35:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='\n\n<div class="note-panel">\n    <div class="note-content">\n        <textarea placeholder="笔记内容">'+j((f=b&&b.note,f=null==f||f===!1?f:f.content,typeof f===i?f.apply(b):f))+'</textarea>\n        <div class="word-count"></div>\n    </div>\n    ',f=b&&b.note,f=null==f||f===!1?f:f.accessories,g=typeof f===i?f.apply(b):f,(g||0===g)&&(h+=g),h+="\n</div>\n"})},{"./../../util/Template":90}],36:[function(a,b){"use strict";var c=a("./BaseContent"),d=a("../../lib/underscore"),e=c.extend({className:"note-panel-wrap",containerEvents:d.defaults({submit:"onContainerSubmit"},c.prototype.containerEvents),template:a("./NotePanel.handlebars"),events:{"click .delete-accessory":"onDeleteAccessoryClick","keydown textarea":"onTextareaChange","change textarea":"onTextareaChange"},initialize:function(){c.prototype.initialize.apply(this,arguments),this.onTextareaChange=d.debounce(this.onTextareaChange,100)},render:function(){c.prototype.render.apply(this,arguments),setTimeout(function(){this.$("textarea").focus()}.bind(this),25),this.renderWordCount()},renderWordCount:function(){var a=this.$("textarea").val(),b=500-a.length,c=this.$(".word-count");b>=0?(c.removeClass("text-red").text("还可以输入"+b+"字"),this.container.$(".submit-btn").attr("disabled",!1)):(c.addClass("text-red").text("已超出"+(0-b)+"字"),this.container.$(".submit-btn").attr("disabled",!0))},submitData:function(){var b={content:this.$("textarea").val().trim(),id:this.options.note.id,questionId:this.options.question.id,accessories:this.$(".note-image-accessory").toArray().map(function(a){return{type:1,imageId:this.$(a).data("imageId")}},this)};if(!b.content&&!b.id)return void this.container.hide();var c="updateNote";b.content||b.accessories&&b.accessories.length?b.id||(c="createNote"):c="deleteNode";var d={noteId:b.id};this.options.course&&(d.course=this.options.course);var e=a("../../util/Command").execute(c,{urlPattern:d},{data:JSON.stringify(b)}),f=a("../../util/Message").loading("正在保存...");e.done(function(a){f.hide(),this.trigger("submit",a)}.bind(this)),e.fail(function(b){f.hide();var c=null;413===b.status&&(c=a("../../exception/NoteContentTooLong"));var d=a("../../util/ExceptionUtil");d.alert(c,{xhr:b})})},onContainerSubmit:function(){this.submitData()},onDeleteAccessoryClick:function(a){a.preventDefault(),this.$(a.currentTarget).closest(".note-image-accessory").remove()},onTextareaChange:function(){this.renderWordCount()}});b.exports=e},{"../../exception/NoteContentTooLong":62,"../../lib/underscore":72,"../../util/Command":80,"../../util/ExceptionUtil":83,"../../util/Message":85,"./BaseContent":25,"./NotePanel.handlebars":35}],37:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="pause">\n    <span class="btn btn-paper btn-paper-large resume fir-wrap">\n        <span class="fir fir-btn-paper-resume"><span class="fir-text">继续做题</span></span>\n    </span>\n</div>\n'})},{"./../../util/Template":90}],38:[function(a,b){"use strict";var c=a("./BaseContent"),d=c.extend({events:{"click .resume":"onResumeClick"},className:"pause-wrap",template:a("./Pause.handlebars"),onResumeClick:function(){this.container.hide()}});b.exports=d},{"./BaseContent":25,"./Pause.handlebars":37}],39:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="text-center">\n    <h4>请在新打开的页面上完成付款，付款完成前不要关闭此窗口</h4>\n</div>\n<div class="error-area cancel">\n    <br /><br /><br /><br /><br />\n    <h3>支付遇到问题？</h3>\n    <span class="link">试试其它支付手段</span>\n</div>\n<div class="success-area success">\n    <br /><br /><br /><br /><br />\n    <h3>已经支付成功！</h3>\n    <span class="link">继续使用粉笔题库</span>\n</div>\n'})},{"./../../util/Template":90}],40:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=a("../../../common/lib/underscore"),e=c.extend({events:d.defaults({"click .success":"onSuccessClick","click .cancel":"onCancelClick"},c.prototype.event),className:"pay-confirm-wrap",template:a("./PayConfirm.handlebars"),onSuccessClick:function(){this.container.hide(),location.reload()},onCancelClick:function(){window._gaq&&window._gaq.push(["_trackEvent","Order","PaymentFailed"]),this.container.hide(),this.trigger("cancel")}});b.exports=e},{"../../../common/component/content/BaseContent":25,"../../../common/lib/underscore":72,"./PayConfirm.handlebars":39}],41:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="";return f+="\n\n<h5>付费规则说明</h5>\n\n<ol>\n    <li>付费题库以包月的形式收费，每个题库单独计费，你需要在该题库独立的续费页面进行续费。</li>\n    <li>付费题库的包月按照自然月计算，例如题库过期后，在2013年5月15日帐号购买了3个月，那么你使用该题库的有效期将延长至2013年8月15日。</li>\n    <li>在有效期内，你的付费帐号可以在该题库产品的所有终端（包括但不限于网站、iPhone版、Android版）上使用。</li>\n</ol>\n"})},{"./../../util/Template":90}],42:[function(a,b){"use strict";var c=a("./BaseContent"),d=c.extend({className:"payment-tip-wrap",template:a("./PaymentTip.handlebars")});b.exports=d},{"./BaseContent":25,"./PaymentTip.handlebars":41}],43:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n    <h2>核心词汇</h2>\n    <dl>\n        ",d=c.each.call(a,a&&a.words,{hash:{},inverse:n.noop,fn:n.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n    </dl>\n    "}function g(a,b){var d,e="";return e+="\n        <dt>",(d=c.word)?d=d.call(a,{hash:{},data:b}):(d=a&&a.word,d=typeof d===l?d.call(a,{hash:{},data:b}):d),e+=m(d)+"</dt>\n        <dd>",(d=c.trans)?d=d.call(a,{hash:{},data:b}):(d=a&&a.trans,d=typeof d===l?d.call(a,{hash:{},data:b}):d),e+=m(d)+"</dd>\n        "}function h(a,b){var d,e="";return e+="\n    <h2>全文翻译</h2>\n    <div>",(d=c.trans)?d=d.call(a,{hash:{},data:b}):(d=a&&a.trans,d=typeof d===l?d.call(a,{hash:{},data:b}):d),(d||0===d)&&(e+=d),e+="</div>\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this;return k+='<html>\n<head>\n<meta http-equiv="content-type" content="text/html; charset=utf-8">\n<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">\n<title>材料浏览</title>\n<style type="text/css">\nbody {\n    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n    font-size: 14px;\n    line-height: 20px;\n    color: #333333;\n}\n</style>\n</head>\n<body>\n<div class="material-wrap">\n    <div class="material">\n        ',(i=c.content)?i=i.call(b,{hash:{},data:e}):(i=b&&b.content,i=typeof i===l?i.call(b,{hash:{},data:e}):i),(i||0===i)&&(k+=i),k+="\n    </div>\n    ",j=c["if"].call(b,(i=b&&b.words,null==i||i===!1?i:i.length),{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+="\n\n    ",j=c["if"].call(b,b&&b.trans,{hash:{},inverse:n.noop,fn:n.program(4,h,e),data:e}),(j||0===j)&&(k+=j),k+="\n</div>\n</body>\n</html>\n"})},{"./../../util/Template":90}],44:[function(a,b){"use strict";var c=a("../../../common/lib/jquery"),d={popup:function(b){var d={content:b.find(".material-content").html(),words:b.find(".trans-word").toArray().map(function(a){return{word:c(a).text(),trans:c(a).data("tip")}}),trans:b.find(".trans-content").text()},e=a("../content/PopupMaterial.handlebars"),f=e.render(d),g=window.open("","PopupMaterial","menubar=no,location=no,width=740,height=500,resizable=yes,scrollbars=yes,status=no");g.document.write(f)}};b.exports=d},{"../../../common/lib/jquery":67,"../content/PopupMaterial.handlebars":43}],45:[function(a,b){"use strict";var c=a("../../lib/backbone"),d=c.View.extend({events:{"click .question":"onSwitchClick","click .toggle":"onToggle"},expanded:!1,className:"question-sheet-wrap",initialize:function(){this.$el.removeClass("init");var b=a("../../util/ScrollUtil");b.on(this.onScroll,this),this.resetOffset(),this.shrink(),this.renderScroll()},resetOffset:function(){this.top=this.$el.parent().offset().top,this.bottom=this.$el.outerHeight(!0)+this.top},setAnswered:function(a,b){var c=this.$(".question[data-question-index="+a+"]");b?c.addClass("answered"):c.removeClass("answered")},setCollected:function(a,b){var c=this.$(".question:eq("+a+")");b?c.addClass("flagged"):c.removeClass("flagged")},shrink:function(){this.$el.css({marginBottom:-this.$el.height()}),this.$(".toggle .text").text("展开答题卡").siblings(".sprite").prop("className","sprite sprite-circle-up-arrow i-20"),this.trigger("shrink")},expand:function(){this.$el.css({marginBottom:-5}),this.$(".toggle .text").text("收起答题卡").siblings(".sprite").prop("className","sprite sprite-circle-down-arrow i-20"),this.trigger("expand")},renderScroll:function(b){return b?this.expanded?void(b.bottom>this.bottom?this.$el.removeClass("fixed"):this.$el.addClass("fixed")):void(b.bottom>=this.top?this.$el.removeClass("fixed"):this.$el.addClass("fixed")):void a("../../util/Rect").get(this.renderScroll.bind(this))},getExerciseableQuestionCount:function(){return this.$(".question:not(.text-question)").size()},getRemainQuestionCount:function(){return this.$(".question:not(.text-question):not(.answered)").size()},onSwitchClick:function(a){var b=this.$(a.currentTarget);this.trigger("switch",b.data("chapterIndex"),b.data("questionIndex"),b.data("correct"))},onToggle:function(a){a.preventDefault(),this.expanded=!this.expanded,this.expanded?this.expand():this.shrink()},onScroll:function(){this.renderScroll()}});b.exports=d},{"../../lib/backbone":66,"../../util/Rect":87,"../../util/ScrollUtil":89}],46:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n    <li data-name="',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===i?d.call(a,{hash:{},data:b}):d),e+=j(d)+'" data-id="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===i?d.call(a,{hash:{},data:b}):d),e+=j(d)+'" data-height="',(d=c.height)?d=d.call(a,{hash:{},data:b}):(d=a&&a.height,d=typeof d===i?d.call(a,{hash:{},data:b}):d),e+=j(d)+'">',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===i?d.call(a,{hash:{},data:b}):d),e+=j(d)+"</li>\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return g=c.each.call(b,b&&b.items,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n"})},{"./../../util/Template":90}],47:[function(a,b){"use strict";var c=a("../../../common/lib/backbone"),d=a("../../../common/lib/underscore"),e=c.View.extend({template:a("./SchoolSelect.handlebars"),className:"school-select",tagName:"ul",events:{"click li":"onChange"},render:function(){this.getSchools(this.options.parent?this.options.parent.id:0).done(function(a){this.options.parent&&2===this.options.parent.height&&a.push({id:-this.options.parent.id,name:"其他",parentId:this.options.parent.id,height:1}),this.el.innerHTML=this.template.render({items:a}),this.options.resetTrigger&&!this.options.school?this.$("li:first").click():this.options.school&&this.$("li[data-id="+this.options.school.id+"]").addClass("actived")}.bind(this))},getSchools:function(b){var c=a("../../../common/util/Command").execute("getSchoolList",{urlPattern:{courseSet:a("../../../common/util/PageData").get("courseSet").prefix}},{data:{parentId:b||0,type:this.options.schoolType||1}});return c.fail(function(b){a("../../../common/util/ExceptionUtil").alert(null,{xhr:b})}),c},reset:function(a){d.extend(this.options,a),this.render()},destroy:function(){this.$el.remove()},getValue:function(){var a=this.$(".actived");return{id:a.data("id"),name:a.text()}},onChange:function(a){this.$(a.currentTarget).addClass("actived").siblings(".actived").removeClass("actived"),this.trigger("submit",this.$(a.currentTarget).data(),this)}});b.exports=e},{"../../../common/lib/backbone":66,"../../../common/lib/underscore":72,"../../../common/util/Command":80,"../../../common/util/ExceptionUtil":83,"../../../common/util/PageData":86,"./SchoolSelect.handlebars":46}],48:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="start-exercise">\n    <div class="lead">',(f=c.title)?f=f.call(b,{hash:{},data:e}):(f=b&&b.title,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'，是否开始模考答题</div>\n    <div class="button-row text-center">\n        <span class="btn btn-paper btn-paper-xlarge submit">开始答题</span>\n        <br />\n        <span class="btn btn-paper btn-paper-xlarge btn-paper-gray cancel">取消本次答题</span>\n    </div>\n</div>\n'})},{"./../../util/Template":90}],49:[function(a,b){"use strict";var c=a("./BaseContent"),d=a("../../lib/underscore"),e=c.extend({className:"start-exercise-wrap",events:{"click .submit":"onSubmit","click .cancel":"onCancel"},template:a("./StartExercise.handlebars"),getRenderData:function(){var a={};return a.title=1===this.model.get("sheetType")?d.f("你选择了《{0}》",this.model.get("sheetName")):d.f("粉笔依据最新考试大纲为你生成了《{0}》",this.model.get("sheetName")),a},onSubmit:function(a){a.preventDefault(),this.container.hide(),this.trigger("submit")},onCancel:function(a){a.preventDefault(),this.container.hide(),this.trigger("cancel")}});b.exports=e},{"../../lib/underscore":72,"./BaseContent":25,"./StartExercise.handlebars":48}],50:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=c.extend({render:function(){this.el.innerHTML=this.options.content}});b.exports=d},{"../../../common/component/content/BaseContent":25}],51:[function(a,b){"use strict";var c=a("../../../lib/underscore"),d=a("../../../lib/jquery"),e={mixin:function(b){c.override(b,{initialize:function(){this.supr(),d(this.fixedHead.bind(this))},fixedHead:function(){var b=this.$(".exercise-hd .fixed-head");0!==b.size()&&b.each(function(b,c){function e(){0===g&&(g=f.offset().top),h.scrollTop()>g?f.addClass("fixed"):f.removeClass("fixed")}var f=this.$(c),g=f.offset().top,h=d(document),i=a("../../../util/ScrollUtil");i.on(e,this),e()}.bind(this))}})}};b.exports=e},{"../../../lib/jquery":67,"../../../lib/underscore":72,"../../../util/ScrollUtil":89}],52:[function(a,b){"use strict";var c=a("../../../lib/underscore"),d=a("../../../lib/jquery"),e=d(document),f={mixin:function(b){c.override(b,{offsetTop:null,render:function(){this.supr(),this.offsetTop=this.$el.offset().top,d(this.renderScroll.bind(this))},renderScroll:function(){var b=a("../../../util/ScrollUtil");b.on(this.onWindowScroll,this),this.onWindowScroll();var d=c.queryToObj(location.search),e=null;d.questionIndex?e=this.$("#question"+d.questionIndex):location.hash&&"#"!==location.hash&&(e=this.$(location.hash)),null!==e&&0!==e.size()&&b.to(e,{fix:this.$(".exercise-hd").height()})},scrollFix:function(){this.$el.addClass("fixed")},unscrollFix:function(){this.$el.removeClass("fixed")},onWindowScroll:function(){var a=e.scrollTop();a>this.offsetTop?this.scrollFix():this.unscrollFix()}})}};b.exports=f},{"../../../lib/jquery":67,"../../../lib/underscore":72,"../../../util/ScrollUtil":89}],53:[function(a,b){var c=a("./../../util/Template");b.exports=c.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<form class="form">\n    <div class="form-content"></div>\n    <div class="button-row"></div>\n</form>\n'})},{"./../../util/Template":90}],54:[function(a,b){"use strict";var c=a("../../../common/lib/backbone"),d=a("../../../common/lib/underscore"),e=a("../../../common/lib/jquery"),f=c.View.extend({className:"form-wrap",itemEvents:{change:"onItemChange",blur:"onItemBlur",touch:"onItemTouch"},events:{"submit form":"onSubmit"},items:[],formData:{},template:a("./BaseForm.handlebars"),initialize:function(){this.items=this.items.slice(),d.defaults(this.options,this.defaultOptions),this.id=d.prefix("form",this.cid),this.createItems(),this.getItem=d.memoize(this.getItem),this.setFormData(this.options.formData),this.mobile=this.$el.data("mobile")||!1
},destroy:function(){this.destroyItems(),this.$el.remove()},getRenderData:function(){return d.extend({},this.options,this.formData)},render:function(){this.items.forEach(function(a){a.$el.detach()}),this.template&&0===this.$el.children().size()&&(this.el.innerHTML=this.template.render(this.getRenderData()));var a=this.$(".form-content");this.items.forEach(function(b){b.render(),a.append(b.el)},this),setTimeout(function(){this.autoFocus()}.bind(this),25)},createItems:function(){var a=this.items;a.forEach(function(a,b){a=e.extend(!0,{},a,{options:{name:a.name,form:this,defaultValue:this.formData[a.name],id:d.prefix(this.id,a.name),validators:a.validators||[]}});var c=new a.type(a.options);d.onEvents(c,this.itemEvents,this),this.items[b]=c},this)},destroyItems:function(){this.items.forEach(function(a){d.offEvents(a,this.itemEvents,this),a.destroy()},this)},getVisibleItem:function(){return this.items},validate:function(){var a={isValid:!0,items:[]};return this.getVisibleItem().forEach(function(b){var c=b.validate();a.items.push({item:b,result:c}),!a.isValid||c.isNoValidator||c.isValid||(a.isValid=!1,a.firstErrorItem=b)},this),a},displayValidateMessage:function(a){a.items.forEach(function(a){a.item.displayValidateMessage(a.result,!0)},this)},clearValidateMessage:function(){d.invoke(this.items,"clearValidateMessage")},displayFormMessage:function(a,b,c){b=b||"";var d=this.$(".form-message").removeClass("success error").addClass(a);c?d.html(b):d.text(b)},clearFormMessage:function(){this.$(".form-message").removeClass("success error").empty()},focusError:function(a){a.isValid||a.firstErrorItem.focus()},focusNext:function(a){var b=this.items.indexOf(a);if(!(b>=this.items.length)){var c=this.items[b+1];c.focus()}},autoFocus:function(){var b=a("./item/Text"),c=d.filterFirst(this.items,function(a){return a instanceof b&&!a.options.isReadOnly&&a.isEmpty()})||this.items[0];c.focus()},setFormData:function(a){this.formData=d.extend({},this.formData,a),this.getVisibleItem().forEach(function(a){a.setValue(d.getValue(this.formData[a.name]))},this)},getFormData:function(){var a={};return this.getVisibleItem().forEach(function(b){a[b.name]=b.getValue()},this),a},getItem:function(a){return d.filterFirst(this.items,function(b){return b.name===a})},submitData:function(){},onItemChange:function(a){this.trigger("itemChange",a,this)},onItemBlur:function(a){this.trigger("itemBlur",a,this)},onItemTouch:function(a){this.trigger("itemTouch",a,this)},onSubmit:function(a){var b=this.validate();return this.displayValidateMessage(b),b.isValid?void this.submitData(a):(a.preventDefault(),void this.focusError(b))}});b.exports=f},{"../../../common/lib/backbone":66,"../../../common/lib/jquery":67,"../../../common/lib/underscore":72,"./BaseForm.handlebars":53,"./item/Text":57}],55:[function(a,b){"use strict";var c=a("../../../../common/lib/backbone"),d=a("../../../../common/lib/underscore"),e=a("../../../../common/lib/jquery"),f=null,g=c.View.extend({className:"item-wrap",defaultOptions:null,formEvents:null,initialize:function(){d.defaults(this.options,this.defaultOptions),d.extend(this,d.pick(this.options,"name","form","validators")),d.onEvents(this.form,this.formEvents,this),this.validators=this.validators.map(function(a){return new a.type(a.options)})},destroy:function(){d.offEvents(this.form,this.formEvents,this),this.$el.remove()},getElementFromFrom:function(){var a=this.form.$el.attr("id");if(!a)return null;a=d.camelString(a,this.options.name);var b=this.form.$("#"+a);return 0===b.size()?null:b},getRenderData:function(){var b=a("../validator/Required"),c=this.getValue();return e.extend(!0,{},this.options,{value:this.isTouched?c:this.options.defaultValue,isDefaultValue:this.isTouched,isRequired:this.validators.some(function(a){return a instanceof b}),inputId:this.id+"Input"})},render:function(){this.isTouched=!1;var b=this.getElementFromFrom();if(b&&b.get(0)!==this.$el.get(0)?(this.$el.html(b.html()),this.$el.attr("class",b.attr("class")),this.$el.attr("id",b.attr("id")),b.replaceWith(this.$el)):this.template&&(this.el.innerHTML=this.template.render(this.getRenderData())),0!==this.$el.filter(":visible").size()){var c=a("../../../../common/lib/placeholder");c.polyfill(this.el)}},getInfo:function(){return this.options.info},setValue:function(a){this.options.defaultValue=a},getValue:function(){return this.options.defaultValue},getDefault:function(){return this.options.defaultValue},isEmpty:function(){return!this.options.defaultValue},focus:function(){this.$("input").focus()},setReadOnly:function(a){this.options.isReadOnly=a},validate:function(){if(!this.validators||0===this.validators.length||this.options.isReadOnly)return{isNoValidator:!0};var a=null;return this.validators.some(function(b){return a=b.validate(this,this.form),Boolean(a.error)},this),a.isValid=void 0===a.error,a.checkValue=this.getValue(),a},displayValidateMessage:function(a,b){a=a||{},a.asyncRequest?a.loading=a.loading||!0:a.isValid&&(a.success=a.success||!0);var c=this.$el.find(".item-message"),d=null,e=null;["info","success","error","loading"].forEach(function(b){a[b]?(this.$el.addClass(b),e=b,d=a[b]===!0?"":a[b]):this.$el.removeClass(b)},this),null===d&&this.getInfo()&&(d=this.getInfo(),e="info",this.$el.addClass("info")),d?this.form.mobile?"error"===e&&!f&&b&&(f=!0,setTimeout(function(){f=!1},100),window.alert(d)):(d=d.replace(/\{value\}/g,a.checkValue),a.isHtmlMessage?c.html(d):c.text(d),c.prepend('<i class="icon-'+e+'"></i>')):c.empty(),a.asyncRequest&&a.asyncRequest.always(function(a){var c=this.getValue();a.checkValue===c&&this.displayValidateMessage(a,b)}.bind(this))},clearValidateMessage:function(){this.displayValidateMessage(null)},show:function(){if(this.$el.show(),0!==this.$el.filter(":visible").size()){var b=a("../../../../common/lib/placeholder");b.polyfill(this.el)}},hide:function(){this.$el.hide()},onChange:function(a){-1!==this.el.className.indexOf("error")&&this.clearValidateMessage(),this.trigger("change",this,a)},onFocus:function(){},onBlur:function(a){this.getValue()!==this.getDefault()&&(this.isTouched=!0),this.isTouched&&this.displayValidateMessage(this.validate()),this.trigger("blur",this,a)}});b.exports=g},{"../../../../common/lib/backbone":66,"../../../../common/lib/jquery":67,"../../../../common/lib/placeholder":69,"../../../../common/lib/underscore":72,"../validator/Required":60}],56:[function(a,b){var c=a("./../../../util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='<label for="',(d=c.inputId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.inputId,d=typeof d===q?d.call(a,{hash:{},data:b}):d),e+=r(d)+'">',(d=c.label)?d=d.call(a,{hash:{},data:b}):(d=a&&a.label,d=typeof d===q?d.call(a,{hash:{},data:b}):d),e+=r(d)+":</label>"}function g(){return" hide"}function h(){return" uneditable-input"}function i(){return'autocomplete="off"'}function j(){return"disabled"}function k(a,b){var d,e="";return e+='\n<span class="read-only">',(d=c.value)?d=d.call(a,{hash:{},data:b}):(d=a&&a.value,d=typeof d===q?d.call(a,{hash:{},data:b}):d),e+=r(d)+"</span>\n"}function l(){return'<span class="item-optional">(可选)</span>'}function m(){return" info"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var n,o,p="",q="function",r=this.escapeExpression,s=this,t=c.blockHelperMissing;return n=c["if"].call(b,b&&b.label,{hash:{},inverse:s.noop,fn:s.program(1,f,e),data:e}),(n||0===n)&&(p+=n),p+='\n\n<span class="text-wrap',n=c["if"].call(b,b&&b.isReadOnly,{hash:{},inverse:s.noop,fn:s.program(3,g,e),data:e}),(n||0===n)&&(p+=n),p+='">\n    <input id="',(n=c.inputId)?n=n.call(b,{hash:{},data:e}):(n=b&&b.inputId,n=typeof n===q?n.call(b,{hash:{},data:e}):n),p+=r(n)+'" name="',(n=c.name)?n=n.call(b,{hash:{},data:e}):(n=b&&b.name,n=typeof n===q?n.call(b,{hash:{},data:e}):n),p+=r(n)+'" type="',(n=c.type)?n=n.call(b,{hash:{},data:e}):(n=b&&b.type,n=typeof n===q?n.call(b,{hash:{},data:e}):n),p+=r(n)+'"\n        class="',n=c["if"].call(b,b&&b.isReadOnly,{hash:{},inverse:s.noop,fn:s.program(5,h,e),data:e}),(n||0===n)&&(p+=n),p+='"\n        placeholder="',(n=c.placeholder)?n=n.call(b,{hash:{},data:e}):(n=b&&b.placeholder,n=typeof n===q?n.call(b,{hash:{},data:e}):n),p+=r(n)+'" autocomplete="',(n=c.autocomplete)?n=n.call(b,{hash:{},data:e}):(n=b&&b.autocomplete,n=typeof n===q?n.call(b,{hash:{},data:e}):n),p+=r(n)+'"\n        value="',(n=c.value)?n=n.call(b,{hash:{},data:e}):(n=b&&b.value,n=typeof n===q?n.call(b,{hash:{},data:e}):n),p+=r(n)+'" maxlength="',(n=c.maxLength)?n=n.call(b,{hash:{},data:e}):(n=b&&b.maxLength,n=typeof n===q?n.call(b,{hash:{},data:e}):n),p+=r(n)+'"\n        ',n=c["if"].call(b,b&&b.noAutocomplete,{hash:{},inverse:s.noop,fn:s.program(7,i,e),data:e}),(n||0===n)&&(p+=n),p+="\n        ",n=c["if"].call(b,b&&b.isReadOnly,{hash:{},inverse:s.noop,fn:s.program(9,j,e),data:e}),(n||0===n)&&(p+=n),p+="\n    />\n</span>\n\n",n=c["if"].call(b,b&&b.isReadOnly,{hash:{},inverse:s.noop,fn:s.program(11,k,e),data:e}),(n||0===n)&&(p+=n),p+="\n\n",n=c.unless.call(b,b&&b.isRequired,{hash:{},inverse:s.noop,fn:s.program(13,l,e),data:e}),(n||0===n)&&(p+=n),p+='\n\n<span class="item-message help-inline',o={hash:{},inverse:s.noop,fn:s.program(15,m,e),data:e},(n=c.info)?n=n.call(b,o):(n=b&&b.info,n=typeof n===q?n.call(b,o):n),c.info||(n=t.call(b,n,o)),(n||0===n)&&(p+=n),p+='">',(n=c.info)?n=n.call(b,{hash:{},data:e}):(n=b&&b.info,n=typeof n===q?n.call(b,{hash:{},data:e}):n),p+=r(n)+"</span>\n"})},{"./../../../util/Template":90}],57:[function(a,b){"use strict";var c=a("../../../../common/lib/underscore"),d=a("./BaseItem"),e=d.extend({className:d.prototype.className+" text-item-wrap",events:c.defaults({"focus input":"onFocus","blur input":"onBlur","change input":"onChange","keyup input":"onKeyup"},d.prototype.events),template:a("./Text.handlebars"),defaultOptions:{type:"text"},setValue:function(){d.prototype.setValue.apply(this,arguments),this.options.defaultValue||(this.options.defaultValue=""),this.$("input").val(this.options.defaultValue)},getValue:function(){return this.$("input").val()||""},isEmpty:function(){return!this.getValue()},setReadOnly:function(){d.prototype.setReadOnly.apply(this,arguments),this.$("input").prop("disabled",this.options.isReadOnly)},setName:function(a){this.$("input").attr("name",a)},onKeyup:function(b){var c=a("../../../util/KeyCode"),d=[c.UP_ARROW,c.RIGHT_ARROW,c.DOWN_ARROW,c.LEFT_ARROW,c.SHIFT,c.ALT,c.TAB,c.ESC,c.ENTER];b.which&&-1!==d.indexOf(b.which)||this.onChange(b)},onBlur:function(){d.prototype.onBlur.apply(this,arguments),this.$(".text-wrap").removeClass("focus")},onFocus:function(){d.prototype.onFocus.apply(this,arguments),this.$(".text-wrap").addClass("focus")}});b.exports=e},{"../../../../common/lib/underscore":72,"../../../util/KeyCode":84,"./BaseItem":55,"./Text.handlebars":56}],58:[function(a,b){"use strict";var c=function(a){this.options=a||{}};c.prototype.validate=function(a){var b={isValid:!1},c=a.getValue();return c.length<this.options.min?b.error=this.options.minError:c.length>this.options.max?b.error=this.options.maxError:b.isValid=!0,b},b.exports=c},{}],59:[function(a,b){"use strict";var c=function(a){this.options=a||{}};c.prototype.validate=function(b){var c=a("../../../util/Regex"),d={isValid:!1},e=b.getValue();return e&&!c.test(this.options.regex,e)?d.error=this.options.error:d.isValid=!0,d},b.exports=c},{"../../../util/Regex":88}],60:[function(a,b){"use strict";var c=function(a){this.options=a||{}};c.prototype.validate=function(a){var b={isValid:!1};return a.isEmpty()?b.error=this.options.error:b.isValid=!0,b},b.exports=c},{}],61:[function(a,b){"use strict";var c=a("../../lib/backbone"),d=a("../../model/AnswerModel"),e=a("../../lib/underscore"),f="active",g=c.View.extend({events:{"click .answers .answer":"onAnswerClick","click .flag, .cancel-flag":"onMarkedClick","mouseenter .question-wrap .answer":"onAnswerEnter","mouseleave .question-wrap .answer":"onAnswerLeave"},modelEvents:{"change:value":"onValueChange"},lastAction:null,initialize:function(){var a=this.$el.data("id"),b=this.$el.data("questionIndex");this.model=new d(e.defaults({questionId:a,questionIndex:b},this.$el.data("userAnswer"))),e.onEvents(this.model,this.modelEvents,this),this.exercise=this.options.exercise},destroy:function(){e.offEvents(this.model,this.modelEvents,this),this.$el.remove()},renderAnswer:function(){var a=this.model.getValue();this.$(".answer").toArray().forEach(function(b,c){-1===a.indexOf(c)?this.$(b).removeClass(f):this.$(b).addClass(f)},this)},toggleAnswer:function(a){var b=!this.model.isEmpty(),c=a.index(),d=this.model.getValue();-1!==d.indexOf(c)?d=e.without(d,c):this.$el.data("isMultiple")?d.push(c):d=[c],d=d.sort();var f=d.join(","),g={value:f,overtime:-1===[1,2,7].indexOf(this.exercise.get("sheetType"))?!1:this.exercise.get("sheetTime")-this.exercise.get("elapsedTime")<0,time:(this.model.get("time")||0)+Math.round((Date.now()-this.exercise.get("lastActionTime"))/1e3)};this.lastAction=b&&!f?"remove":!b&&f?"create":"change",this.model.set(g),this.trigger("change:answer",this,this.model)},collect:function(){this.$el.data("marked",!0),this.$(".cancel-flag").show(),this.$(".flag").hide(),a("../../util/Command").execute("collect",{urlPattern:{questionId:this.model.id}})},uncollect:function(){this.$el.data("marked",!1),this.$(".cancel-flag").hide(),this.$(".flag").show(),a("../../util/Command").execute("uncollect",{urlPattern:{questionId:this.model.id}})},isCollected:function(){return this.$el.data("collected")},toggleMarked:function(){var a=this.isCollected();this.$el.data("collected",!a),a?this.uncollect():this.collect(),this.trigger("change:collect",this,this.model)},onMarkedClick:function(a){var b=this.$(a.currentTarget).closest(".question-wrap");this.toggleMarked(b)},onAnswerClick:function(a){a.preventDefault();var b=this.$(a.currentTarget);this.toggleAnswer(b)},onAnswerEnter:function(a){var b=this.$(a.currentTarget),c=b.index();this.$(".option").eq(c).addClass("mouseon")},onAnswerLeave:function(a){var b=this.$(a.currentTarget),c=b.index();this.$(".option").eq(c).removeClass("mouseon")},onValueChange:function(){this.renderAnswer()}});b.exports=g},{"../../lib/backbone":66,"../../lib/underscore":72,"../../model/AnswerModel":73,"../../util/Command":80}],62:[function(a,b){"use strict";var c={getMessage:function(){return"笔记内容超出长度"}};b.exports=c},{}],63:[function(a,b){"use strict";var c={getCourseSetList:{options:{url:"/napi/course-sets/html",type:"get",dataType:"html",cache:!1}},address:{options:{url:"/napi/address",type:"get"}}};b.exports=c},{}],64:[function(a,b){"use strict";b.exports=window.Handlebars},{}],65:[function(a,b){"use strict";function c(a){return parseFloat(a,10)||0}function d(a){return i(a)[0]}function e(a){a=d(a)||{},a.nodeType&&(a={element:a});var b=d(a.element)||j;if(1!==b.nodeType)throw new Error("posObject.element is invalid.");var c={element:b,x:a.x||0,y:a.y||0},e=b===j||"VIEWPORT"===b._id;return c.offset=function(){var a=null;return a=k?{left:0,top:0}:e?{left:i(document).scrollLeft(),top:i(document).scrollTop()}:i(b).offset()},c.size=function(){var a=i(e?window:b);return{width:a.outerWidth(),height:a.outerHeight()}},c}function f(a,b,d){if(a=String(a),a=a.replace(/px/gi,""),/\D/.test(a)&&(a=a.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),-1!==a.indexOf("%")&&(a=a.replace(/(\d+(\.?\d+)?)%/gi,function(a,c){return b.size()[d]*(c/100)})),/[+\-*\/]/.test(a))try{a=new Function("return "+a)()}catch(e){throw new Error("Invalid position value: "+a)}return c(a)}function g(a){a.x=f(a.x,a,"width"),a.y=f(a.y,a,"height")}function h(a){var b=a.offsetParent();b[0]===document.documentElement&&(b=i(document.body)),l&&b.css("zoom",1);var d=b[0]===document.body?{left:0,top:0}:b.offset();return d.top+=c(b.css("border-top-width")),d.left+=c(b.css("border-left-width")),d}var i=a("./jquery"),j={_id:"VIEWPORT",nodeType:1},k=!1,l=i.browser.msie&&6===i.browser.version,m={};m.getPinOffset=function(a,b){a=e(a),b=e(b);var c=i(a.element);"fixed"!==c.css("position")||l?(c.css("position","absolute"),k=!1):k=!0,g(a),g(b);var d=h(c),f=b.offset(),j=f.top+b.y-a.y-d.top,m=f.left+b.x-a.x-d.left;return{left:m,top:j}},m.centerOffset=function(a,b){return m.getPinOffset({element:a,x:"50%",y:"50%"},{element:b,x:"50%",y:"50%"})},m.VIEWPORT=j,b.exports=m},{"./jquery":67}],66:[function(a,b){"use strict";var c=window.Backbone,d=a("../lib/underscore");c.sync=function(a,b,c){c=c||{};var e=b.command(a,c);if(!e)throw new Error('A "commands" property or function must be specified');return c.data||!b||"create"!==a&&"update"!==a||(c=d.defaults({contentType:"application/json; charset=UTF-8",data:JSON.stringify(e.filterRequestJSON(b.toJSON()))},c)),e.execute(c)},b.exports=c.noConflict()},{"../lib/underscore":72}],67:[function(a,b){"use strict";var c=window.jQuery;c.delay=function(a){return c.Deferred(function(b){setTimeout(function(){b.resolve()},a)})},b.exports=c.noConflict()},{}],68:[function(a,b){"use strict";b.exports=window.moment},{}],69:[function(a,b){"use strict";var c=a("../lib/jquery"),d={polyfill:function(a){c(a).find("input[placeholder], textarea[placeholder]").andSelf().filter("[placeholder]").placeholder()}};b.exports=d},{"../lib/jquery":67}],70:[function(a,b){"use strict";b.exports=window.Raphael},{}],71:[function(a,b){"use strict";b.exports=window.swfobject},{}],72:[function(a,b){"use strict";var c=window._;c.singleton=function(a){var b=null;return{getInstance:function(){return null===b&&(b=new a),b},extend:function(){return a.extend.apply(a,arguments)},getPrototype:function(){return a.prototype}}},c.singletonModel=function(a){var b={},d=function(d,e){d=d||{};var f=d[a.prototype.idAttribute];return f&&b[f]?(e=c.defaults({silent:!1},e),b[f].set(d,e),b[f]):(f&&(b[f]=this),void a.call(this,d,e))};c.extend(d,a),d.prototype=a.prototype;var e=a.prototype.set;return d.prototype.set=function(){var a=e.apply(this,arguments);return b[this.id]=this,a},d.prototype.singletonConstructor=d,d},c.override=function(a,b){Object.keys(b).forEach(function(d){var e=b[d];if(!c.isFunction(e))return void(a.prototype[d]=c.defaults({},e,a.prototype[d]));var f=a.prototype[d]||function(){};a.prototype[d]=function(){var a=this.supr,b=arguments,c=this;this.supr=function(){return f.apply(c,b)};var d=e.apply(this,arguments);return this.supr=a,d}})},c.delayDo=function(a,b){var d=Date.now();return function(){var e=b-(Date.now()-d);if(0>e)return a.apply(this,arguments);var f=c.toArray(arguments);setTimeout(function(){return a.apply(this,f)}.bind(this),e)}},c.toNumberIfIsNumber=function(a){return"string"==typeof a&&String(parseInt(a,10))===a?parseInt(a,10):a},c.smartType=function(a){return"true"===a?!0:"false"===a?!1:c.toNumberIfIsNumber(a)},c.queryToObj=function(a){return a=(a||"").replace(/^[\?#]/,""),a.split("&").reduce(function(a,b){return b=b.split("=").map(decodeURIComponent),b[0]&&(a[b[0]]=c.smartType(b[1])),a},{})},c.objToQuery=function(a){var b=Object.keys(a).filter(function(a){return a?!0:!1});return a=b.map(function(b){return[b,a[b]].map(encodeURIComponent).join("=")}).join("&")},c.getCurrentUrl=function(){return location.pathname+location.search},c.resolveUrl=function(){var a=c.toArray(arguments),b=c.last(a),d=c.initial(a).join("/").replace(/\/\//g,"/");d=d.replace("/?","?"),d.lastIndexOf("/")===d.length-1&&(d=d.substr(0,d.length-1)),c.isObject(b)||(b=c.queryToObj(b));var e=d.indexOf("?");if(-1!==e){var f=d.substring(e+1,d.length);d=d.substring(0,e),f.length>0&&(f=c.queryToObj(f),c.defaults(b,f))}return b=c.objToQuery(b),b.length>0&&(d=d+"?"+b),d},c.filterFirst=function(a,b){var c=null;return a.some(function(a){return b(a)?(c=a,!0):!1}),c},c.filterFirstMap=function(a,b){var c=null;return a.some(function(a){var d=b(a);return d?(c=d,!0):!1}),c},c.getValue=function(a,b){return"function"==typeof a?a.call(b):a},c.prefix=function(){var a=c.toArray(arguments);return a[0]+c.rest(a).reduce(function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},"")},c.onEvents=function(a,b,c){b&&(c=c||a,Object.keys(b).forEach(function(d){a.on(d,c[b[d]],c)}))},c.offEvents=function(a,b,d){b&&(d=d||a,Object.keys(b).forEach(function(b){a.off(b,d[c.prefix("on",b)],d)}))},c.f=c.format=function(){var a=c.toArray(arguments);return a.shift().replace(/\{(\d+)\}/g,function(b,c){return a[c]})},c.camelString=function(a){return c.rest(c.toArray(arguments)).reduce(function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},a)},c.fib=c.memoize(function(a){return 0===a||1===a?1:c.fib(a-1)+c.fib(a-2)}),b.exports=c},{}],73:[function(a,b){"use strict";var c=a("../lib/backbone"),d=a("../lib/underscore"),e=c.Model.extend({idAttribute:"questionId",set:function(a,b,e){var f=null;if(d.isObject(a)?(f=a,e=b):(f={},f[a]=b),void 0!==f.overtime){var g=this.get("flag")||0;f.flag=-3&g|(f.overtime?1:0)<<1,delete f.overtime}return c.Model.prototype.set.call(this,f,e)},isEmpty:function(){return!this.get("value")},getValue:function(){return(this.get("value")||"").split(",").map(function(a){return parseInt(a,10)}).filter(function(a){return!isNaN(a)})}});b.exports=e},{"../lib/backbone":66,"../lib/underscore":72}],74:[function(a,b){"use strict";var c=a("../../common/lib/backbone"),d=c.Model.extend({commands:{update:"updateExercise"},command:function(b,c){var d=this.commands[b];return a("../util/Command").create(d,{urlPattern:{exerciseId:this.id}},c)}});b.exports=d},{"../../common/lib/backbone":66,"../util/Command":80}],75:[function(a,b){"use strict";var c=a("../../common/lib/backbone"),d=c.Router.extend({_extractParameters:function(b,c){var d=a("../../common/lib/underscore"),e=c.substr(c.indexOf("?")),f=c.substr(0,c.indexOf("?")),g=d.extend(d.queryToObj(location.search),d.queryToObj(e));return[{path:f,search:e,fragment:c,parameters:g}]}});b.exports=d},{"../../common/lib/backbone":66,"../../common/lib/underscore":72}],76:[function(a,b){"use strict";var c=a("./BaseRouter"),d=c.extend({initialize:function(){var b=a("../../common/lib/jquery"),c=a("../component/assembly/PayConfirm"),d=b(".pay-price"),e=b(".pay-duration"),f=b(".product"),g=b("body").find("input[name=productId]"),h=b("body").find("input[name=quantity]"),i=b(".bank-panel"),j=b(".pay-expire-time"),k=null;f.on("click",function(c){c.preventDefault(),i.removeClass("hide");var k=a("../../common/util/ScrollUtil");k.to(i,{duration:200}),f.removeClass("active");var l=b(c.currentTarget),m=l.data();d.text(m.price+" 元"),e.text(m.duration),l.addClass("active");var n=a("../lib/moment"),o=n(Math.max(Date.now(),j.data("expireTime"))).add("months",m.duration).format("YYYY年MM月DD日");j.text(o),g.val(m.id),h.val(m.quantity||1)});var l=b(".submit-button");b("body").find("input[type=radio]").click(function(){l.attr("disabled",!1)}),b("form").on("submit",function(){k||(k=new c,k.reset()),setTimeout(function(){k.show()},300)});var m=b(".payment-tip");m.on("mouseover click",function(a){this.showTip(a.currentTarget)}.bind(this)),m.data("first")&&this.showTip(m.get(0))},showTip:function(b){var c=a("../component/assembly/PaymentTip"),d=new c;d.reset(),d.show(b)}});b.exports=d},{"../../common/lib/jquery":67,"../../common/util/ScrollUtil":89,"../component/assembly/PayConfirm":8,"../component/assembly/PaymentTip":9,"../lib/moment":68,"./BaseRouter":75}],77:[function(a,b){"use strict";var c=a("../lib/jquery"),d={hideTimer:null,$menu:null,run:function(){var b=c(".course-menu-trigger");b.on("mouseenter click",function(b){if(clearTimeout(d.hideTimer),d.hideTimer=null,"click"===b.type&&b.preventDefault(),d.$menu)return void d.$menu.show();var c={},e=a("../util/PageData").get("courseSet");e&&(c.courseSet=e.prefix);var f=a("../util/Command").execute("getCourseSetList",null,{data:c});f.done(d.onFetchSuccess)}),b.on("mouseleave",d.onHide)},onHide:function(){d.hideTimer=setTimeout(function(){d.$menu&&d.$menu.hide()},50)},onFetchSuccess:function(a){d.$menu=c(a),d.$menu.insertBefore(".header"),d.$menu.on("mouseenter mousemove",function(){clearTimeout(d.hideTimer)}),d.$menu.on("mouseleave",d.onHide)}};b.exports=d},{"../lib/jquery":67,"../util/Command":80,"../util/PageData":86}],78:[function(a,b){"use strict";var c=a("../lib/jquery"),d={run:function(){c(document.body).on("mouseenter",".pinned-tip",function(b){var d=c(b.currentTarget),e=a("../component/assembly/Tooltip"),f=new e({direction:d.data("direction")||["top","bottom","left","right"],contentOptions:{content:d.data("tip")},tipClass:d.data("class")});f.reset(),f.show(d)})}};b.exports=d},{"../component/assembly/Tooltip":11,"../lib/jquery":67}],79:[function(a,b){"use strict";var c=a("../lib/jquery"),d=a("../lib/underscore"),e=a("../lib/swfobject"),f="11.1",g=function(a,b){var d=document.createElement("div");d.id="audioPlayer",document.body.appendChild(d);var g={development:"http://ytk1.fenbi.ws/sc/audio/audioPlayer_fenbi.swf",test:"http://ytk1.fenbi.ws/sc/audio/audioPlayer_fenbi.swf",ytk:"http://ytk1.fenbi.ws/sc/audio/audioPlayer_fenbi.swf",ytk1:"http://ytk1.fenbi.ws/sc/audio/audioPlayer_fenbi.swf",ape:"http://ytk.fbcontent.cn/sc/audio/audioPlayer_fenbi.swf",production:"http://ytk.fbcontent.cn/sc/audio/audioPlayer_fenbi.swf"}[c("body").data("environment")],h={namespace:b},i={allowScriptAccess:"always"},j={name:"audioPlayer"};e.embedSWF(g,"audioPlayer","0","0",f,"",h,i,j,a)},h=function(){return e.hasFlashPlayerVersion(f)?!0:!1},i="audioPlayer",j=function(){h()&&(g(function(a){this.flash=a.ref}.bind(this),i),window[i]={},window[i].onPosition=this.onPosition.bind(this),window[i].onComplete=this.onComplete.bind(this),window[i].onManifest=this.onManifest.bind(this))};d.extend(j.prototype,{currentPlayer:null,tip:null,registryPlayer:function(a){a.on("load",this.onPlayerLoad,this),a.hasTip()&&this.setPlayerTip(a)},gotoDownloadFlash:function(){a("../util/Message").alert({content:'<p>你的电脑未安装Flash Player或者版本过低</p><p>建议去官方网站 <a target="_blank" href="http://get.adobe.com/cn/flashplayer/">http://get.adobe.com/cn/flashplayer/</a> 下载或升级</p>',title:"flash加载失败"})},setPlayerTip:function(b){if(this.tip)b.setTip(this.tip);else{var c=a("../util/Command").execute("getAudioTip",{},{});c.fail(function(b){a("../util/ExceptionUtil").alert(null,{xhr:b})}),c.done(function(a){this.tip=a.content,b.setTip(this.tip)}.bind(this))}},flashPlay:function(){this.flash.playerSeek(this.currentPlayer.playPosition||0),this.currentPlayer.setStatePlay()},onPlayerLoad:function(a){return h()?void(this.flash&&(this.onPlayerPlay(a,0),a.on("play",this.onPlayerPlay,this),a.on("seek",this.onPlayerSeek,this),a.on("stop",this.onPlayerStop,this),a.off("load",this.onPlayerLoad,this))):void this.gotoDownloadFlash()},onPlayerPlay:function(a){this.currentPlayer&&this.currentPlayer!==a&&(this.currentPlayer.setStateStop(),this.currentPlayer=null),this.currentPlayer!==a?(this.currentPlayer=a,this.flash.playerLoad(a.getPlayerUrl())):(this.flash.playerResume(),this.currentPlayer.setStatePlay())},onPlayerStop:function(a){this.currentPlayer&&this.currentPlayer===a&&(this.currentPlayer.setStateStop(),this.flash.playerPause())},onPlayerSeek:function(a,b){this.currentPlayer===a?this.flash.playerSeek(b):(this.onPlayerStop(this.currentPlayer),a.setPosition(b,0))},onPosition:function(a){this.currentPlayer&&this.currentPlayer.setPosition(a,this.flash.getBufferLength())},onComplete:function(){this.currentPlayer&&(this.currentPlayer.setStateStop(),this.currentPlayer.setPosition(0),this.currentPlayer=null)},onManifest:function(a){this.currentPlayer.onLoad({duration:a}),this.flashPlay()}}),b.exports=d.singleton(j)},{"../lib/jquery":67,"../lib/swfobject":71,"../lib/underscore":72,"../util/Command":80,"../util/ExceptionUtil":83,"../util/Message":85}],80:[function(a,b){"use strict";var c=a("../lib/jquery"),d=a("../lib/underscore"),e=a("../lib/backbone"),f=a("../global/CommandConfig"),g=function(a,b,c){this.name=a,this.config=b,this.options=c},h=/\{(\S+?)\}/g;d.extend(g.prototype,e.Events,{execute:function(a){a=this.getJQueryOptions(a),a.url=this.replacePlaceholder(a.url,a.data,this.config.urlPattern);var b=a.success,d=this.config;return a.success=function(a,c,e){d.responseKeys&&(a=g.filterKeys(a,d.responseKeys)),b&&b.call(this,a,c,e)},c.ajax(a)},filterRequestJSON:function(a){return this.config.requestKeys?g.filterKeys(a,this.config.requestKeys):a},replacePlaceholder:function(b,c,e){var f=a("./PageData"),g=f.get("course");g&&(e=d.extend({course:g.prefix},e));var i=f.get("courseSet");return i&&(e=d.extend({courseSet:i.prefix},e)),b=b.replace(h,function(a,b){var d="";return e&&e.hasOwnProperty(b)?d=e[b]:c&&c[b]&&(d=c[b],delete c[b]),d}),b.replace(/\/\//g,"/")},getJQueryOptions:function(a){return d.extend({type:"GET",dataType:"JSON"},this.options,a)},filterJSON:function(a,b){var c=null;return c="request"===b?this.config.requestKeys:this.config.responseKeys,c?g.filterKeys(a,c):a}}),g.filterKeys=function(a,b){var c={};return b.forEach(function(b){var d,e=a,f=c,g=b.split(".");for(d=0;d<g.length&&void 0!==e[g[d]];d++){var h=g[d];f[h]=d===g.length-1?e[h]:f[h]||{},e=e[h],f=f[h]}}),c},g.create=function(a,b,d){var e=f[a];if(!e)throw new Error("Invalid command name: "+a);var h=c.extend(!0,{},e,b,{options:d}),i=c.extend(!0,{},h.options,d);return delete h.options,new g(a,h,i)},g.execute=function(a,b,c){return g.create(a,b,c).execute()},d.extend(g,e.Events),b.exports=g},{"../global/CommandConfig":63,"../lib/backbone":66,"../lib/jquery":67,"../lib/underscore":72,"./PageData":86}],81:[function(a,b){"use strict";var c=341856e5,d=864e5,e=a("../lib/underscore"),f={monthDays:[31,28,31,30,31,30,31,31,30,31,30,31],dateLocale:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],weekMin:"周"},formatTimestamp:function(a,b){var c=new Date(a),d=c.getMinutes();10>d&&(d="0"+d);var e=c.getFullYear(),f=c.getMonth()+1,g=c.getDate();f=10>f?"0"+f:f,g=10>g?"0"+g:g;var h=e+"年"+f+"月"+g+"日";return b&&b.isWithTime&&(h+=" "+c.getHours()+":"+d),h},yummyTimestamp:function(a){function b(a){return 10>a?"0"+a:a}c>a&&(a*=1e3);var e=Date.now(),f=Math.round((e-a)/1e3);if(10>=f)return"刚刚";if(60>=f)return f+" 秒前";var g=Math.round(f/60);if(60>g)return g+" 分钟前";var h=new Date(a),i=new Date(e),j=new Date(i.getFullYear(),i.getMonth(),i.getDate()),k=i.getTime()-j.getTime(),l=b(h.getHours()),m=b(h.getMinutes());if(k>e-a)return"今天 "+l+":"+m;if(j.getTime()-a<d)return"昨天 "+l+":"+m;var n=h.getMonth()+1,o=h.getDate();return h.getFullYear()===i.getFullYear()?n+"-"+o+" "+l+":"+m:h.getFullYear()+"-"+n+"-"+o+" "+l+":"+m},getTimestamp:function(a,b,c){var d=new Date(a,b,c,0,0,0).getTime();return parseInt(d/1e3,10)},getTimestampByFormatString:function(a){if(!e.isString(a))throw"INVALID_TYPE";var b=a.split("-").map(function(a,b){var c=parseInt(a,10);return 1===b&&(c-=1),c});return new Date(b[0],b[1],b[2])},getDateRange:function(a,b){a=a||null;var c=new Date(a),d=c.getFullYear(),f=c.getMonth()+1,g=c.getDate(),h=b?new Date(2012,0,1):new Date,i=h.getFullYear(),j=h.getDate(),k=h.getMonth()+1,l=i,m=d>i?0:k,n=this.monthDays[f-1],o=d%4===0&&(d%100>0||d%400),p=d>i||f>k?1:j;2===f&&o&&(n=29);var q={range:e.range(2012,i+10).map(function(a){return{year:a,isCurrent:a===d,isDisable:l>a||a===l&&12===f&&g===n}})},r={range:e.range(1,13).map(function(a){return{month:a,isCurrent:a===f,isDisable:m>a||a===m&&g===n}})},s={range:e.range(1,n+1).map(function(a){return{day:a,isCurrent:a===g,isDisable:p>a}})};return{years:q,months:r,days:s}},getTimeFromHHMM:function(a,b){var c=/^(\d{1,2})[:：](\d{1,2})$/g,d=c.exec(a);if(!d||3!==d.length)return null;var e=parseInt(d[1],10);if(isNaN(e)||0>e||e>24)return null;var f=parseInt(d[2],10);if(isNaN(f)||0>f||f>59)return null;var g=new Date(1970,0,1,e,f).getTime();return b&&(g-=new Date(1970,0,1).getTime()),g},getHHMMFromTime:function(a){var b=new Date(a),c=b.getHours(),d=b.getMinutes();return 10>c&&(c="0"+c),10>d&&(d="0"+d),c+":"+d},formatElapsedTime:function(a){var b=0>a;a=Math.abs(a);var c=Math.floor(a/3600),d=60*c+Math.floor(a%3600/60);a%=60;var e=[];return e.push(d),e.push(a),e=e.map(function(a){return 10>a?"0"+a:a
}),(b?"-":"")+e.join(":")},isSameDay:function(a,b){var c=new Date(a),d=new Date(b);return c.getFullYear()===d.getFullYear()&&c.getMonth()===d.getMonth()&&c.getDate()===d.getDate()}};f.formatTimestamp=e.memoize(f.formatTimestamp,function(a,b){return b=e.defaults({},b,{isWithTime:!1}),a+b.isWithTime}),b.exports=f},{"../lib/underscore":72}],82:[function(a,b){"use strict";var c=a("../lib/raphael"),d=a("../lib/jquery"),e={axisFix:{left:60,bottom:20,right:10,top:10},axisWidth:4,axisHeight:6,paper:null,$scoreTip:null,draw:function(a,b,f,g,h){b=parseFloat(b),f=parseFloat(f);var i=e.paper||c(a);i.clear(),e.paper=i,e.drawAxis(g);for(var j=[{x:0,y:0}],k=[],l=0,m=1;g>m;m+=1){var n=e.normDist(g-m,b,f),o={x:m/g,y:n};l+=n,j.push(o),k.push(o.y)}j.push({x:1,y:0});var p=i.width-e.axisFix.left-e.axisFix.right,q=i.height-e.axisFix.top-e.axisFix.bottom,r=Math.max.apply(Math,k)*p,s=.7*p/r;if(isFinite(s)||(s=1),h&&h>0){var t=d(a).parent(),u=d(a),v={left:u.offset().left-t.offset().left,top:u.offset().top-t.offset().top},w={left:v.left+p*s*e.normDist(h,b,f)+e.axisFix.left,top:v.top+(g-h)/g*q+e.axisFix.top};e.$scoreTip||(e.$scoreTip=d('<div class="distribution-score-tip"></div>').appendTo(t)),e.$scoreTip.css(w).text(h+" 分")}var x=j.reduce(function(a,b){return a.push([0===a.length?"M":"L",s*b.y*p+e.axisFix.left,b.x*q+e.axisFix.top]),a},[]);x.push("Z"),i.path(x).attr({fill:"270.0-#FF947D-#D83C48",stroke:"none"}).glow({offsetx:1,offsety:1,width:4,color:"#CCC"})},normDist:function(a,b,c){return 0===b||0===c?0:1/(c*Math.sqrt(2*Math.PI))*Math.exp(-(a-b)*(a-b)/(2*c*c))},drawAxis:function(a){var b=e.paper;if(null!==b){var c=[["M",e.axisFix.left,e.axisFix.top]],f=b.width-e.axisFix.left-e.axisFix.right,g=b.height-e.axisFix.top-e.axisFix.bottom;!function(){for(var d=Math.min(a/10,10),f=0;d>=f;f++){var h=e.axisFix.left-e.axisWidth,i=h-e.axisHeight,j=e.axisFix.top+f/d*g,k=j+e.axisWidth;b.text(e.axisFix.left/2,(j+k)/2,a*(d-f)/d).attr({fill:"#3A8FFB","font-size":14,"font-family":"Arial, Helvetica, sans-serif","text-anchor":"middle"}),c=c.concat([["L",h,j],["L",i,j],["A",2,2,0,1,0,i,k],["L",h,k]])}}(),function(){for(var a=10,b=0;a>=b;b++){var d=e.axisFix.left-e.axisWidth+f*(b/a),h=d+e.axisWidth,i=e.axisFix.top+g+e.axisWidth,j=i+e.axisHeight,k=[["L",d,j],["A",2,2,0,1,0,h,j],["L",h,i]];0!==b&&k.unshift(["L",d,i]),c=c.concat(k)}}(),c=c.concat([["L",b.width-e.axisFix.right,e.axisFix.top+g],["L",e.axisFix.left,e.axisFix.top+g],"Z"]);var h=b.path(c);h.attr({fill:"#FFF",stroke:"none"}),d.browser.msie&&"7.0"===d.browser.version||(h.glow({offsetx:-1,offsety:1,width:1,color:"#BBB"}),h.glow({offsetx:1,offsety:-1,width:3,opacity:.3,color:"#CCC"}))}}};b.exports=e},{"../lib/jquery":67,"../lib/raphael":70}],83:[function(a,b){"use strict";var c={alert:function(b,c){var d=":( 请求失败，程序猿正在为你努力解决问题中";if(b)d=b.getMessage(c);else if(c&&c.xhr){if(401===c.xhr.status){var e=a("../util/Message").alert({content:"你已退出登录，请重新登录",title:"出错了 :("});return e.on("hide",function(){location.href="/login?redirect="+encodeURIComponent(location.pathname)}),e}var f=null;try{f=JSON.parse(c.xhr.responseText)}catch(g){}f&&412===c.xhr.status&&"courseNotInQuiz"===f.error&&(d=a("../../uni/exception/QuizError").getMessage())}return a("../util/Message").alert({content:d,title:"出错了 :("})}};b.exports=c},{"../../uni/exception/QuizError":169,"../util/Message":85}],84:[function(a,b){"use strict";var c={SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,ENTER:13,TAB:9,ESC:27,SHIFT:16,CTRL:17,ALT:18,COMMAND:91,J:106,K:107};b.exports=c},{}],85:[function(a,b){"use strict";var c=a("../lib/underscore"),d={success:function(b,c){c=c||{};var d=a("../component/assembly/Alert"),e=new d({content:b,icon:"ok",classAdd:"success-dialog-wrap"});return e.reset(),e.show(),setTimeout(function(){e.hide()},c.timeout||500),e},loading:function(b){var c=a("../component/assembly/Alert"),d=new c({content:b,icon:"refresh",classAdd:"loading-dialog-wrap"});return d.reset(),d.show(),d},alert:function(b){var d=a("../component/assembly/Alert");b=c.defaults({classAdd:"error-dialog-wrap"},b,{closeButton:"确定"}),b.header=b.title||null;var e=new d(b);return e.reset(),e.show(),e}};b.exports=d},{"../component/assembly/Alert":2,"../lib/underscore":72}],86:[function(a,b){"use strict";var c=a("../lib/jquery"),d={get:function(a){var b=c("#"+a+"Data");return 0===b.size()?null:b.data("json")}},e=a("../../common/lib/underscore");d.get=e.memoize(d.get),b.exports=d},{"../../common/lib/underscore":72,"../lib/jquery":67}],87:[function(a,b){"use strict";var c=a("../lib/jquery"),d={get:function(a){window.fusion2&&window.parent!==window?window.fusion2.canvas.getClientRect({onSuccess:function(b){b={left:b.left,top:b.top,bottom:b.bottom,right:b.right,width:b.right-b.left,height:b.bottom-b.top},a(b)}}):setTimeout(function(){var b={left:Math.max(0,c(document).scrollLeft()),top:Math.max(0,c(document).scrollTop()),height:c(window).height(),width:c(window).width()};b.right=b.left+b.width,b.bottom=b.top+b.height,a(b)},0)}};b.exports=d},{"../lib/jquery":67}],88:[function(a,b){"use strict";var c={test:function(a,b){var c=a.test(b);return a.lastIndex=0,c},URL:/(http)s?:\/\/(?:[\w\-]+\.?)+[\.\/\?%&=#@$();,\[\]\-+_!:*~\w\-]+/g,URL_WITHOUT_HTTP:/(?:(http)s?:\/\/)?(?:[\w\-]+\.)+(?:[\w\-]+\.?)*[\.\/\?%&=#@$();,\[\]\-+_!:*~\w\-]+/g,MATCH_URL_WITHOUT_HTTP:/^(?:(http)s?:\/\/)?(?:[\w\-]+\.)+(?:[\w\-]+\.?)*[\.\/\?%&=#@$();,\[\]\-+_!:*~\w\-]+$/g,DOUBLE_CHARACTER:/[\uFE30-\uFFA0\u2E80-\u9FFF\uac00-\ud7ff\u3000‘“”’]/g,NAME:/^([\u4e00-\u9fa5a-zA-Z_\-0-9]+)$/g,EMAIL:/^[a-zA-Z0-9_\-\.]{1,}@[a-zA-Z0-9_\-]{1,}\.[a-zA-Z0-9_\-.]{1,}$/,USER_URL:/^[a-zA-Z0-9]+$/i,TIME:/^(\d\d):(\d\d)/i,MOBILE:/^1[34589]\d{9}$/,BANK_CARD:/^\d{16,19}$/};b.exports=c},{}],89:[function(a,b){"use strict";var c=a("../lib/jquery"),d=a("../lib/underscore"),e={callbacks:[],to:function(b,d){d=d||{};var f=a("./Viewport"),g=c(b).offset().top,h=f.getRect().headerFix+(d&&d.fix||0),i=c("html, body");d.duration?i.animate({scrollTop:g-h},d.duration):e.setScrollTop(g-h)},upTo:function(b){var d=a("./Viewport"),f=c(b).offset();if(d.isOverflow(f)===d.OVERFLOW_TOP){var g=d.getRect();e.setScrollTop(f.top-g.headerFix)}},on:function(b,d){if(window.fusion2&&window.parent!==window)return e.callbacks.push([b,d]),void e.startFusion();var f=function(){c(window).off("scroll",f),setTimeout(function(){a("./Rect").get(b.bind(d)),c(window).on("scroll",f)},50)};c(window).on("scroll",f)},startFusion:function(){window.fusion2.iface.updateClientRect(function(a){a={left:a.left,top:a.top,bottom:a.bottom,right:a.right,width:a.right-a.left,height:a.bottom-a.top},e.callbacks.forEach(function(b){b[0].call(b[1],a)})})},setScrollTop:function(a){window.fusion2&&window.parent!==window?window.fusion2.canvas.setScroll({top:a}):c(document).scrollTop(a)}};e.startFusion=d.once(e.startFusion),b.exports=e},{"../lib/jquery":67,"../lib/underscore":72,"./Rect":87,"./Viewport":93}],90:[function(a,b){"use strict";var c=a("../lib/underscore"),d=a("../lib/Handlebars");d.registerHelper("echoIf",function(){var a=c.toArray();if(0!==c.compact(c.rest(a)).length)return a[0].replace(/\$(\d+)/g,function(b,c){return a[c+1]})}),d.registerHelper("image",function(a){return"/api/images/"+a}),d.registerHelper("indexToLabel",function(a){return String.fromCharCode(a+65)});var e=function(a){this.template=d.template(a)};e.prototype.render=function(a){return this.template(c.extend({__uid:c.uniqueId()},a))};var f={template:function(a){return new e(a)}};b.exports=f},{"../lib/Handlebars":64,"../lib/underscore":72}],91:[function(a,b){"use strict";var c={offset:null,getNow:function(){return Date.now()+c.offset},setSystemTime:function(a){c.offset=a-Date.now()}};b.exports=c},{}],92:[function(a,b){"use strict";var c={interval:function(a,b){var c=Date.now(),d=null,e=0;return function f(){var g=c-Date.now();d=setTimeout(function(){f(),a()},Math.max(b+g+e,0)),e=g,c+=b}(),function(a){return a&&(clearTimeout(d),d=null),d}},clear:function(a){return a?a(!0):null}};b.exports=c},{}],93:[function(a,b){"use strict";var c=a("../lib/jquery"),d=a("../lib/underscore"),e=null,f=null,g={OVERFLOW_TOP:1,OVERFLOW_RIGHT:2,OVERFLOW_BOTTOM:3,OVERFLOW_LEFT:4,NO_OVERFLOW:0,init:function(){var a=c(".header-wrap");f="fixed"===a.css("position"),e=c(".header-wrap").outerHeight()},getRect:function(){g.init();var a=c(document),b=c(window),d={top:a.scrollTop()+(f?e:0),left:a.scrollLeft(),width:b.width(),height:b.height(),headerFix:f?e:0};return d.bottom=d.top+d.height,d.right=d.left+d.width,d},isOverflow:function(a){var b=g.getRect();return a.top<b.top?g.OVERFLOW_TOP:a.left<b.left?g.OVERFLOW_LEFT:a.right>b.right?g.OVERFLOW_RIGHT:a.bottom>b.bottom?g.OVERFLOW_BOTTOM:g.NO_OVERFLOW}};g.init=d.once(g.init),b.exports=g},{"../lib/jquery":67,"../lib/underscore":72}],94:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=a("../../../common/lib/underscore"),e=c.extend({createContainer:function(){var b=a("../../../common/component/container/Dialog");return new b(d.defaults({classAdd:"need-payment-dialog-wrap"},this.options))},createContent:function(){var b=a("../content/NeedPayment");return new b({paperId:this.options.paperId})}});b.exports=e},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Dialog":14,"../../../common/lib/underscore":72,"../content/NeedPayment":96}],95:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='\n\n<div class="download-confirm">\n    <div class="shenlun-text">你的批改次数不足，先去练习?</div>\n\n    <div class="text-right">\n        <span class="muted pull-left text-small">可以在提交练习之后再续费</span>\n        <span class="btn btn-primary create-exercise shenlun-needpay-dialog" data-paper-id="',(f=c.paperId)?f=f.call(b,{hash:{},data:e}):(f=b&&b.paperId,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'"><span class="btn-inner">\n            先练习\n        </span></span>\n        <span class="btn btn-altern link-button" data-href="/',(f=c.prefix)?f=f.call(b,{hash:{},data:e}):(f=b&&b.prefix,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'/pay"><span class="btn-inner">\n            续费\n        </span></span>\n    </div>\n</div>\n'})},{"./../../../common/util/Template":90}],96:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=c.extend({className:"download-confirm-wrap",events:{"click .exit":"onExitClick"},template:a("./NeedPayment.handlebars"),getRenderData:function(){var b=a("../../../uni/util/PageData").get("courseSet");return b.scannable=a("../../../uni/util/PageData").get("course").scannable,b.paperId=this.options.paperId,b},onExitClick:function(){this.container.hide()}});b.exports=d},{"../../../common/component/content/BaseContent":25,"../../../uni/util/PageData":202,"./NeedPayment.handlebars":95}],97:[function(a){"use strict";var b=a("../../common/lib/underscore");b.extend(a("../../common/global/CommandConfig"),a("../global/CommandConfig"));var c=null,d=window.document.body.getAttribute("data-page-name"),e={Home:a("../router/HomeRouter"),Exercise:a("../router/ExerciseRouter"),ExerciseSolution:a("../router/ExerciseSolutionRouter"),BrowserSolution:a("../router/ErrorSolutionRouter"),ExerciseKeypoint:a("../router/ExerciseKeypointRouter"),ExerciseReport:a("../router/ExerciseReportRouter"),Report:a("../router/ReportRouter"),Pay:a("../../common/router/PayRouter"),DownloadPaper:a("../router/DownloadPaperRouter"),Setting:a("../router/SettingRouter"),Incorrect:a("../router/CskRouter"),Favorite:a("../router/CskRouter"),Note:a("../router/CskRouter"),Search:a("../router/SearchRouter"),SearchResult:a("../router/SearchResultRouter"),RangeSetting:a("../router/RangeSetting")}[d];e&&(c=new e),a("../../common/task/CourseMenu").run(),a("../../common/task/Tip").run(),a("../task/CreateExercise").run(),a("../task/SelectPaper").run(),a("../task/SelectCsk").run(),a("../task/SelectSprint").run(),a("../task/WordInfo").run(),a("../task/Law").run(),a("../task/SectionHover").run(),a("../task/UserMenu").run(),a("../task/ButtonFix").run(),a("../task/ResponseFilter").run(),a("../task/Analytics").run();var f=a("../../common/lib/backbone");f.history.start()},{"../../common/global/CommandConfig":63,"../../common/lib/backbone":66,"../../common/lib/underscore":72,"../../common/router/PayRouter":76,"../../common/task/CourseMenu":77,"../../common/task/Tip":78,"../global/CommandConfig":170,"../router/CskRouter":177,"../router/DownloadPaperRouter":178,"../router/ErrorSolutionRouter":179,"../router/ExerciseKeypointRouter":180,"../router/ExerciseReportRouter":181,"../router/ExerciseRouter":182,"../router/ExerciseSolutionRouter":183,"../router/HomeRouter":184,"../router/RangeSetting":185,"../router/ReportRouter":186,"../router/SearchResultRouter":187,"../router/SearchRouter":188,"../router/SettingRouter":189,"../task/Analytics":190,"../task/ButtonFix":191,"../task/CreateExercise":192,"../task/Law":193,"../task/ResponseFilter":194,"../task/SectionHover":195,"../task/SelectCsk":196,"../task/SelectPaper":197,"../task/SelectSprint":198,"../task/UserMenu":199,"../task/WordInfo":200}],98:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=c.extend({createContainer:function(){var b=a("../../../common/component/container/Dialog");return new b},createContent:function(){var b=a("../content/ActiveTip");return new b}});b.exports=d},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Dialog":14,"../content/ActiveTip":117}],99:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=c.extend({initialize:function(){c.prototype.initialize.apply(this,arguments),this.reset()},createContainer:function(){var b=a("../../../common/component/container/Dialog");return new b({classAdd:"csk-panel-dialog-wrap",title:this.options.title})},createContent:function(){var b=a("../content/CskPanel");return new b({data:this.options.data})}});b.exports=d},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Dialog":14,"../content/CskPanel":118}],100:[function(a,b){"use strict";var c=a("../../../common/lib/underscore"),d=a("../../../common/component/assembly/BaseAssembly"),e=d.extend({contentEvents:c.defaults({submit:"onSubmit"},d.prototype.contentEvents),createContainer:function(){var b=a("../../../common/component/container/Dialog");return new b({title:"下载练习",classAdd:"download-confirm-dialog-wrap"})},createContent:function(){var b=a("../content/DownloadConfirm");return new b},onSubmit:function(){this.trigger("submit")}});b.exports=e},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Dialog":14,"../../../common/lib/underscore":72,"../content/DownloadConfirm":121}],101:[function(a,b){"use strict";var c=a("../../../common/lib/underscore"),d=a("../../../common/component/assembly/BaseAssembly"),e=d.extend({contentEvents:c.defaults({submit:"onSubmit"},d.prototype.contentEvents),createContainer:function(){var b=a("../../../common/component/container/Prompt");return new b({title:"设置高考相关信息",classAdd:"init-dialog-wrap",submitButton:"保存"})},createContent:function(){var b=a("../content/GaokaoInitPanel");return new b},onSubmit:function(a){this.hide(),this.trigger("submit",a)}});b.exports=e},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Prompt":20,"../../../common/lib/underscore":72,"../content/GaokaoInitPanel":126}],102:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=c.extend({initialize:function(){c.prototype.initialize.apply(this,arguments),this.reset()},createContainer:function(){var b=a("../../../common/component/container/Dialog");return new b({classAdd:"paper-dialog-wrap",title:"新增考点模测"})},createContent:function(){var b=a("../content/HotPaper");return new b}});b.exports=d},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Dialog":14,"../content/HotPaper":127}],103:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=c.extend({createContainer:function(){var b=a("../../../common/component/container/Tooltip");return new b({classAdd:"word-info-tool-tip-wrap",direction:["top","bottom","left","right","left"]})},createContent:function(){var b=a("../content/Law");return new b},fetch:function(a,b){this.reset(),this.content.fetch(a,b)}});b.exports=d},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Tooltip":21,"../content/Law":129}],104:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=a("../../../common/lib/underscore"),e=c.extend({createContainer:function(){var b=a("../../../common/component/container/Dialog");return new b(d.defaults({classAdd:"need-payment-dialog-wrap"},this.options))},createContent:function(){var b=a("../content/NeedPayment");return new b}});b.exports=e},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Dialog":14,"../../../common/lib/underscore":72,"../content/NeedPayment":131}],105:[function(a,b){"use strict";var c=a("../../../common/lib/underscore"),d=a("../../../common/component/assembly/BaseAssembly"),e=d.extend({contentEvents:c.defaults({submit:"onSubmit"},d.prototype.contentEvents),createContainer:function(){var b=a("../../../common/component/container/Prompt");return new b({title:"修改昵称",classAdd:"nickname-dialog-wrap",submitButton:"保存",closeButton:"取消"})},createContent:function(){var b=a("../content/NicknamePanel");return new b({nickname:this.options.nickname})},onSubmit:function(a){this.hide(),this.trigger("submit",a)}});b.exports=e},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Prompt":20,"../../../common/lib/underscore":72,"../content/NicknamePanel":132}],106:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=c.extend({initialize:function(){c.prototype.initialize.apply(this,arguments),this.reset()},createContainer:function(){var b=a("../../../common/component/container/Dialog");return new b({classAdd:"paper-dialog-wrap",title:"真题试卷"})},createContent:function(){var b=a("../content/Paper");return new b}});b.exports=d},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Dialog":14,"../content/Paper":133}],107:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=c.extend({createContainer:function(){var b=a("../../../common/component/container/Popover");return new b(this.options)},createContent:function(){var b=a("../content/PinnedTip");return new b(this.options.contentOptions)},show:function(){this.container.show.apply(this.container,arguments),this.container.pin()}});b.exports=d},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Popover":18,"../content/PinnedTip":135}],108:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=c.extend({createContainer:function(){var b=a("../../../common/component/container/Tooltip");return new b({direction:["top","bottom"],classAdd:"progress-tip-tip-wrap"})},createContent:function(){var b=a("../content/Progress");return new b}});b.exports=d},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Tooltip":21,"../content/Progress":137}],109:[function(a,b){"use strict";var c=a("../../../common/lib/underscore"),d=a("../../../common/component/assembly/BaseAssembly"),e=d.extend({contentEvents:c.defaults({submit:"onSubmit",change:"onFormChange"},d.prototype.contentEvents),createContainer:function(){var b=a("../../../common/component/container/Prompt");return new b({title:"要参加的考试",classAdd:"quiz-panel-dialog-wrap",submitButton:"保存",closeButton:"取消"})},createContent:function(){var b=a("../content/QuizPanel");return new b({quiz:this.options.quiz})},reset:function(){this.container.reset.apply(this.container,arguments),this.container.$(".submit-btn").attr("disabled",!0)},onFormChange:function(){this.container.$(".submit-btn").attr("disabled",!1)},onSubmit:function(a){this.hide(),this.trigger("submit",a)}});b.exports=e},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Prompt":20,"../../../common/lib/underscore":72,"../content/QuizPanel":138}],110:[function(a,b){"use strict";var c=a("../../../common/lib/underscore"),d=a("../../../common/lib/jquery"),e=a("../../../common/component/assembly/BaseAssembly"),f=e.extend({containerEvents:c.defaults({submit:"onSubmit"},e.prototype.containerEvents),contentEvents:c.defaults({change:"onChange"},e.prototype.contentEvents),$message:null,initialize:function(){e.prototype.initialize.apply(this,arguments),this.$message=d('<span class="text-red">需要最少选择一个出题范围</span>')},createContainer:function(){var b=a("../../../common/component/container/Prompt");return new b({title:"选择出题范围",classAdd:"quiz-range-dialog-wrap",submitButton:"确定",closeButton:"取消"})},createContent:function(){var b=a("../content/QuizRangePanel");return new b},onSubmit:function(){var b=this.content.getSelectedRanges(),c=a("../../../common/util/Command").execute("setQuizRange",{urlPattern:{courseSet:a("../../../common/util/PageData").get("courseSet").prefix}},{data:JSON.stringify(b)}),e=a("../../../common/util/Message").loading("正在保存");d.when(d.delay(2e3),c).done(function(){e.hide(),this.hide(),this.trigger("submit",b.length)}.bind(this))},onChange:function(){var a=this.content.getSelectedRanges();a.length>0?(this.$message.remove(),this.container.$(".submit-btn").attr("disabled",!1)):(this.container.$(".dialog-ft").prepend(this.$message),this.container.$(".submit-btn").attr("disabled",!0))}});b.exports=f},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Prompt":20,"../../../common/lib/jquery":67,"../../../common/lib/underscore":72,"../../../common/util/Command":80,"../../../common/util/Message":85,"../../../common/util/PageData":86,"../content/QuizRangePanel":140}],111:[function(a,b){"use strict";var c=a("../../../common/lib/underscore"),d=a("../../../common/component/assembly/BaseAssembly"),e=d.extend({contentEvents:c.defaults({submit:"onSubmit"},d.prototype.contentEvents),createContainer:function(){var b=a("../../../common/component/container/Prompt");return new b({title:"修改学校",classAdd:"school-dialog-wrap",submitButton:"保存",closeButton:"取消"})},createContent:function(){var b=a("../content/SchoolPanel");return new b({schools:this.options.schools,schoolType:this.options.schoolType})},onSubmit:function(a){this.hide(),this.trigger("submit",a)}});b.exports=e},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Prompt":20,"../../../common/lib/underscore":72,"../content/SchoolPanel":142}],112:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=a("../../../common/lib/underscore"),e=c.extend({createContainer:function(){var b=a("../../../common/component/container/Dialog");return new b(d.defaults({classAdd:"need-payment-dialog-wrap"},this.options))},createContent:function(){var b=a("../content/SprintNeedPayment");return new b}});b.exports=e},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Dialog":14,"../../../common/lib/underscore":72,"../content/SprintNeedPayment":144}],113:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=c.extend({createContainer:function(){var b=a("../../../common/component/container/Dialog");return new b({classAdd:"sprint-panel-dialog-wrap",title:"考前冲刺"})},createContent:function(){var b=a("../content/SprintPanel");return new b({sprint:this.options.sprint})}});b.exports=d},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Dialog":14,"../content/SprintPanel":146}],114:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=c.extend({createContainer:function(){var b=a("../../../common/component/container/FlatMenu");return new b({classAdd:"user-menu-menu-wrap",direction:["bottom"],triggerAlign:["center","center"]})},createContent:function(){var b=a("../content/UserMenu");return new b}});b.exports=d},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/FlatMenu":16,"../content/UserMenu":148}],115:[function(a,b){"use strict";var c=a("../../../common/component/assembly/BaseAssembly"),d=c.extend({createContainer:function(){var b=a("../../../common/component/container/Tooltip");return new b({classAdd:"word-info-tool-tip-wrap",direction:["top","bottom","left","right","left"]})},createContent:function(){var b=a("../content/WordInfo");return new b},fetch:function(a,b,c){this.reset(),this.content.fetch(a,b,c)}});b.exports=d},{"../../../common/component/assembly/BaseAssembly":3,"../../../common/component/container/Tooltip":21,"../content/WordInfo":149}],116:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='<span class="text-cyan">（免费',(d=c.freeDays)?d=d.call(a,{hash:{},data:b}):(d=a&&a.freeDays,d=typeof d===j?d.call(a,{hash:{},data:b}):d),e+=k(d)+"天）</span>"}function g(){return'<span class="text-cyan">（永久免费）</span>'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+="\n\n<h2>",(h=c.name)?h=h.call(b,{hash:{},data:e}):(h=b&&b.name,h=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(h),h=c.unless.call(b,b&&b.free,{hash:{},inverse:l.program(3,g,e),fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="</h2>\n\n<p>",(h=c.desc)?h=h.call(b,{hash:{},data:e}):(h=b&&b.desc,h=typeof h===j?h.call(b,{hash:{},data:e}):h),(h||0===h)&&(i+=h),i+='</p>\n\n<div class="button-row">\n    <a href="/',(h=c.prefix)?h=h.call(b,{hash:{},data:e}):(h=b&&b.prefix,h=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(h)+'/intro" target="_blank">了解更多</a>\n    <form action="/',(h=c.prefix)?h=h.call(b,{hash:{},data:e}):(h=b&&b.prefix,h=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(h)+'/active" method="post" class="pull-right">\n        <span class="btn btn-primary submit-button"><span class="btn-inner">\n            开始练习\n        </span></span>\n        <span class="btn btn-altern cancel" data-href="/signupresult"><span class="btn-inner">\n            返回\n        </span></span>\n    </form>\n</div>\n'})},{"./../../../common/util/Template":90}],117:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=a("../../../common/lib/underscore"),e=a("../../../common/lib/jquery"),f=c.extend({className:"active-tip-wrap",events:{"click .cancel":function(){history.back()}},getRenderData:function(){var b=a("../../util/PageData"),c=d.defaults({desc:e(".active-tip-content").val()},b.get("courseSet"));return c.freeDays="zqcy"===c.prefix?1:3,c},template:a("./ActiveTip.handlebars")});b.exports=f},{"../../../common/component/content/BaseContent":25,"../../../common/lib/jquery":67,"../../../common/lib/underscore":72,"../../util/PageData":202,"./ActiveTip.handlebars":116}],118:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=c.extend({className:"csk-panel-wrap",events:{"click .create-exercise":"onCreateClick","click .toggle-expand":"onToggleClick","click .exam-nav a":"onNavClick","mouseover .progress-wrap":"onProgressClick","click .progress-wrap":"onProgressClick"},render:function(){this.fetch()},fetch:function(b){b=b||1;var c=a("../../../common/util/Command").execute("getCskList",null,{data:this.options.data});if(!this.container.visible){var d=a("../../../common/util/Message").loading("正在载入专项列表...");c.always(function(){d.hide()})}c.done(this.onFetchSuccess.bind(this)),c.fail(function(b){a("../../../common/util/ExceptionUtil").alert(null,{xhr:b})})},expandKeypoint:function(a){var b=a.data("id");a.addClass("expanded"),this.$(".keypoint[data-parent-id="+b+"]").toArray().forEach(function(a){var b=this.$(a);b.show()},this)},shrinkKeypoint:function(a){a.removeClass("expanded");for(var b=this.$(".keypoint"),c=b.filter("[data-parent-id="+a.data("id")+"]"),d=0;d<c.size();d++){var e=c.eq(d).data("id");c=c.add(b.filter("[data-parent-id="+e+"]"))}c.filter(":visible").hide()},onFetchSuccess:function(a){this.el.innerHTML=a,this.container.show()},onCreateClick:function(a){a.preventDefault(),this.container.hide()},onNavClick:function(a){a.preventDefault(),this.fetch(this.$(a.currentTarget).data("examId"))},onToggleClick:function(a){a.preventDefault();var b=this.$(a.currentTarget).closest(".keypoint");b.hasClass("expanded")?this.shrinkKeypoint(b):this.expandKeypoint(b)},onProgressClick:function(b){var c=a("../../../common/lib/jquery"),d=c(b.currentTarget);if(!(d.closest(".progress-tip-tip-wrap").size()>0)){var e=d.data("tip");if(!e){var f=a("../assembly/Progress");e=new f,e.reset({contentOptions:d.data()}),d.data("tip",e),e.container.$el.css("z-index",parseInt(this.container.$el.css("z-index"),10)+1)}e.show(b.currentTarget)}}});b.exports=d},{"../../../common/component/content/BaseContent":25,"../../../common/lib/jquery":67,"../../../common/util/Command":80,"../../../common/util/ExceptionUtil":83,"../../../common/util/Message":85,"../assembly/Progress":108}],119:[function(a,b){"use strict";var c=a("../../../common/lib/backbone"),d=c.View.extend({events:{"click .toggle-expand":"onToggleClick"},expandKeypoint:function(a){var b=a.data("id");a.addClass("expanded"),this.$(".keypoint[data-parent-id="+b+"]").toArray().forEach(function(a){var b=this.$(a);b.show()},this),this.renderEven()},shrinkKeypoint:function(a){a.removeClass("expanded");for(var b=this.$(".keypoint"),c=b.filter("[data-parent-id="+a.data("id")+"]"),d=0;d<c.size();d++){var e=c.eq(d).data("id");c=c.add(b.filter("[data-parent-id="+e+"]"))}c.filter(":visible").hide()},renderEven:function(){this.$("tr:visible").removeClass("even").filter(":even").addClass("even")},onToggleClick:function(a){a.preventDefault();var b=this.$(a.currentTarget).closest(".keypoint");b.hasClass("expanded")?this.shrinkKeypoint(b):this.expandKeypoint(b)}});b.exports=d},{"../../../common/lib/backbone":66}],120:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){function f(){return' class="no-scannable"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i=this;return h+='\n\n<div class="download-confirm">\n    <div class="tutor">\n        <span',g=c.unless.call(b,b&&b.scannable,{hash:{},inverse:i.noop,fn:i.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+='></span>\n    </div>\n\n    <div class="text-right">\n        <span class="btn btn-normal submit"><span class="btn-inner">立即下载</span></span>\n    </div>\n</div>\n'})},{"./../../../common/util/Template":90}],121:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=a("../../../common/lib/underscore"),e=c.extend({className:"download-confirm-wrap",events:{"click .cancel":"onCancel","click .submit":"onSubmit"},template:a("./DownloadConfirm.handlebars"),getRenderData:function(){var b=d.defaults({},a("../../../common/util/PageData").get("course"),this.options);return b},onCancel:function(){this.container.hide()},onSubmit:function(){this.container.hide(),this.trigger("submit")}});b.exports=e},{"../../../common/component/content/BaseContent":25,"../../../common/lib/underscore":72,"../../../common/util/PageData":86,"./DownloadConfirm.handlebars":120}],122:[function(a,b){"use strict";var c=a("../../../common/component/content/Exercise"),d=a("../../../common/lib/underscore"),e=a("../../util/PageData").get("course"),f=c.extend({createQuestion:function(b){return a("../item/QuestionFactory").create({el:b,exercise:this.model})},getSaveData:function(){var a=c.prototype.getSaveData.apply(this,arguments);return a.answers&&(a.userAnswers=a.answers,delete a.answers),a
},onFetchFail:function(b){var c=null;409===b.status?c=a("../../exception/ExerciseConflict"):402===b.status&&(c=a("../../exception/PaymentRequired"));var d=a("../../../common/util/ExceptionUtil");d.alert(c,{xhr:b}).on("hide",function(){location.reload()})},onSaveDone:function(a,b){return b.answers&&(b.userAnswers=b.answers,delete b.answers),c.prototype.onSaveDone.call(this,a,b)},onSaveError:function(b){var c=null;409===b.status?c=a("../../exception/CommitExerciseConflict"):402===b.status&&(c=a("../../exception/PaymentRequired"));var d=a("../../../common/util/ExceptionUtil");d.alert(c,{xhr:b}).on("hide",function(){location.reload()})},onCommitSuccess:function(a){0===a.status?this.doCommit():location.href=d.f("/"+e.prefix+"/exercises/{0}/report",this.model.id)},onCommitFail:function(b){var c=null;409===b.status?c=a("../../exception/CommitExerciseConflict"):402===b.status&&(c=a("../../exception/PaymentRequired"));var d=a("../../../common/util/ExceptionUtil");d.alert(c,{xhr:b}).on("hide",function(){409===b.status?location.reload():402===b.status&&(location.href="/"+e.prefix+"/pay")}.bind(this))}});b.exports=f},{"../../../common/component/content/Exercise":32,"../../../common/lib/underscore":72,"../../../common/util/ExceptionUtil":83,"../../exception/CommitExerciseConflict":165,"../../exception/ExerciseConflict":166,"../../exception/PaymentRequired":168,"../../util/PageData":202,"../item/QuestionFactory":162}],123:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n    <div class="keypoint">\n        <div class="keypoint-hd">\n            ',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===i?d.call(a,{hash:{},data:b}):d),e+=j(d)+'\n        </div>\n        <div class="keypoint-bd">\n            ',(d=c.desc)?d=d.call(a,{hash:{},data:b}):(d=a&&a.desc,d=typeof d===i?d.call(a,{hash:{},data:b}):d),(d||0===d)&&(e+=d),e+="\n        </div>\n    </div>\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+="\n\n",g=c.each.call(b,b&&b.subjects,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n"})},{"./../../../common/util/Template":90}],124:[function(a,b){"use strict";var c=a("../../../common/lib/backbone"),d=a("../../../common/lib/jquery"),e=c.View.extend({events:{"click .expand-trigger":"onTriggerClick"},chapterContentTemplate:a("./ExerciseKeypoint.handlebars"),initialize:function(){this.options.filter=this.$el.data("solutionType"),this.options.exerciseId=this.$el.data("exerciseId")},onTriggerClick:function(b){var c=this.$(b.currentTarget).closest(".chapter").toggleClass("expanded");if(c.find(".loading:not(.pending)").size()>0){c.find(".loading").addClass("pending");var e=d(b.target).closest(".chapter").attr("data-id"),f={keypointId:e,solutionType:this.options.filter};"exercise"===this.options.filter?(f.exerciseId=this.options.exerciseId,f.solutionType="exercises"):"error"===this.options.filter?(f.solutionType="errors",f.tree="false"):"note"===this.options.filter?(f.solutionType="notes",f.tree="false"):"collect"===this.options.filter&&(f.solutionType="collects",f.tree="false");var g=d.when(a("../../../common/util/Command").execute("getChapterKeypoints",null,{data:f}),d.delay(500));g.done(function(a){a=a[0],c.find(".chapter-bd").html(this.chapterContentTemplate.render({subjects:a}))}.bind(this)),g.fail(function(b){c.find(".pending").removeClass("pending"),c.removeClass("expanded"),a("../../../common/util/ExceptionUtil").alert(null,{xhr:b})})}}}),f=a("../../../common/component/content/mixin/PopPageScroll");f.mixin(e),b.exports=e},{"../../../common/component/content/mixin/PopPageScroll":52,"../../../common/lib/backbone":66,"../../../common/lib/jquery":67,"../../../common/util/Command":80,"../../../common/util/ExceptionUtil":83,"./ExerciseKeypoint.handlebars":123}],125:[function(a,b){"use strict";var c=a("../../../common/component/content/ExerciseReport"),d=c.extend({initialize:function(){c.prototype.initialize.apply(this,arguments);var b=a("./CskTable");this.table=new b,this.table.$el.empty().append(this.$(".csk-table-wrap").children()),this.table.$el.prop("className",this.$(".csk-table-wrap").prop("className")),this.$(".csk-table-wrap").replaceWith(this.table.$el)}});b.exports=d},{"../../../common/component/content/ExerciseReport":33,"./CskTable":119}],126:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=a("../form/GaokaoInitForm"),e=c.extend({className:"gaokao-init-panel-wrap",containerEvents:{submit:"onContainerSubmit"},initialize:function(){c.prototype.initialize.apply(this,arguments),this.form=new d,this.form.on("submit",this.onFormSubmit,this)},render:function(){c.prototype.render.apply(this,arguments),this.form.render(),this.$el.append(this.form.el)},onContainerSubmit:function(a){this.form.onSubmit(a)},onFormSubmit:function(a){this.trigger("submit",a)}});b.exports=e},{"../../../common/component/content/BaseContent":25,"../form/GaokaoInitForm":150}],127:[function(a,b){"use strict";var c=a("../../../common/lib/underscore"),d=a("../../../common/component/content/BaseContent"),e=d.extend({events:c.defaults({"click .create-exercise":"onCreateClick","click .open-exercise":"onCreateClick"},d.prototype.events),fetch:function(){var b=a("../../../common/util/Command").execute("getHotPaper");if(!this.container.visible){var c=a("../../../common/util/Message").loading("正在载入考点列表...");b.always(function(){c.hide()})}b.done(this.onFetchSuccess.bind(this)),b.fail(function(b){a("../../../common/util/ExceptionUtil").alert(null,{xhr:b})})},render:function(){this.fetch()},onFetchSuccess:function(a){this.el.innerHTML=a,this.container.show()},onCreateClick:function(){this.container.hide()},onNavClick:function(a){a.preventDefault(),this.fetch(this.$(a.currentTarget).data("examId"))}});b.exports=e},{"../../../common/component/content/BaseContent":25,"../../../common/lib/underscore":72,"../../../common/util/Command":80,"../../../common/util/ExceptionUtil":83,"../../../common/util/Message":85}],128:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n        ",d=c["if"].call(a,a&&a.primary,{hash:{},inverse:n.noop,fn:n.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n        ",d=c.each.call(a,a&&a.primary,{hash:{},inverse:n.noop,fn:n.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n        ",d=c["if"].call(a,a&&a.second,{hash:{},inverse:n.noop,fn:n.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n        ",d=c.each.call(a,a&&a.second,{hash:{},inverse:n.noop,fn:n.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function g(){return"\n        "}function h(a,b){var d,e="";return e+="\n        <p>\n            ",(d=c.desc)?d=d.call(a,{hash:{},data:b}):(d=a&&a.desc,d=typeof d===m?d.call(a,{hash:{},data:b}):d),(d||0===d)&&(e+=d),e+="\n        </p>\n        "}function i(){return"\n        <h4>法条扩展</h4>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m="function",n=this,o=c.blockHelperMissing;return l+='<div class="word-info-wrap">\n    ',k={hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e},(j=c.accessory)?j=j.call(b,k):(j=b&&b.accessory,j=typeof j===m?j.call(b,k):j),c.accessory||(j=o.call(b,j,k)),(j||0===j)&&(l+=j),l+="\n</div>\n"})},{"./../../../common/util/Template":90}],129:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=a("../../../common/lib/underscore"),e=c.extend({template:a("./Law.handlebars"),fetch:function(b,c){var d={};c&&(d.course=c);var e=b.primary.map(function(a){return a.id});b.second&&(e=e.concat(b.second.map(function(a){return a.id})));var f=a("../../../common/util/Command").execute("getLaws",{urlPattern:d},{data:{ids:e.join(",")}});f.done(this.onFetchSuccess.bind(this,b)),f.fail(this.onFetchError.bind(this))},onFetchSuccess:function(a,b){this.render({accessory:{primary:a.primary.map(function(a){return d.findWhere(b,{id:a.id})}),second:(a.second||[]).map(function(a){return d.findWhere(b,{id:a.id})})}}),this.trigger("rectChange")},onFetchError:function(){this.el.innerHTML="获取信息失败 :(",this.trigger("rectChange")}});b.exports=e},{"../../../common/component/content/BaseContent":25,"../../../common/lib/underscore":72,"../../../common/util/Command":80,"./Law.handlebars":128}],130:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){function f(){return' class="no-scannable"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i=this,j="function",k=this.escapeExpression;return h+='\n\n<div class="download-confirm">\n    <div class="tutor">\n        <span',g=c.unless.call(b,b&&b.scannable,{hash:{},inverse:i.noop,fn:i.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+='></span>\n    </div>\n\n    <div class="text-right">\n        <span class="muted pull-left text-small">免费期间不能下载试卷，请付费后进行下载</span>\n        <span class="btn btn-primary link-button" data-href="/',(g=c.prefix)?g=g.call(b,{hash:{},data:e}):(g=b&&b.prefix,g=typeof g===j?g.call(b,{hash:{},data:e}):g),h+=k(g)+'/pay"><span class="btn-inner">\n            去支付\n        </span></span>\n        <span class="btn btn-altern exit"><span class="btn-inner">\n            取消\n        </span></span>\n    </div>\n</div>\n'})},{"./../../../common/util/Template":90}],131:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=c.extend({className:"download-confirm-wrap",events:{"click .exit":"onExitClick"},template:a("./NeedPayment.handlebars"),getRenderData:function(){var b=a("../../util/PageData").get("courseSet");return b.scannable=a("../../util/PageData").get("course").scannable,b},onExitClick:function(){this.container.hide()}});b.exports=d},{"../../../common/component/content/BaseContent":25,"../../util/PageData":202,"./NeedPayment.handlebars":130}],132:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=a("../form/NicknameForm"),e=c.extend({className:"nickname-panel-wrap",containerEvents:{submit:"onContainerSubmit"},initialize:function(){c.prototype.initialize.apply(this,arguments),this.form=new d({formData:{nickname:this.options.nickname||""}}),this.form.on("submit",this.onFormSubmit,this)},getRenderData:function(){return a("../../util/PageData").get("loginUser")},render:function(){c.prototype.render.apply(this,arguments),this.form.render(),this.$el.append(this.form.el)},onContainerSubmit:function(a){this.form.onSubmit(a)},onFormSubmit:function(a){this.trigger("submit",a)}});b.exports=e},{"../../../common/component/content/BaseContent":25,"../../util/PageData":202,"../form/NicknameForm":151}],133:[function(a,b){"use strict";var c=a("../../../common/lib/underscore"),d=a("../../../common/component/content/BaseContent"),e=d.extend({events:c.defaults({"click .create-exercise":"onCreateClick","click .open-exercise":"onCreateClick","click .switch-label":"onSwitchClick","click .page-number":"onPageClick","click .suggest-paper":"onSuggestClick","click .all-paper":"onAllClick"},d.prototype.events),fetch:function(b){b=b||{};var c=a("../../../common/util/Command").execute("getPaper",null,{data:{toPage:b.toPage||0,labelId:b.labelId||0,pageSize:5}});if(!this.container.visible){var d=a("../../../common/util/Message").loading("正在载入真题列表...");c.always(function(){d.hide()})}c.done(this.onFetchSuccess.bind(this)),c.fail(function(b){a("../../../common/util/ExceptionUtil").alert(null,{xhr:b})})},render:function(){this.fetch()},onFetchSuccess:function(a){this.el.innerHTML=a;var b=this.$(".container-title").detach();this.container.$(".dialog-hd .title").html(b.html()),this.container.show()},onCreateClick:function(){this.container.hide()},onSwitchClick:function(a){this.fetch({toPage:0,labelId:this.$(a.currentTarget).data("labelId")})},onPageClick:function(a){a.preventDefault();var b=this.$(".label-nav:visible .active a").data("labelId")||0;this.fetch({labelId:b,toPage:this.$(a.currentTarget).data("number")-1})},onSuggestClick:function(a){a.preventDefault(),this.fetch({toPage:0,labelId:0})},onAllClick:function(a){a.preventDefault();var b=this.$(a.currentTarget).closest("li");b.hasClass("active")||this.fetch({labelId:this.$(".label-nav .switch-label:first").data("labelId"),toPage:0})}});b.exports=e},{"../../../common/component/content/BaseContent":25,"../../../common/lib/underscore":72,"../../../common/util/Command":80,"../../../common/util/ExceptionUtil":83,"../../../common/util/Message":85}],134:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='\n\n<button class="close exit">&times;</button>\n',(f=c.content)?f=f.call(b,{hash:{},data:e}):(f=b&&b.content,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+"\n"})},{"./../../../common/util/Template":90}],135:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=a("../../../common/lib/underscore"),e=c.extend({className:c.prototype.events+" pinned-tip-wrap",events:d.defaults({"click .exit":"onExitClick"},c.prototype.events),template:a("./PinnedTip.handlebars"),onExitClick:function(){this.container.hide()}});b.exports=e},{"../../../common/component/content/BaseContent":25,"../../../common/lib/underscore":72,"./PinnedTip.handlebars":134}],136:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n<table class="progress-table">\n    <thead>\n        <tr>\n            <th></th>\n            <th>答题进度</th>\n            <th>完成情况</th>\n            <th class="last">正确率</th>\n        </tr>\n    </thead>\n    <tbody>\n    ',d=c.each.call(a,a&&a.progresses,{hash:{},inverse:o.noop,fn:o.programWithDepth(2,g,b,a),data:b}),(d||0===d)&&(e+=d),e+="\n    </tbody>\n</table>\n"}function g(a,b,d){var e,f="";return f+="\n    <tr>\n        <td>已练习",(e=c.count)?e=e.call(a,{hash:{},data:b}):(e=a&&a.count,e=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(e)+'次的题</td>\n        <td>\n            <div class="progress-wrap">\n                <span class="progress-bar level-',(e=c.level)?e=e.call(a,{hash:{},data:b}):(e=a&&a.level,e=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(e)+'" style="width: ',(e=c.width)?e=e.call(a,{hash:{},data:b}):(e=a&&a.width,e=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(e)+'%"></span>\n            </div>\n        </td>\n        <td>\n            ',e=c["if"].call(a,a&&a.completed,{hash:{},inverse:o.programWithDepth(5,i,b,d),fn:o.program(3,h,b),data:b}),(e||0===e)&&(f+=e),f+='\n        </td>\n        <td class="last">\n            ',(e=c.correctRate)?e=e.call(a,{hash:{},data:b}):(e=a&&a.correctRate,e=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(e)+"%\n        </td>\n    </tr>\n    "}function h(){return"\n            已完成\n            "}function i(a,b,d){var e,f="";return f+="\n            ",(e=c.answerCount)?e=e.call(a,{hash:{},data:b}):(e=a&&a.answerCount,e=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(e)+"/"+n((e=d&&d.questionCount,typeof e===m?e.apply(a):e))+"\n            "}function j(){return"\n还没有进行答题\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l="",m="function",n=this.escapeExpression,o=this;return l+="\n\n",k=c["if"].call(b,b&&b.progresses,{hash:{},inverse:o.program(7,j,e),fn:o.program(1,f,e),data:e}),(k||0===k)&&(l+=k),l+="\n"})},{"./../../../common/util/Template":90}],137:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=c.extend({template:a("./Progress.handlebars"),className:"progress-tip-wrap",getRenderData:function(){var a=c.prototype.getRenderData.apply(this,arguments);return a.progresses=a.progresses||[],a.progresses=a.progresses.map(function(b,c){return{answerCount:b.answerCount,count:b.count,correctRate:Math.round(b.correctCount/b.answerCount*1e3)/10,completed:b.answerCount===a.questionCount,width:Math.min(Math.round(b.answerCount/a.questionCount*1e4)/100,100),level:c+1}}),a}});b.exports=d},{"../../../common/component/content/BaseContent":25,"./Progress.handlebars":136}],138:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=a("../form/QuizForm"),e=c.extend({className:"quiz-panel-wrap",containerEvents:{submit:"onContainerSubmit"},initialize:function(){c.prototype.initialize.apply(this,arguments),this.form=new d({formData:{quiz:this.options.quiz}}),this.form.on("submit",this.onFormSubmit,this),this.form.on("itemChange",this.onFormChange,this),this.form.on("fetch",this.onFormFetch,this)},getRenderData:function(){return a("../../util/PageData").get("loginUser")},render:function(){c.prototype.render.apply(this,arguments),this.form.render(),this.$el.append(this.form.el)},onContainerSubmit:function(a){this.form.onSubmit(a)},onFormSubmit:function(a){this.trigger("submit",a)},onFormChange:function(){this.trigger("change")},onFormFetch:function(){this.trigger("resize")}});b.exports=e},{"../../../common/component/content/BaseContent":25,"../../util/PageData":202,"../form/QuizForm":152}],139:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n",d=c.each.call(a,a&&a.quizRanges,{hash:{},inverse:o.noop,fn:o.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function g(a,b){var d,e="";return e+='\n<div class="quiz">\n    <span class="quiz-name">',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===m?d.call(a,{hash:{},data:b}):d),e+=n(d)+'</span>\n    <span class="range-wrap" data-id="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===m?d.call(a,{hash:{},data:b}):d),e+=n(d)+'">\n        <span data-value="1" class="range',d=c["if"].call(a,a&&a.paperChecked,{hash:{},inverse:o.noop,fn:o.program(3,h,b),data:b}),(d||0===d)&&(e+=d),d=c["if"].call(a,a&&a.forced,{hash:{},inverse:o.noop,fn:o.program(5,i,b),data:b}),(d||0===d)&&(e+=d),e+='"',d=c["if"].call(a,a&&a.forced,{hash:{},inverse:o.noop,fn:o.program(5,i,b),data:b}),(d||0===d)&&(e+=d),e+='>真题 <span class="sprite i-20 sprite-checkbox-2"></span></span>\n        &nbsp;&nbsp;&nbsp;\n        <span data-value="2" class="range',d=c["if"].call(a,a&&a.templateChecked,{hash:{},inverse:o.noop,fn:o.program(3,h,b),data:b}),(d||0===d)&&(e+=d),d=c["if"].call(a,a&&a.forced,{hash:{},inverse:o.noop,fn:o.program(5,i,b),data:b}),(d||0===d)&&(e+=d),e+='"',d=c["if"].call(a,a&&a.forced,{hash:{},inverse:o.noop,fn:o.program(5,i,b),data:b}),(d||0===d)&&(e+=d),e+='>模拟题 <span class="sprite i-20 sprite-checkbox-2"></span></span>\n    </span>\n</div>\n'}function h(){return" checked"}function i(){return" disabled"}function j(){return'\n    <div class="loading"></div>\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l="",m="function",n=this.escapeExpression,o=this;return k=c["if"].call(b,b&&b.quizRanges,{hash:{},inverse:o.program(7,j,e),fn:o.program(1,f,e),data:e}),(k||0===k)&&(l+=k),l+="\n"})},{"./../../../common/util/Template":90}],140:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=a("../../../common/lib/underscore"),e=c.extend({className:"quiz-range-panel-wrap",template:a("./QuizRangePanel.handlebars"),events:{"click .range:not(.disabled)":"onRangeClick","mouseover .range.disabled":"onDisabledHover","click .range.disabled":"onDisabledHover"},initialize:function(){c.prototype.initialize.apply(this,arguments),this.quiz=a("../../../common/util/PageData").get("quiz")||{}},getRenderData:function(a){var b={};return a&&(a.forceIds=a.forceIds||[],b.quizRanges=a.defaultRanges.map(function(b){var c=d.defaults({},b),e=d.findWhere(a.ranges,{id:b.id});return c.paperChecked=e&&e.types&&-1!==e.types.indexOf(1),c.templateChecked=e&&e.types&&-1!==e.types.indexOf(2),c.forced=-1!==a.forceIds.indexOf(c.id),c})),b},render:function(a){c.prototype.render.apply(this,arguments),a||this.fetch()},fetch:function(){a("../../../common/util/Command").execute("getQuizRangeList",{urlPattern:{courseSet:a("../../../common/util/PageData").get("courseSet").prefix}}).done(this.onFetchSuccess.bind(this))},getSelectedRanges:function(){return this.$(".range-wrap").toArray().map(function(a){return{id:this.$(a).data("id"),types:this.$(a).find(".range.checked").toArray().map(function(a){return this.$(a).data("value")},this)}},this).filter(function(a){return a.types.length>0})},getDisabledTip:function(){if(this.disabledTip)return this.disabledTip;var b=a("../../../common/component/assembly/Tooltip");return this.disabledTip=new b({contentOptions:{content:"不能去掉目标考试地的题目"}}),this.disabledTip.container.$el.css("z-index",this.container.$el.css("z-index")+1),this.disabledTip.reset(),this.disabledTip},onRangeClick:function(a){a.preventDefault(),this.$(a.currentTarget).toggleClass("checked"),this.trigger("change")},onFetchSuccess:function(a){this.render(a)},onDisabledHover:function(a){var b=this.getDisabledTip();b.show(a.currentTarget)}});b.exports=e},{"../../../common/component/assembly/Tooltip":11,"../../../common/component/content/BaseContent":25,"../../../common/lib/underscore":72,"../../../common/util/Command":80,"../../../common/util/PageData":86,"./QuizRangePanel.handlebars":139}],141:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="";return f+="\n\n"})},{"./../../../common/util/Template":90}],142:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=a("../../../common/component/content/SchoolSelect"),e=a("../../../common/lib/underscore"),f=c.extend({className:"school-panel-wrap",template:a("./SchoolPanel.handlebars"),containerEvents:{submit:"onContainerSubmit"},initialize:function(){c.prototype.initialize.apply(this,arguments),this.selects=[],this.schools=this.options.schools?this.options.schools.slice():[]},createSelect:function(){var a=new d({resetTrigger:!0,schoolType:this.options.schoolType,withOther:!0});return this.selects.push(a),a.on("submit",this.onSchoolChange,this),this.$el.append(a.el),a},render:function(){c.prototype.render.apply(this,arguments),this.schools.length?this.schools.reduce(function(a,b){return this.createSelect().reset({parent:a,school:b}),b}.bind(this),null):this.createSelect().reset()},getData:function(){return this.selects.map(function(a){return a.getValue()})},onContainerSubmit:function(){this.trigger("submit",{schools:this.getData()})},onSchoolChange:function(a,b){if(1!==a.height){var c=this.selects.indexOf(b);e.invoke(this.selects.splice(c+1),"destroy"),this.createSelect().reset({parent:a})}}});b.exports=f},{"../../../common/component/content/BaseContent":25,"../../../common/component/content/SchoolSelect":47,"../../../common/lib/underscore":72,"./SchoolPanel.handlebars":141}],143:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='\n\n<div class="muted desc">\n    免费期间不能使用考前冲刺功能，请付费后开始使用\n</div>\n<br />\n<div class="text-right">\n    <span class="muted pull-left text-small">付费后立即开始练习</span>\n    <span class="btn btn-primary fir-wrap link-button" data-href="/',(f=c.prefix)?f=f.call(b,{hash:{},data:e}):(f=b&&b.prefix,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'/pay"><span class="btn-inner">\n        <span class="fir fir-btn-go-pay"><span class="fir-text">去支付</span></span>\n    </span></span>\n    <span class="btn btn-altern fir-wrap exit"><span class="btn-inner">\n        <span class="fir fir-btn-cancel"><span class="fir-text">取消</span></span>\n    </span></span>\n</div>\n'})},{"./../../../common/util/Template":90}],144:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=c.extend({className:"sprint-need-payment-wrap",events:{"click .exit":"onExitClick"},template:a("./SprintNeedPayment.handlebars"),getRenderData:function(){var b=a("../../util/PageData").get("courseSet");return b},onExitClick:function(){this.container.hide()}});b.exports=d},{"../../../common/component/content/BaseContent":25,"../../util/PageData":202,"./SprintNeedPayment.handlebars":143}],145:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n                ",d=c["if"].call(a,a&&a.id,{hash:{},inverse:v.noop,fn:v.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function g(a,b){var d,e,f="";return f+="\n                    <li",e={hash:{},inverse:v.noop,fn:v.program(3,h,b),data:b},(d=c.active)?d=d.call(a,e):(d=a&&a.active,d=typeof d===w?d.call(a,e):d),c.active||(d=x.call(a,d,e)),(d||0===d)&&(f+=d),f+=" data-type=",(d=c.type)?d=d.call(a,{hash:{},data:b}):(d=a&&a.type,d=typeof d===w?d.call(a,{hash:{},data:b}):d),f+=y(d)+"><span>",(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===w?d.call(a,{hash:{},data:b}):d),f+=y(d)+"</span></li>\n                "}function h(){return' class="active"'}function i(a,b,d){var e,f="";return f+="\n                ",e=c.each.call(a,a&&a.sprintData,{hash:{},inverse:v.noop,fn:v.programWithDepth(6,j,b,a,d),data:b}),(e||0===e)&&(f+=e),f+="\n            "}function j(a,b,d,e){var f,g,h="";return h+='\n                    <div class="paper">\n                    ',g=c["if"].call(a,(f=a&&a.paper,null==f||f===!1?f:f.exercise),{hash:{},inverse:v.programWithDepth(12,n,b,e),fn:v.programWithDepth(7,k,b,d),data:b}),(g||0===g)&&(h+=g),h+='\n                    <div class="name">\n                        <span>'+y((f=a&&a.paper,f=null==f||f===!1?f:f.name,typeof f===w?f.apply(a):f))+"</span>\n                    </div>\n                    </div>\n                "}function k(a,b,d){var e,f,g="";return g+="\n                        ",f=c["if"].call(a,(e=a&&a.paper,e=null==e||e===!1?e:e.exercise,null==e||e===!1?e:e.status),{hash:{},inverse:v.program(10,m,b),fn:v.programWithDepth(8,l,b,d),data:b}),(f||0===f)&&(g+=f),g+="\n                    "}function l(a,b,d){var e,f,g="";return g+='\n                            <div class="pull-right button-wrap">\n                                <span class="btn btn-normal create-exercise btn-group-first" data-type="'+y((e=d&&d.exerciseType,typeof e===w?e.apply(a):e))+'" data-sprint-id="',(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===w?f.call(a,{hash:{},data:b}):f),g+=y(f)+'"><span class="btn-inner">再来一次</span></span>\n                            </div>\n                            <div class="pull-right status-wrap">\n                                <span class="muted">已做完'+y((e=a&&a.paper,e=null==e||e===!1?e:e.exercise,e=null==e||e===!1?e:e.finishCount,typeof e===w?e.apply(a):e))+"次</span>\n                            </div>\n                        "}function m(a){var b,c="";return c+='\n                            <div class="pull-right button-wrap">\n                                <span class="btn btn-normal open-exercise btn-group-first" data-id='+y((b=a&&a.paper,b=null==b||b===!1?b:b.exercise,b=null==b||b===!1?b:b.id,typeof b===w?b.apply(a):b))+'><span class="btn-inner">继续模考</span></span>\n                            </div>\n                            <div class="pull-right status-wrap">\n                                <span class="muted">未做完</span>\n                            </div>\n                        '}function n(a,b,d){var e,f,g="";return g+='\n                          <div class="pull-right button-wrap">\n                                <span class="btn btn-normal create-exercise btn-group-first" data-type="'+y((e=d&&d.exerciseType,typeof e===w?e.apply(a):e))+'" data-sprint-id="',(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===w?f.call(a,{hash:{},data:b}):f),g+=y(f)+'"><span class="btn-inner">立即模考</span></span>\n                          </div>\n                    '}function o(a,b,d){var e,f="";return f+="\n                ",e=c.each.call(a,a&&a.sprintData,{hash:{},inverse:v.noop,fn:v.programWithDepth(15,p,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n            "}function p(a,b,d){var e,f,g,h="";return h+='\n                    <div class="paper">\n                        <div class="pull-right button-wrap">\n                            <span class="btn btn-normal ',e=c.unless.call(a,a&&a.isZero,{hash:{},inverse:v.noop,fn:v.program(16,q,b),data:b}),(e||0===e)&&(h+=e),h+=" ",g={hash:{},inverse:v.noop,fn:v.program(18,r,b),data:b},(e=c.isZero)?e=e.call(a,g):(e=a&&a.isZero,e=typeof e===w?e.call(a,g):e),c.isZero||(e=x.call(a,e,g)),(e||0===e)&&(h+=e),h+=' btn-group-first" data-type='+y((e=d&&d.exerciseType,typeof e===w?e.apply(a):e))+' data-sprint-id="',(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===w?f.call(a,{hash:{},data:b}):f),h+=y(f)+'"><span class="btn-inner">来15道</span></span>\n                        </div>\n                        <div class="name">\n                            <span>',(f=c.name)?f=f.call(a,{hash:{},data:b}):(f=a&&a.name,f=typeof f===w?f.call(a,{hash:{},data:b}):f),h+=y(f)+'&nbsp;&nbsp;&nbsp;<span class="muted">',(f=c.count)?f=f.call(a,{hash:{},data:b}):(f=a&&a.count,f=typeof f===w?f.call(a,{hash:{},data:b}):f),h+=y(f)+"道</span></span>\n                        </div>\n                    </div>\n                "}function q(){return" create-exercise"}function r(){return" no-exercise"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var s,t,u="",v=this,w="function",x=c.blockHelperMissing,y=this.escapeExpression;return u+='<div class="paper-wrap sprint-paper-wrap">\n    <div class="paper-nav">\n        <div class="paper-nav-bg repeat-x light-gray-gradient"></div>\n        <ul class="nav nav-underline sprint-nav">\n            ',s=b&&b.sprint,s=null==s||s===!1?s:s.secretPaper,s=typeof s===w?s.apply(b):s,t=x.call(b,s,{hash:{},inverse:v.noop,fn:v.program(1,f,e),data:e}),(t||0===t)&&(u+=t),u+="\n            ",s=b&&b.sprint,s=null==s||s===!1?s:s.highFreqKeypoint,s=typeof s===w?s.apply(b):s,t=x.call(b,s,{hash:{},inverse:v.noop,fn:v.program(1,f,e),data:e}),(t||0===t)&&(u+=t),u+="\n            ",s=b&&b.sprint,s=null==s||s===!1?s:s.hotQuestion,s=typeof s===w?s.apply(b):s,t=x.call(b,s,{hash:{},inverse:v.noop,fn:v.program(1,f,e),data:e}),(t||0===t)&&(u+=t),u+='\n        </ul>\n    </div>\n    <div class="paper-list">\n        <div class="list-bd">\n            ',t=c["if"].call(b,b&&b.isHotOrSecret,{hash:{},inverse:v.noop,fn:v.programWithDepth(5,i,e,b),data:e}),(t||0===t)&&(u+=t),u+="\n            ",t=c["if"].call(b,b&&b.isHighFreqKeypoint,{hash:{},inverse:v.noop,fn:v.programWithDepth(14,o,e,b),data:e}),(t||0===t)&&(u+=t),u+="\n        </div>\n    </div>\n</div>\n"})},{"./../../../common/util/Template":90}],146:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=a("../../../common/lib/jquery"),e=a("../../../common/lib/underscore"),f=a("../../../common/util/PageData"),g=c.extend({className:"sprint-panel-wrap",events:e.defaults({"click .sprint-nav li":"onSprintliClick","click .no-exercise":"onNoExerciseClick"},c.prototype.events),template:a("./SprintPanel.handlebars"),render:function(a,b){c.prototype.render.apply(this,arguments),b?this.trigger("resize"):this.fetchData(a)},fetchData:function(b){if(b||(b=this.getDefaultSprintType()),b){var c=b===this.getSprintType("highFreqKeypoint")?"getSprintKeypoints":"getSprintPapers",d=a("../../../common/util/Command").execute(c,null,{data:{type:b}});d.done(this.onFetchSuccess.bind(this,b)),d.fail(function(b){a("../../../common/util/ExceptionUtil").alert(null,{xhr:b})})}},getRenderData:function(a,b){var c=d.extend(!0,{},this.options.sprint);Object.keys(c).forEach(function(b){c[b].active=c[b].type===a}),a===this.getSprintType("highFreqKeypoint")&&b.forEach(function(a,c){b[c].isZero=0===a.count});var e={1:7,2:8,3:9}[a];return{sprint:c,isHotOrSecret:a===this.getSprintType("hotQuestion")||a===this.getSprintType("secretPaper"),isHighFreqKeypoint:a===this.getSprintType("highFreqKeypoint"),sprintData:b,exerciseType:e}
},getSprintType:function(a){return this.options.sprint[a]&&this.options.sprint[a].id>0?this.options.sprint[a].type:null},getDefaultSprintType:function(){return this.getSprintType("secretPaper")||this.getSprintType("highFreqKeypoint")||this.getSprintType("hotQuestion")},onFetchSuccess:function(a,b){this.render(a,b)},onSprintliClick:function(a){var b=d(a.currentTarget);this.fetchData(b.data("type"))},onNoExerciseClick:function(){var b=f.get("courseSet");"sikao"===b.prefix&&a("../../../common/util/Message").alert({closeButton:"知道了",content:"当前出题年份中不包含此考点题目"})}});b.exports=g},{"../../../common/component/content/BaseContent":25,"../../../common/lib/jquery":67,"../../../common/lib/underscore":72,"../../../common/util/Command":80,"../../../common/util/ExceptionUtil":83,"../../../common/util/Message":85,"../../../common/util/PageData":86,"./SprintPanel.handlebars":145}],147:[function(a,b){var c=a("./../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n        ",d=c["if"].call(a,a&&a.multiQuiz,{hash:{},inverse:m.noop,fn:m.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function g(a,b){var d,e="";return e+='\n            <li class="setting-link"><a href="/',(d=c.prefix)?d=d.call(a,{hash:{},data:b}):(d=a&&a.prefix,d=typeof d===k?d.call(a,{hash:{},data:b}):d),e+=l(d)+'/setting">课程设置</a></li>\n        '}function h(a,b){var d,e="";return e+='\n        <li><a href="/',(d=c.prefix)?d=d.call(a,{hash:{},data:b}):(d=a&&a.prefix,d=typeof d===k?d.call(a,{hash:{},data:b}):d),e+=l(d)+'/setting/range">出题范围</a></li>\n    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return j+='\n\n\n<ul class="nav">\n    <li class="account-link"><a href="/account">帐号设置</a></li>\n    ',i=c.unless.call(b,b&&b.hideWeb,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+="\n    ",i=c["if"].call(b,b&&b.rangeSetting,{hash:{},inverse:m.noop,fn:m.program(4,h,e),data:e}),(i||0===i)&&(j+=i),j+='\n    <li class="feedback-link"><a href="/feedback?courseId=',(i=c.id)?i=i.call(b,{hash:{},data:e}):(i=b&&b.id,i=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(i)+'">问题反馈</a></li>\n    <li class="logout-link"><a href="/logout">退出</a></li>\n</ul>\n'})},{"./../../../common/util/Template":90}],148:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=c.extend({template:a("./UserMenu.handlebars"),className:c.prototype.className+" user-menu-wrap",getRenderData:function(){var b=a("../../util/PageData").get("courseSet"),c={hideWeb:b.hideWeb,multiQuiz:b.multiQuiz,rangeSetting:"sikao"===b.prefix,prefix:b.prefix,id:b.id};return c}});b.exports=d},{"../../../common/component/content/BaseContent":25,"../../util/PageData":202,"./UserMenu.handlebars":147}],149:[function(a,b){"use strict";var c=a("../../../common/component/content/BaseContent"),d=c.extend({fetch:function(b,c,d){var e={tag:"getTagInfo",keypoint:"getKeypointInfo"}[b],f={id:c};d&&(f.course=d);var g=a("../../../common/util/Command").execute(e,{urlPattern:f});g.done(this.onFetchSuccess.bind(this)),g.fail(this.onFetchError.bind(this))},onFetchSuccess:function(a){this.el.innerHTML=a,this.trigger("rectChange")},onFetchError:function(){this.el.innerHTML="获取信息失败 :(",this.trigger("rectChange")}});b.exports=d},{"../../../common/component/content/BaseContent":25,"../../../common/util/Command":80}],150:[function(a,b){"use strict";var c=a("../../../common/component/form/BaseForm"),d=a("./item/Quiz"),e=a("./item/School"),f=a("../../../common/component/form/item/Text"),g=a("../../../common/component/form/validator/Required"),h=a("../../../common/component/form/validator/Length"),i=a("../../../common/component/form/validator/Regex"),j=a("../../component/form/validator/CheckNickname"),k=c.extend({className:c.prototype.className+" gaokao-init-form-wrap",items:[{name:"nickname",type:f,options:{placeholder:"请输入昵称",label:"昵称",info:"2-12个字符，支持中文、英文、数字、_以及-"},validators:[{type:g,options:{error:"请输入昵称"}},{type:h,options:{maxError:"昵称最多 12 个字符",minError:"请输入 2 个字符以上的昵称",max:12,min:2}},{type:i,options:{regex:a("../../../common/util/Regex").NAME,error:"昵称仅支持中文、英文、数字、_以及-"}},{type:j,options:{badRequest:"昵称仅支持中文、英文、数字、_以及-",error:"该昵称已存在"}}]},{name:"quiz",type:d,options:{label:"选择要参加的考试"},validators:[{type:g,options:{error:"请选择目标考试"}}]},{name:"schools",type:e,options:{label:"学校"},validators:[{type:g,options:{error:"请选择学校"}}]}],submitData:function(){var b=this.getFormData();b.quizId=b.quiz.id,delete b.quiz,b.schoolId=b.schools[b.schools.length-1].id,delete b.schools,a("../../../common/util/Command").execute("setting",{urlPattern:{courseSet:a("../../../common/util/PageData").get("courseSet").prefix}},{data:b}).done(this.onSuccess.bind(this)).fail(this.onError.bind(this))},onSuccess:function(){this.trigger("submit",this.getFormData())},onError:function(b){if(409===b.status)return void a("../../../common/util/Message").alert({title:"出错了",content:"该昵称已存在"});var c=a("../../../common/util/ExceptionUtil");c.alert(null,{xhr:b})}});b.exports=k},{"../../../common/component/form/BaseForm":54,"../../../common/component/form/item/Text":57,"../../../common/component/form/validator/Length":58,"../../../common/component/form/validator/Regex":59,"../../../common/component/form/validator/Required":60,"../../../common/util/Command":80,"../../../common/util/ExceptionUtil":83,"../../../common/util/Message":85,"../../../common/util/PageData":86,"../../../common/util/Regex":88,"../../component/form/validator/CheckNickname":157,"./item/Quiz":154,"./item/School":156}],151:[function(a,b){"use strict";var c=a("../../../common/component/form/BaseForm"),d=a("../../../common/component/form/item/Text"),e=a("../../../common/component/form/validator/Required"),f=a("../../../common/component/form/validator/Length"),g=a("../../../common/component/form/validator/Regex"),h=a("../../component/form/validator/CheckNickname"),i=c.extend({className:c.prototype.className+" login-form-wrap",items:[{name:"nickname",type:d,options:{placeholder:"请输入昵称"},validators:[{type:e,options:{error:"请输入昵称"}},{type:f,options:{maxError:"昵称最多 12 个字符",minError:"请输入 2 个字符以上的昵称",max:12,min:2}},{type:g,options:{regex:a("../../../common/util/Regex").NAME,error:"昵称仅支持中文、英文、数字、_以及-"}},{type:h,options:{badRequest:"昵称仅支持中文、英文、数字、_以及-",error:"该昵称已存在"}}]}],submitData:function(b){b.preventDefault();var c=this.getFormData();a("../../../common/util/Command").execute("setting",{urlPattern:{courseSet:a("../../../common/util/PageData").get("courseSet").prefix}},{data:c}).done(this.onSuccess.bind(this)).fail(this.onError.bind(this))},onSuccess:function(){this.trigger("submit",this.getFormData())},onError:function(b){if(409!==b.status){var c=a("../../../common/util/ExceptionUtil");c.alert(null,{xhr:b})}}});b.exports=i},{"../../../common/component/form/BaseForm":54,"../../../common/component/form/item/Text":57,"../../../common/component/form/validator/Length":58,"../../../common/component/form/validator/Regex":59,"../../../common/component/form/validator/Required":60,"../../../common/util/Command":80,"../../../common/util/ExceptionUtil":83,"../../../common/util/PageData":86,"../../../common/util/Regex":88,"../../component/form/validator/CheckNickname":157}],152:[function(a,b){"use strict";var c=a("../../../common/component/form/BaseForm"),d=a("./item/Quiz"),e=a("../../../common/component/form/validator/Required"),f=c.extend({className:c.prototype.className+" quiz-form-wrap",items:[{name:"quiz",type:d,validators:[{type:e,options:{error:"请选择目标考试"}}]}],initialize:function(){c.prototype.initialize.apply(this,arguments),this.getItem("quiz").on("fetch",this.onFetch,this)},submitData:function(){var b=this.getFormData();b.quizId=b.quiz.id,delete b.quiz,a("../../../common/util/Command").execute("setting",{urlPattern:{courseSet:a("../../../common/util/PageData").get("courseSet").prefix}},{data:b}).done(this.onSuccess.bind(this)).fail(this.onError.bind(this))},onSuccess:function(){this.trigger("submit",this.getFormData())},onError:function(b){var c=a("../../../common/util/ExceptionUtil");c.alert(null,{xhr:b})},onFetch:function(){this.trigger("fetch")}});b.exports=f},{"../../../common/component/form/BaseForm":54,"../../../common/component/form/validator/Required":60,"../../../common/util/Command":80,"../../../common/util/ExceptionUtil":83,"../../../common/util/PageData":86,"./item/Quiz":154}],153:[function(a,b){var c=a("./../../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='<label for="',(d=c.inputId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.inputId,d=typeof d===u?d.call(a,{hash:{},data:b}):d),f+=v(d)+'">',(d=c.label)?d=d.call(a,{hash:{},data:b}):(d=a&&a.label,d=typeof d===u?d.call(a,{hash:{},data:b}):d),f+=v(d)+': <span class="item-message help-inline',e={hash:{},inverse:w.noop,fn:w.program(2,g,b),data:b},(d=c.info)?d=d.call(a,e):(d=a&&a.info,d=typeof d===u?d.call(a,e):d),c.info||(d=x.call(a,d,e)),(d||0===d)&&(f+=d),f+='">',e={hash:{},inverse:w.noop,fn:w.program(4,h,b),data:b},(d=c.info)?d=d.call(a,e):(d=a&&a.info,d=typeof d===u?d.call(a,e):d),c.info||(d=x.call(a,d,e)),(d||0===d)&&(f+=d),f+="</span></label>"}function g(){return" info"}function h(a,b){var d;return(d=c.info)?d=d.call(a,{hash:{},data:b}):(d=a&&a.info,d=typeof d===u?d.call(a,{hash:{},data:b}):d),v(d)}function i(a,b){var d,e="";return e+="\n",d=c["if"].call(a,a&&a.flatQuiz,{hash:{},inverse:w.program(12,n,b),fn:w.program(7,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function j(a,b){var d,e="";return e+='\n    <div class="clearfix">\n        ',d=c.each.call(a,a&&a.quizGroups,{hash:{},inverse:w.noop,fn:w.program(8,k,b),data:b}),(d||0===d)&&(e+=d),e+="\n    </div>\n"}function k(a,b){var d,e="";return e+="\n            ",d=c.each.call(a,a&&a.quizzes,{hash:{},inverse:w.noop,fn:w.program(9,l,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function l(a,b){var d,e="";return e+='\n            <div class="flat-quiz">\n                <span class="gradient quiz',d=c["if"].call(a,a&&a.checked,{hash:{},inverse:w.noop,fn:w.program(10,m,b),data:b}),(d||0===d)&&(e+=d),e+='" data-id="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+'" data-name="',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+'">',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"</span>\n            </div>\n            "}function m(){return" checked"}function n(a,b){var d,e="";return e+='\n    <div class="clearfix">\n        ',d=c.each.call(a,a&&a.quizGroups,{hash:{},inverse:w.noop,fn:w.program(13,o,b),data:b}),(d||0===d)&&(e+=d),e+="\n    </div>\n"}function o(a,b){var d,e="";return e+='\n        <div class="group">\n            <span class="area-name">',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"</span>\n            ",d=c.each.call(a,a&&a.quizzes,{hash:{},inverse:w.noop,fn:w.program(14,p,b),data:b}),(d||0===d)&&(e+=d),e+="\n        </div>\n        "}function p(a,b){var d,e="";return e+='<span class="gradient quiz',d=c["if"].call(a,a&&a.checked,{hash:{},inverse:w.noop,fn:w.program(10,m,b),data:b}),(d||0===d)&&(e+=d),e+='" data-id="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+'" data-name="',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+'">',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"</span>"}function q(){return'\n    <div class="loading"></div>\n'}function r(a,b){var d,e,f="";return f+='<span class="item-message help-inline',e={hash:{},inverse:w.noop,fn:w.program(2,g,b),data:b},(d=c.info)?d=d.call(a,e):(d=a&&a.info,d=typeof d===u?d.call(a,e):d),c.info||(d=x.call(a,d,e)),(d||0===d)&&(f+=d),f+='">',e={hash:{},inverse:w.noop,fn:w.program(4,h,b),data:b},(d=c.info)?d=d.call(a,e):(d=a&&a.info,d=typeof d===u?d.call(a,e):d),c.info||(d=x.call(a,d,e)),(d||0===d)&&(f+=d),f+="</span>"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var s,t="",u="function",v=this.escapeExpression,w=this,x=c.blockHelperMissing;return s=c["if"].call(b,b&&b.label,{hash:{},inverse:w.noop,fn:w.program(1,f,e),data:e}),(s||0===s)&&(t+=s),t+="\n\n",s=c["if"].call(b,b&&b.quizGroups,{hash:{},inverse:w.program(16,q,e),fn:w.program(6,i,e),data:e}),(s||0===s)&&(t+=s),t+="\n\n",s=c.unless.call(b,b&&b.label,{hash:{},inverse:w.noop,fn:w.program(18,r,e),data:e}),(s||0===s)&&(t+=s),t+="\n"})},{"./../../../../common/util/Template":90}],154:[function(a,b){"use strict";var c=a("../../../../common/component/form/item/BaseItem"),d=a("../../../../common/lib/underscore"),e=c.extend({className:"quiz-item-wrap "+c.prototype.className,template:a("./Quiz.handlebars"),events:d.defaults({"click .quiz":"onQuizClick"},c.prototype.events),quizGroups:null,getValue:function(){var a=this.$(".checked");return 0===a.size()?null:{id:a.data("id"),name:a.data("name")}},setValue:function(a){c.prototype.setValue.apply(this,arguments),this.$(".checked").removeClass("checked"),a&&a.id&&this.$(".quiz[data-id="+a.id+"]").addClass("checked")},isEmpty:function(){return!this.getValue()},getRenderData:function(){var a=c.prototype.getRenderData.apply(this,arguments);return this.quizGroups&&(a.flatQuiz=!0,a.quizGroups=this.quizGroups.map(function(b){return b.quizzes.length>1&&(a.flatQuiz=!1),{name:b.name,quizzes:b.quizzes.map(function(b){return{name:b.name,id:b.id,checked:a.defaultValue&&a.defaultValue.id===b.id}})}})),a},render:function(){c.prototype.render.apply(this,arguments),this.quizGroups||this.fetch()},fetch:function(){a("../../../../common/util/Command").execute("getQuizGroup",{urlPattern:{courseSet:a("../../../../common/util/PageData").get("courseSet").prefix}}).done(this.onFetchSuccess.bind(this))},onQuizClick:function(a){a.preventDefault(),this.$(".checked").removeClass("checked"),this.$(a.currentTarget).addClass("checked"),this.onChange(a)},onFetchSuccess:function(a){this.quizGroups=a,this.render(),this.trigger("fetch")}});b.exports=e},{"../../../../common/component/form/item/BaseItem":55,"../../../../common/lib/underscore":72,"../../../../common/util/Command":80,"../../../../common/util/PageData":86,"./Quiz.handlebars":153}],155:[function(a,b){var c=a("./../../../../common/util/Template");b.exports=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='<label for="',(d=c.inputId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.inputId,d=typeof d===o?d.call(a,{hash:{},data:b}):d),e+=p(d)+'">',(d=c.label)?d=d.call(a,{hash:{},data:b}):(d=a&&a.label,d=typeof d===o?d.call(a,{hash:{},data:b}):d),e+=p(d)+":</label>"}function g(a,b){var d,e="";return e+='\n    <option value="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===o?d.call(a,{hash:{},data:b}):d),e+=p(d)+'" data-id="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===o?d.call(a,{hash:{},data:b}):d),e+=p(d)+'" data-height="',(d=c.height)?d=d.call(a,{hash:{},data:b}):(d=a&&a.height,d=typeof d===o?d.call(a,{hash:{},data:b}):d),e+=p(d)+'" selected>',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===o?d.call(a,{hash:{},data:b}):d),e+=p(d)+"</option>\n    "}function h(){return" hide"}function i(){return'<span class="item-optional">(可选)</span>'}function j(){return" info"}function k(a,b){var d;return(d=c.info)?d=d.call(a,{hash:{},data:b}):(d=a&&a.info,d=typeof d===o?d.call(a,{hash:{},data:b}):d),p(d)}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m,n="",o="function",p=this.escapeExpression,q=this,r=c.blockHelperMissing;return l=c["if"].call(b,b&&b.label,{hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e}),(l||0===l)&&(n+=l),n+='\n\n<select class="province">\n    <option disabled value="-1">直辖市/省</option>\n    ',m={hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e},(l=c.province)?l=l.call(b,m):(l=b&&b.province,l=typeof l===o?l.call(b,m):l),c.province||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='\n</select>\n\n<select class="city',l=c["if"].call(b,b&&b.skipCity,{hash:{},inverse:q.noop,fn:q.program(5,h,e),data:e}),(l||0===l)&&(n+=l),n+='">\n    <option disabled value="-1">市</option>\n    ',m={hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e},(l=c.city)?l=l.call(b,m):(l=b&&b.city,l=typeof l===o?l.call(b,m):l),c.city||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='\n</select>\n\n<select class="area">\n    <option disabled value="-1">县/区</option>\n    ',m={hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e},(l=c.area)?l=l.call(b,m):(l=b&&b.area,l=typeof l===o?l.call(b,m):l),c.area||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='\n</select>\n\n<select class="school">\n    <option disabled value="-1">学校</option>\n    ',m={hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e},(l=c.school)?l=l.call(b,m):(l=b&&b.school,l=typeof l===o?l.call(b,m):l),c.school||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+="\n</select>\n\n",l=c.unless.call(b,b&&b.isRequired,{hash:{},inverse:q.noop,fn:q.program(7,i,e),data:e}),(l||0===l)&&(n+=l),n+='\n\n<span class="item-message help-inline',m={hash:{},inverse:q.noop,fn:q.program(9,j,e),data:e},(l=c.info)?l=l.call(b,m):(l=b&&b.info,l=typeof l===o?l.call(b,m):l),c.info||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='">',m={hash:{},inverse:q.noop,fn:q.program(11,k,e),data:e},(l=c.info)?l=l.call(b,m):(l=b&&b.info,l=typeof l===o?l.call(b,m):l),c.info||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+="</span>\n"})},{"./../../../../common/util/Template":90}],156:[function(a,b){"use strict";var c=a("../../../../common/lib/underscore"),d=a("../../../../common/component/form/item/BaseItem"),e=d.extend({className:d.prototype.className+" school-item-wrap",initialize:function(){d.prototype.initialize.apply(this,arguments),this.itemCache={},this.requests={}},events:c.defaults({"change select":"onChange"},d.prototype.events),template:a("./School.handlebars"),getValue:function(){var a=this.$("select").toArray().map(function(a){var b=this.$(a).find("option:selected");return b.prop("disabled")?null:{id:b.data("id"),name:b.text(),height:b.data("height")}},this).filter(function(a){return Boolean(a)});return a},isEmpty:function(){var a=this.getValue();return!a.length||a[a.length-1].height>1},setReadOnly:function(){d.prototype.setReadOnly.apply(this,arguments),this.$("select").prop("disabled",this.options.isReadOnly)},render:function(){d.prototype.render.apply(this,arguments),this.$("select:not(.hide)").toArray().forEach(function(a){var b=this.$(a),c=b.prevAll("select:not(.hide)").first(),d=c.size()?parseInt(c.val(),10):0;this.renderSelect(b,d,!0)},this)},renderSelect:function(b,d,e){if(e||(b.find("option:not([disabled])").remove(),b.find("option:disabled").attr("selected",!0)),-1!==d){var f=this.itemCache[d];if(!f)return this.requests[d]||(this.requests[d]=a("../../../../common/util/Command").execute("getSchoolList",{urlPattern:{courseSet:a("../../../../common/util/PageData").get("courseSet").prefix}},{data:{parentId:d}}),this.requests[d].done(function(a){this.itemCache[d]=a,delete this.requests[d]}.bind(this)),this.requests[d].fail(function(){window.alert("网络错误，请刷新下再试试，或者联系粉笔题库")})),void this.requests[d].done(this.renderSelect.bind(this,b,d));b.hasClass("school")&&(f=f.concat([{id:-d,name:"其他",height:1}]));var g=b.find("option:selected"),h=g.data("id"),i=h?"before":"after";f.forEach(function(a){if(a.id===h)return void(i="after");var b=c.format('<option data-id="{0}" data-height="{1}" value="{2}">{3}</option>',a.id,a.height,a.id,a.name);"before"===i?g.before(b):g.parent().append(b)},this)}},getRenderData:function(){var a=d.prototype.getRenderData.apply(this,arguments);return(a.defaultValue||[]).forEach(function(b,c){0===c&&b.height>=3?a.province=b:3===b.height?a.city=b:2===b.height?a.area=b:1===b.height&&(a.school=b)}),a.skipCity=a.province&&3===a.province.height,a},onChange:function(a){var b=this.$(a.currentTarget),c=b.find(":selected");b.hasClass("province")?(3===c.data("height")?b.siblings(".city").addClass("hide"):b.siblings(".city").removeClass("hide"),b.siblings(".area").removeClass("hide")):b.hasClass("city")&&(2===c.data("height")?b.siblings(".area").addClass("hide"):b.siblings(".area").removeClass("hide")),b.nextAll("select:not(.hide)").toArray().forEach(function(a){var b=this.$(a),c=b.prevAll("select:not(.hide)").first(),d=parseInt(c.val(),10);this.renderSelect(b,d)},this),d.prototype.onChange.apply(this,arguments)}});b.exports=e},{"../../../../common/component/form/item/BaseItem":55,"../../../../common/lib/underscore":72,"../../../../common/util/Command":80,"../../../../common/util/PageData":86,"./School.handlebars":155}],157:[function(a,b){"use strict";var c=a("../../../../common/lib/jquery"),d=function(a){this.options=a||{}};d.prototype.validate=function(b,d){var e=b.getValue();if(b.getDefault()===e)return{};var f={},g=a("../../../../common/util/Regex");g.test(g.MOBILE,e)?f.phone=e:f[b.name]=e;var h=a("../../../../common/util/Command").execute("checkNickname",{urlPattern:{courseSet:a("../../../../common/util/PageData").get("courseSet").prefix}},{data:f}),i={asyncRequest:c.Deferred(function(a){var b=function(){a.resolve({checkValue:e,isValid:!0})}.bind(this),c=function(){a.resolve({checkValue:e,error:this.options.error.replace("{redirect}",d.formData.redirect?encodeURIComponent(d.formData.redirect):""),isHtmlMessage:this.options.isHtmlMessage})}.bind(this);h.statusCode({404:function(){this.options.checkExist?c():b()}.bind(this),400:function(){a.resolve({checkValue:e,error:this.options.badRequest,isHtmlMessage:this.options.isHtmlMessage})}.bind(this),204:function(){this.options.checkExist?b():c()}.bind(this)})}.bind(this))};return i},b.exports=d},{"../../../../common/lib/jquery":67,"../../../../common/util/Command":80,"../../../../common/util/PageData":86,"../../../../common/util/Regex":88}],158:[function(a,b){"use strict";var c=a("../../../common/lib/backbone"),d=a("../../../common/lib/underscore"),e=c.View.extend({events:{"click .flag, .cancel-flag":"onMarkedClick"},modelEvents:{},lastAction:null,initialize:function(){var a=this.$el.data("id"),b=this.$el.data("questionIndex");this.model=this.createModel(d.defaults({questionId:a,questionIndex:b},this.$el.data("userAnswer"))),d.onEvents(this.model,this.modelEvents,this),this.exercise=this.options.exercise},createModel:function(){},destroy:function(){d.offEvents(this.model,this.modelEvents,this),this.$el.remove()},renderAnswer:function(){},collect:function(){this.$el.data("marked",!0),this.$(".cancel-flag").show(),this.$(".flag").hide(),a("../../../common/util/Command").execute("collect",{urlPattern:{questionId:this.model.id}})},uncollect:function(){this.$el.data("marked",!1),this.$(".cancel-flag").hide(),this.$(".flag").show(),a("../../../common/util/Command").execute("uncollect",{urlPattern:{questionId:this.model.id}})},isOvertime:function(){return-1===[1,2,7].indexOf(this.exercise.get("sheetType"))?!1:this.exercise.get("sheetTime")-this.exercise.get("elapsedTime")<0},isCollected:function(){return this.$el.data("collected")},toggleMarked:function(){var a=this.isCollected();this.$el.data("collected",!a),a?this.uncollect():this.collect(),this.trigger("change:collect",this,this.model)},onMarkedClick:function(a){var b=this.$(a.currentTarget).closest(".question-wrap");this.toggleMarked(b)},onValueChange:function(){this.renderAnswer()}});b.exports=e},{"../../../common/lib/backbone":66,"../../../common/lib/underscore":72,"../../../common/util/Command":80}],159:[function(a,b){"use strict";var c=a("./BaseQuestion"),d=a("../../model/BlankfillingAnswerModel"),e=a("../../util/AnswerType"),f=a("../../../common/lib/underscore"),g=c.extend({events:f.defaults({"keyup .answer-input":"onInputKeyup","focus input":"onFocus","blur input":"onBlur"},c.prototype.events),modelEvents:{"change:answer":"onValueChange"},initialize:function(){c.prototype.initialize.apply(this,arguments),this.onChange=f.debounce(this.onChange,300)},createModel:function(a,b){return new d(a,b)},renderAnswer:function(){this.$(".answer-input").val(this.model.get("answer").blanks.join(","))},getUserAnswer:function(a){return{blanks:a?[a]:[],type:e.TYPES.BLANK_FILLING_TYPE}},inputChanged:function(a){var b=!this.model.isEmpty(),c=this.getUserAnswer(a),d={answer:c,overtime:this.isOvertime(),time:(this.model.get("time")||0)+Math.round((Date.now()-this.exercise.get("lastActionTime"))/1e3)};this.model.set(d),this.lastAction=b&&this.model.isEmpty()?"remove":b||this.model.isEmpty()?"change":"create",this.trigger("change:answer",this,this.model)},onInputKeyup:function(a){a.preventDefault();var b=this.$(a.currentTarget).val().trim();this.model.isChanged(b)&&this.onChange()},onChange:function(){var a=this.$(".answer-input").val().trim();this.model.isChanged(a)&&this.inputChanged(a)},onFocus:function(){this.$(".answer-text-wrap").addClass("focus")},onBlur:function(){this.$(".answer-text-wrap").removeClass("focus")}});b.exports=g},{"../../../common/lib/underscore":72,"../../model/BlankfillingAnswerModel":172,"../../util/AnswerType":201,"./BaseQuestion":158}],160:[function(a,b){"use strict";var c=a("./BaseQuestion"),d=a("../../model/EssayAnswer"),e=c.extend({createModel:function(a,b){return new d(a,b)}});b.exports=e},{"../../model/EssayAnswer":174,"./BaseQuestion":158}],161:[function(a,b){"use strict";var c=a("./SingleChoice"),d=a("../../../common/lib/underscore"),e=a("../../util/AnswerType"),f=c.extend({getUserAnswer:function(a){var b=this.model.getChoices();return-1!==b.indexOf(a)?b=d.without(b,a):b.push(a),b=b.sort(),{choice:b.join(","),type:e.TYPES.CHOICE_TYPE}}});b.exports=f},{"../../../common/lib/underscore":72,"../../util/AnswerType":201,"./SingleChoice":163}],162:[function(a,b){"use strict";var c=a("../../../common/lib/jquery"),d=a("../../util/QuestionType"),e=d.TYPES,f={create:function(b){var d=c(b.el).data("type"),f=null;return d===e.SINGLE_CHOICE?f=a("./SingleChoice"):-1!==[e.MULTI_CHOICE,e.UNCERTAIN_CHOICE].indexOf(d)?f=a("./MultiChoice"):d===e.TRUE_OR_FALSE?f=a("./TrueOrFalse"):d===e.BLANKFILLING?f=a("./Blankfilling"):d===e.PROOF?f=a("./Essay"):d===e.CALCULATION?f=a("./Essay"):d===e.OTHER?f=a("./Essay"):d===e.CORRECTION?f=a("./Essay"):d===e.ANALYSIS?f=a("./Essay"):d===e.ESSAY?f=a("./Essay"):d===e.READING_COMPREHENSION?f=a("./SingleChoice"):d===e.READING_COMPREHENSION_5_IN_7?f=a("./SingleChoice"):d===e.CLOZE&&(f=a("./SingleChoice")),new f(b)}};b.exports=f},{"../../../common/lib/jquery":67,"../../util/QuestionType":203,"./Blankfilling":159,"./Essay":160,"./MultiChoice":161,"./SingleChoice":163,"./TrueOrFalse":164}],163:[function(a,b){"use strict";var c=a("./BaseQuestion"),d=a("../../model/ChoiceAnswerModel"),e=a("../../util/AnswerType"),f=a("../../../common/lib/underscore"),g="active",h=c.extend({events:f.defaults({"click .answers .answer, .options .option":"onAnswerClick","click .options .option":"onOptionClick","mouseenter .answer, .option":"onAnswerEnter","mouseleave .answer, .option":"onAnswerLeave"},c.prototype.events),modelEvents:{"change:answer":"onValueChange"},createModel:function(a,b){return new d(a,b)},renderAnswer:function(){var a=this.model.getChoices();this.$(".answer").toArray().forEach(function(b,c){-1===a.indexOf(c)?this.$(b).removeClass(g):this.$(b).addClass(g)},this)},getUserAnswer:function(a){var b=this.model.getChoices(),c=null;return c=b[0]===a?"":String(a),{choice:c,type:e.TYPES.CHOICE_TYPE}},toggleAnswer:function(a){var b=!this.model.isEmpty(),c=a.index(),d=this.getUserAnswer(c),e={answer:d,overtime:this.isOvertime(),time:(this.model.get("time")||0)+Math.round((Date.now()-this.exercise.get("lastActionTime"))/1e3)};this.model.set(e),this.lastAction=b&&this.model.isEmpty()?"remove":b||this.model.isEmpty()?"change":"create",this.trigger("change:answer",this,this.model)},onAnswerClick:function(a){a.preventDefault();var b=this.$(a.currentTarget).index(),c=this.$(".answer").eq(b);this.toggleAnswer(c)},onOptionClick:function(){window._gaq&&window._gaq.push(["_trackEvent","Question","OptionClick"])},onAnswerEnter:function(a){var b=this.$(a.currentTarget),c=b.index();this.$(".option").eq(c).addClass("mouseon"),this.$(".answer").eq(c).addClass("mouseon")},onAnswerLeave:function(a){var b=this.$(a.currentTarget),c=b.index();this.$(".option").eq(c).removeClass("mouseon"),this.$(".answer").eq(c).removeClass("mouseon")}});b.exports=h},{"../../../common/lib/underscore":72,"../../model/ChoiceAnswerModel":173,"../../util/AnswerType":201,"./BaseQuestion":158}],164:[function(a,b){"use strict";var c=a("./BaseQuestion"),d=a("../../model/ChoiceAnswerModel"),e=a("../../util/AnswerType"),f=a("../../../common/lib/underscore"),g="active",h=c.extend({events:f.defaults({"click .answers .answer":"onAnswerClick"},c.prototype.events),modelEvents:{"change:answer":"onValueChange"},createModel:function(a,b){return new d(a,b)},renderAnswer:function(){var a=this.model.getChoices();this.$(".answer").removeClass(g).eq(a[0]).addClass(g)},getUserAnswer:function(a){var b=this.model.getChoices(),c=null;return c=b[0]===a?"":String(a),{choice:c,type:e.TYPES.CHOICE_TYPE}},toggleAnswer:function(a){var b=!this.model.isEmpty(),c=a.index(),d=this.getUserAnswer(c),e={answer:d,overtime:this.isOvertime(),time:(this.model.get("time")||0)+Math.round((Date.now()-this.exercise.get("lastActionTime"))/1e3)};this.model.set(e),this.lastAction=b&&this.model.isEmpty()?"remove":b||this.model.isEmpty()?"change":"create",this.trigger("change:answer",this,this.model)},onAnswerClick:function(a){a.preventDefault();var b=this.$(a.currentTarget);this.toggleAnswer(b)}});b.exports=h},{"../../../common/lib/underscore":72,"../../model/ChoiceAnswerModel":173,"../../util/AnswerType":201,"./BaseQuestion":158}],165:[function(a,b){"use strict";var c={getMessage:function(){return"<p>网络出现问题，请检查试卷后重新提交。</p>"}};b.exports=c},{}],166:[function(a,b){"use strict";var c=a("../../common/lib/underscore"),d={template:"<p>当前没有未完成的练习</p><p>最近的未完成练习<%=exerciseName%>已通过<%=deviceText%>完成。",getMessage:function(a){var b=JSON.parse(a.xhr.responseText),e={mobile:"移动客户端",web:"网页版",card:"扫描答题卡"}[b.device];return c.template(d.template,{deviceText:e,exerciseName:b.exerciseName})}};b.exports=d},{"../../common/lib/underscore":72}],167:[function(a,b){"use strict";var c={getMessage:function(){return"当前目标考试不包含该考点, 请检查目标考试设置"}};b.exports=c},{}],168:[function(a,b){"use strict";var c=a("../../common/lib/underscore"),d={template:'<p>你购买的"国家司法考试题库"<%=expireType%>结束，请续费。</p>',getMessage:function(a){var b=JSON.parse(a.xhr.responseText);return c.template(d.template,{expireType:["免费试用期","付费期"][b.expireType]})}};b.exports=d},{"../../common/lib/underscore":72}],169:[function(a,b){"use strict";var c={getMessage:function(){return"目标考试错误，请刷新页面重试"}};b.exports=c},{}],170:[function(a,b){"use strict";var c={checkClubUser:{options:{url:"/api/gaokao/club/users",type:"head",cache:!1}},checkNickname:{options:{url:"/api/{courseSet}/users",type:"head"}},getQuizGroup:{options:{url:"/api/{courseSet}/quizzes/group",type:"get",dataType:"json"}},setQuiz:{options:{url:"/api/{courseSet}/users/quiz/{quizId}",type:"put"}},getQuizRangeList:{options:{url:"/api/{courseSet}/users/quiz-range",type:"get",dataType:"json"}},setQuizRange:{options:{url:"/api/{courseSet}/users/quiz-range/update",type:"post",headers:{"content-type":"application/json"}}},setTimeRange:{options:{url:"/api/{courseSet}/users/range/update",type:"post",dataType:"json",headers:{"content-type":"application/json"}}},setting:{options:{url:"/api/{courseSet}/users/settings",type:"post"}},getSchoolList:{options:{url:"/api/{courseSet}/schools",type:"get",cache:!0}},canDownload:{options:{url:"/api/{course}/exercises/can-download",type:"head"}},createExercise:{options:{url:"/api/{course}/exercises",type:"post",dataType:"json"}},createExercisePdf:{options:{url:"/api/{course}/exercises/pdf",type:"post"}},getNote:{options:{url:"/api/{course}/note/html",type:"get",cache:!1,dataType:"html"}},getExercise:{options:{url:"/napi/{course}/exercises/{exerciseId}.html",type:"get",cache:!1,dataType:"html"}},getSolution:{options:{url:"/api/{course}/exercises/{exerciseId}/solutions/html",type:"get",cache:!1,dataType:"html"}},getErrorSolution:{options:{url:"/api/{course}/errors/html",type:"get",cache:!1,dataType:"html"}},getSprintKeypoints:{options:{url:"/api/{course}/sprint/keypoints",type:"get",cache:!1}},getSprintPapers:{options:{url:"/api/{course}/sprint/papers",type:"get",cache:!1}},getChapterKeypoints:{options:{url:"/api/{course}/{solutionType}/{exerciseId}/keypoints",type:"get",cache:!1}},updateExercise:{options:{url:"/api/{course}/exercises/{exerciseId}/incr",type:"post"}},deleteExercise:{options:{url:"/api/{course}/questions",type:"delete"}},deleteErrorQuestion:{options:{url:"/api/{course}/errors/{questionId}",type:"delete",cache:!1}},collect:{options:{url:"/api/{course}/collects/{questionId}",type:"put"}},uncollect:{options:{url:"/api/{course}/collects/{questionId}",type:"delete"}},getCskList:{options:{url:"/api/{course}/categories/html",type:"get",cache:!1,dataType:"html"}},getPaper:{options:{url:"/api/{course}/papers/html",type:"get",cache:!1,dataType:"html"}},getHotPaper:{options:{url:"/api/{course}/sprint/keypoint-papers/html",type:"get",cache:!1,dataType:"html"}},getKeypointInfo:{options:{url:"/api/{course}/keypoints/{id}/html",type:"get",cache:!1,dataType:"html"}},getTagInfo:{options:{url:"/api/{course}/tags/{id}/html",type:"get",cache:!1,dataType:"html"}},getLaws:{options:{url:"/api/{course}/laws",type:"get"}},createNote:{options:{url:"/api/{course}/notes",type:"post",headers:{"content-type":"application/json"}}},updateNote:{options:{url:"/api/{course}/notes/{noteId}",type:"put",headers:{"content-type":"application/json"}}},deleteNode:{options:{url:"/api/{course}/notes/{noteId}",type:"delete"}},getAudioTip:{options:{url:"/api/{courseSet}/tips/40001",type:"get"}}};
b.exports=c},{}],171:[function(a,b){"use strict";var c=a("../../common/lib/backbone"),d=a("../../common/lib/underscore"),e=c.Model.extend({idAttribute:"questionId",set:function(a,b,e){var f=null;if(d.isObject(a)?(f=a,e=b):(f={},f[a]=b),void 0!==f.overtime){var g=this.get("flag")||0;f.flag=-3&g|(f.overtime?1:0)<<1,delete f.overtime}return c.Model.prototype.set.call(this,f,e)},isEmpty:function(){}});b.exports=e},{"../../common/lib/backbone":66,"../../common/lib/underscore":72}],172:[function(a,b){"use strict";var c=a("./BaseAnswerModel"),d=c.extend({isEmpty:function(){return!this.get("answer")||0===this.get("answer").blanks.length},isChanged:function(a){return!this.get("answer")||-1===this.get("answer").blanks.indexOf(a)}});b.exports=d},{"./BaseAnswerModel":171}],173:[function(a,b){"use strict";var c=a("./BaseAnswerModel"),d=c.extend({getChoices:function(){var a=(this.get("answer")||{}).choice||"";return a?String(a).split(",").map(function(a){return parseInt(a,10)}).filter(function(a){return!isNaN(a)}):[]},isEmpty:function(){return 0===this.getChoices().length}});b.exports=d},{"./BaseAnswerModel":171}],174:[function(a,b){"use strict";var c=a("./BaseAnswerModel"),d=c.extend({isEmpty:function(){return!0},isChanged:function(){return!1}});b.exports=d},{"./BaseAnswerModel":171}],175:[function(a,b){"use strict";var c=a("../../common/lib/backbone"),d=a("../../common/lib/jquery"),e=c.View.extend({initialize:function(){},events:{"click .submit":"onSubmit","click .checkbox-controller .range:not(.disabled)":"onRangeClick"},onRangeClick:function(b){b.preventDefault(),d(b.currentTarget).closest(".range").hasClass("checked")&&d(".checkbox-controller .range.checked").length<=3?a("../../common/util/Message").alert({content:"出题年份会影响专项、快速、组卷等练习模块，为避免考点覆盖不足，请至少勾选三年真题。"}):this.$(b.currentTarget).toggleClass("checked")},onSubmit:function(b){b.preventDefault();var c=[];d(".checkbox-controller .range.checked").each(function(){var a={id:d(this).data("value")};c.push(a)});var e=a("../../common/util/Command").execute("setTimeRange",{urlPattern:{courseSet:a("../../common/util/PageData").get("courseSet").prefix}},{data:JSON.stringify(c)});e.done(this.onSubmitSuccess),e.fail(this.onSubmitFailed)},onSubmitSuccess:function(){window.location.href="/"+a("../../common/util/PageData").get("courseSet").prefix},onSubmitFailed:function(b){a("../../common/util/ExceptionUtil").alert(null,{xhr:b})}});b.exports=e},{"../../common/lib/backbone":66,"../../common/lib/jquery":67,"../../common/util/Command":80,"../../common/util/ExceptionUtil":83,"../../common/util/Message":85,"../../common/util/PageData":86}],176:[function(a,b){b.exports=a(75)},{"../../common/lib/backbone":66,"../../common/lib/underscore":72}],177:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d=function(){c(".keypoint-table").on("click",".toggle-expand",this.onToggleClick.bind(this))};d.prototype={expandKeypoint:function(a){var b=a.data("id");a.addClass("expanded"),c(".keypoint[data-parent-id="+b+"]").toArray().forEach(function(a){var b=c(a);b.show()},this)},shrinkKeypoint:function(a){var b=a.data("id");a.removeClass("expanded"),c(".keypoint[data-parent-id="+b+"]").toArray().forEach(function(a){var b=c(a);b.hide(),this.shrinkKeypoint(b)},this)},onToggleClick:function(a){a.preventDefault();var b=c(a.currentTarget).closest(".keypoint");b.hasClass("expanded")?this.shrinkKeypoint(b):this.expandKeypoint(b)}},b.exports=d},{"../../common/lib/jquery":67}],178:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d=a("../../common/lib/underscore"),e=function(){var b=d.queryToObj(location.search),f=d.pick(b,"examId","type","paperId"),g=a("../util/PageData").get("course");"shenlun"===g.prefix?(c(".pending").remove(),c(".done").removeClass("hide").find(".link-button").attr("data-href",d.resolveUrl("/api/"+g.prefix+"/papers/"+f.paperId+"/pdf",{}))):e.create(f).done(function(a){a=a[0],c(".pending").remove(),c(".done").removeClass("hide").find(".link-button").attr("data-href",d.resolveUrl("/api/"+g.prefix+"/exercises/"+a.exerciseId+"/pdf",{key:a.key}))}).fail(function(b){403===b.status?location.replace("/error/download-limit"):a("../../common/util/ExceptionUtil").alert(null,{xhr:b})})};e.create=function(b){return c.when(a("../../common/util/Command").execute("createExercisePdf",null,{data:b}),c.delay(500))},b.exports=e},{"../../common/lib/jquery":67,"../../common/lib/underscore":72,"../../common/util/Command":80,"../../common/util/ExceptionUtil":83,"../util/PageData":202}],179:[function(a,b){"use strict";var c=a("./BaseRouter"),d=c.extend({initialize:function(){var b=a("../../common/component/content/ErrorSolution"),c=new b({el:".exercise-wrap"});c.render()}});b.exports=d},{"../../common/component/content/ErrorSolution":31,"./BaseRouter":176}],180:[function(a,b){"use strict";var c=a("./BaseRouter"),d=c.extend({initialize:function(){var b=a("../component/content/ExerciseKeypoint"),c=new b({el:".exercise-wrap"});c.render()}});b.exports=d},{"../component/content/ExerciseKeypoint":124,"./BaseRouter":176}],181:[function(a,b){"use strict";var c=a("./BaseRouter"),d=a("../../common/lib/jquery"),e=c.extend({initialize:function(){var b=a("../component/content/ExerciseReport"),c=new b({el:".exercise-wrap"});c.render(),this.initTrendImage()},initTrendImage:function(){var b=d(".trend-image-wrap");0!==b.size()&&(b.find(".loading").remove(),a("../util/TrendChart").draw(b,{gutter:[25,15,25,45],backgroundFill:"180-#F8F8F8-#EEEEEE"}))}});b.exports=e},{"../../common/lib/jquery":67,"../component/content/ExerciseReport":125,"../util/TrendChart":204,"./BaseRouter":176}],182:[function(a,b){"use strict";var c=a("./BaseRouter"),d=c.extend({initialize:function(){var b=a("../component/content/Exercise"),c=new b({el:".exercise-wrap"});c.render()}});b.exports=d},{"../component/content/Exercise":122,"./BaseRouter":176}],183:[function(a,b){"use strict";var c=a("./BaseRouter"),d=c.extend({initialize:function(){var b=a("../../common/component/content/ExerciseSolution"),c=new b({el:".exercise-wrap"});c.render()}});b.exports=d},{"../../common/component/content/ExerciseSolution":34,"./BaseRouter":176}],184:[function(a,b){"use strict";var c=a("./BaseRouter"),d=c.extend({initialize:function(){var b=a("../util/PageData").get("loginUser"),c=a("../util/PageData").get("courseSet");c.free||0!==b.expireTime?"gaokao"!==c.prefix||b&&b.nickname&&b.school&&b.school.length&&b.quiz&&b.quiz.id?!c.multiQuiz||b.quiz&&b.quiz.id||this.showQuiz():this.showGaokaoInitPanel():this.showActive()},showActive:function(){var b=a("../component/assembly/ActiveTip"),c=new b;c.reset(),c.show()},showQuiz:function(){var b=a("../component/assembly/QuizPanel"),c=new b;c.reset(),c.show(),c.on("submit",function(){location.reload()})},showGaokaoInitPanel:function(){var b=a("../component/assembly/GaokaoInitPanel"),c=new b;c.reset(),c.show(),c.on("submit",function(){location.reload()})}});b.exports=d},{"../component/assembly/ActiveTip":98,"../component/assembly/GaokaoInitPanel":101,"../component/assembly/QuizPanel":109,"../util/PageData":202,"./BaseRouter":176}],185:[function(a,b){"use strict";var c=a("./BaseRouter"),d=c.extend({initialize:function(){var b=a("../page/RangeSetting");new b({el:".range-setting-wrap"}).render()}});b.exports=d},{"../page/RangeSetting":175,"./BaseRouter":176}],186:[function(a,b){"use strict";var c=a("./BaseRouter"),d=a("../../common/lib/jquery"),e=c.extend({initialize:function(){0!==d(".user-report-wrap").size()&&(this.initCskTable(),this.initScoreTip(),this.initTrendImage(),this.initDistributionChart(),d(document.body).on("mouseover click",".progress-wrap",function(b){var c=d(b.currentTarget);if(!(c.closest(".progress-tip-tip-wrap").size()>0)){var e=c.data("tip");if(!e){var f=a("../component/assembly/Progress");e=new f,e.reset({contentOptions:c.data()}),c.data("tip",e)}e.show(b.currentTarget)}}))},initCskTable:function(){var b=a("../component/content/CskTable");new b({el:".user-csk-table-wrap"})},initScoreTip:function(){var b=d(".forecast-score .number");if(b.data("first")){var c=a("../component/assembly/PinnedTip"),e=new c({direction:["top"],contentOptions:{content:b.closest(".forecast-score").attr("title")}});e.reset(),e.show(b)}},initTrendImage:function(){var b=d(".trend-image-wrap");0!==b.size()&&(b.find(".loading").remove(),a("../util/TrendChart").draw(b))},initDistributionChart:function(){var b=d(".distribution-chart");if(0!==b.size()){b.find(".loading").remove();var c=a("../../common/util/DistributionChart");c.draw(b.get(0),b.data("avgScore"),b.data("sigma"),b.data("fullMark"),b.data("score"))}}});b.exports=e},{"../../common/lib/jquery":67,"../../common/util/DistributionChart":82,"../component/assembly/PinnedTip":107,"../component/assembly/Progress":108,"../component/content/CskTable":119,"../util/TrendChart":204,"./BaseRouter":176}],187:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d=a("../../common/lib/placeholder"),e=function(){var b=c(".search-query");if(d.polyfill(b),b.focus(),c(".search-question-list-wrap").size()>0){var e=a("../../common/component/content/ExerciseSolution"),f=new e({el:".search-question-list-wrap"});f.render()}};b.exports=e},{"../../common/component/content/ExerciseSolution":34,"../../common/lib/jquery":67,"../../common/lib/placeholder":69}],188:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d=a("../../common/lib/placeholder"),e=function(){var a=c(".search-query");d.polyfill(a),a.focus()};b.exports=e},{"../../common/lib/jquery":67,"../../common/lib/placeholder":69}],189:[function(a,b){"use strict";var c=a("./BaseRouter"),d=a("../../common/lib/jquery"),e=c.extend({initialize:function(){this.initQuiz(),this.initQuizRange(),this.initNickname(),this.initSchool()},initQuiz:function(){var b=null;d(".select-quiz").on("click",function(c){if(c.preventDefault(),null===b){var e=a("../component/assembly/QuizPanel");b=new e({quiz:a("../../common/util/PageData").get("quiz")}),b.on("submit",function(a){d(".quiz-name").text(a.name),d(".quiz-tip").show(),setTimeout(function(){location.reload()},1e3)})}b.reset(),b.show()})},initQuizRange:function(){var b=null;d(".select-quiz-range").on("click",function(c){if(c.preventDefault(),null===b){var e=a("../component/assembly/QuizRangePanel");b=new e,b.on("submit",function(a){d(".quiz-range-tip").show(),d(".quiz-range-count").text(a),setTimeout(function(){location.reload()},1e3)})}b.reset(),b.show()})},initNickname:function(){var b=null;d(".change-nick").on("click",function(c){if(c.preventDefault(),null===b){var e=a("../component/assembly/NicknamePanel");b=new e({nickname:d(".nickname").text()}),b.on("submit",function(a){d(".nickname").text(a.nickname),d(".nickname-tip").show(),setTimeout(function(){location.reload()},1e3)})}b.reset(),b.show()})},initSchool:function(){var b=null;d(".change-school").on("click",function(c){c.preventDefault();var e=d(c.currentTarget).data("schools");if(null===b){var f=a("../component/assembly/SchoolPanel");b=new f({schools:e}),b.on("submit",function(b){var c=a("../../common/util/Message").loading("正在保存");a("../../common/util/Command").execute("setting",{urlPattern:{courseSet:a("../../common/util/PageData").get("courseSet").prefix}},{data:{schoolId:b.schools[b.schools.length-1].id}}).done(function(){d(".school").text(b.schools[b.schools.length-1].name),d(".school-tip").show(),setTimeout(function(){location.reload()},1e3)}).fail(function(b){a("../../common/util/ExceptionUtil").alert(null,{xhr:b})}).always(function(){c.hide()})})}b.reset(),b.show()})}});b.exports=e},{"../../common/lib/jquery":67,"../../common/util/Command":80,"../../common/util/ExceptionUtil":83,"../../common/util/Message":85,"../../common/util/PageData":86,"../component/assembly/NicknamePanel":105,"../component/assembly/QuizPanel":109,"../component/assembly/QuizRangePanel":110,"../component/assembly/SchoolPanel":111,"./BaseRouter":176}],190:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d={run:function(){c(document).on("click",".gaq",function(a){var b=c(a.currentTarget).data("gaq");b.unshift("_trackEvent"),window._gaq&&window._gaq.push(b)})}};b.exports=d},{"../../common/lib/jquery":67}],191:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d={run:function(){c(document.body).on("click",".link-button:not([disabled]):not(.disabled)",function(a){var b=c(a.currentTarget);b.data("href")&&(a.preventDefault(),b.data("new")?window.open(b.data("href"),"_blank"):location.href=b.data("href"))});var a=null,b="span.btn:not([disabled])",d=function(){a&&(a.removeClass("active"),a=null),c(document).off("mouseup",d)};c(document.body).on("mouseover",b,function(a){c(a.currentTarget).addClass("hover")}).on("mouseleave",b,function(a){c(a.currentTarget).removeClass("hover")}).on("mousedown",b,function(b){a=c(b.currentTarget).addClass("active"),c(document).on("mouseup",d)}),c(document.body).on("click keypress",".submit-button:not([disabled]):not(.disabled)",function(a){a.isDefaultPrevented()||(a.preventDefault(),c(a.currentTarget).closest("form").submit())})}};b.exports=d},{"../../common/lib/jquery":67}],192:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d=a("../../common/lib/underscore"),e={run:function(){var b=a("../util/PageData").get("course"),d=a("../util/PageData").get("courseSet");c(document.body).on("click",".create-exercise:not([disabled]), .create-exercise.fake-disabled",function(d){d.preventDefault();var e=c(d.currentTarget).data();setTimeout(function(){var f=c(d.currentTarget),g=null,h=a("../../uni/util/PageData").get("loginUser");if("shenlun"===b.prefix&&!f.hasClass("shenlun-needpay-dialog")&&"leftCount"in h&&h.leftCount<=0){var i=a("../../shenlun/component/assembly/NeedPayment");return g=new i({title:"申论练习",paperId:f.data("paperId")}),g.reset(),void g.show()}var j=a("../../common/util/Command").execute("createExercise",null,{data:e}),k=a("../../common/util/Message").loading("正在创建练习...");j.always(function(){k.hide()}),j.done(function(a){location.href="/"+b.prefix+"/exercises/"+a.id}),j.fail(function(b){var c=null;402===b.status?c=a("../exception/PaymentRequired"):412===b.status&&(c=a("../exception/KeypointNotExisted")),a("../../common/util/ExceptionUtil").alert(c,{xhr:b})})},100)}),c(document.body).on("click",".open-exercise:not([disabled])",function(a){a.preventDefault(),location.href="/"+b.prefix+"/exercises/"+a.currentTarget.getAttribute("data-id")});var f=!1;c(document.body).on("click",".download-exercise:not([disabled])",function(g){g.preventDefault();var h=c(g.currentTarget).data();setTimeout(function(){var c=null,g=a("../util/PageData").get("loginUser");if(!d.free&&!g.paid){var i=a("../component/assembly/NeedPayment");return c=new i({title:"下载套卷 打印做题"}),c.reset(),void c.show()}if(f)e.download(b,h);else{var j=a("../component/assembly/DownloadConfirm");c=new j({title:"下载套卷 打印做题"}),c.reset(),c.show(),c.on("submit",function(){f=!0,e.download(b,h)})}},100)}),c(document.body).on("click",".sprint-need-payment",function(b){b.preventDefault();var c=a("../component/assembly/SprintNeedPayment"),d=new c({title:"考前冲刺"});d.reset(),d.show()})},download:function(a,b){window.open(d.resolveUrl("/"+a.prefix+"/download",b),"_blank")}};b.exports=e},{"../../common/lib/jquery":67,"../../common/lib/underscore":72,"../../common/util/Command":80,"../../common/util/ExceptionUtil":83,"../../common/util/Message":85,"../../shenlun/component/assembly/NeedPayment":94,"../../uni/util/PageData":202,"../component/assembly/DownloadConfirm":100,"../component/assembly/NeedPayment":104,"../component/assembly/SprintNeedPayment":112,"../exception/KeypointNotExisted":167,"../exception/PaymentRequired":168,"../util/PageData":202}],193:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d={run:function(){c(document.body).on("mouseover click",".law-info",function(b){var d=c(b.currentTarget).data("accessory"),e=null,f=c(b.currentTarget).closest(".question-wrap");f.data("coursePrefix")&&(e=f.data("coursePrefix"));var g=a("../component/assembly/Law"),h=new g;h.fetch(d,e),h.show(b.currentTarget)})}};b.exports=d},{"../../common/lib/jquery":67,"../component/assembly/Law":103}],194:[function(a,b){"use strict";var c={run:function(){var b=a("../../common/lib/jquery"),c=b.ajax;b.ajax=function(){var b=c.apply(this,arguments);return b.fail(function(b){if(406===b.status){var c=a("../util/PageData").get("loginUser");window.alert("你的帐号"+c.identity+"在其他浏览器上登录，你被迫下线。如果这不是你本人的操作，那么你的密码有可能已经泄露，请登录 fenbi.com 修改密码。"),location.href="/logout"}}),b}}};b.exports=c},{"../../common/lib/jquery":67,"../util/PageData":202}],195:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d={run:function(){var a=c(".section-shadow").detach();c(window.document.body).on("mouseenter",".section-wrap",function(b){var d=c(b.currentTarget);a.appendTo(d)}).on("mouseleave",function(){a.detach()})}};b.exports=d},{"../../common/lib/jquery":67}],196:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d={run:function(){c(document.body).on("click",".select-csk:not([disabled])",function(b){b.preventDefault();var d=a("../component/assembly/CskPanel");new d({title:c(b.currentTarget).data("title"),data:{filter:c(b.currentTarget).data("filter")}})})}};b.exports=d},{"../../common/lib/jquery":67,"../component/assembly/CskPanel":99}],197:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d={run:function(){c(document.body).on("click",".select-paper:not([disabled])",function(b){b.preventDefault();var c=a("../component/assembly/Paper");return new c}),c(document.body).on("click",".select-hot-paper:not([disabled])",function(b){b.preventDefault();var c=a("../component/assembly/HotPaper");return new c})}};b.exports=d},{"../../common/lib/jquery":67,"../component/assembly/HotPaper":102,"../component/assembly/Paper":106}],198:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d={run:function(){c(document.body).on("click",".select-spring:not([disabled])",function(b){b.preventDefault();var d=a("../component/assembly/SprintPanel"),e=new d({sprint:c(b.currentTarget).data("sprint")});e.reset(),e.show()})}};b.exports=d},{"../../common/lib/jquery":67,"../component/assembly/SprintPanel":113}],199:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d=null,e={initAndShow:function(b){if(!d){var c=a("../component/assembly/UserMenu");d=new c,d.reset()}d.show(b)},run:function(){var a=c(".user-menu-trigger");a.on("mouseover",function(a){e.initAndShow(a.currentTarget)}).on("click",function(a){a.preventDefault(),e.initAndShow(a.currentTarget)})}};b.exports=e},{"../../common/lib/jquery":67,"../component/assembly/UserMenu":114}],200:[function(a,b){"use strict";var c=a("../../common/lib/jquery"),d=a("../../common/lib/underscore"),e={run:function(){var b={};c(document.body).on("mouseover click",".word-info",function(e){var f=d.pick(c(e.currentTarget).data(),"tagId","keypointId"),g=null,h=c(e.currentTarget).closest(".question-wrap");h.data("coursePrefix")&&(g=h.data("coursePrefix"));var i=null,j=null;f.tagId?(i="tag",j=f.tagId):f.keypointId&&(i="keypoint",j=f.keypointId);var k=i+j;if(!b[k]){var l=a("../component/assembly/WordInfo"),m=new l;b[k]=m}b[k].fetch(i,j,g),b[k].show(e.currentTarget)})}};b.exports=e},{"../../common/lib/jquery":67,"../../common/lib/underscore":72,"../component/assembly/WordInfo":115}],201:[function(a,b){"use strict";var c={TYPES:{CHOICE_TYPE:201,BLANK_FILLING_TYPE:202,RICH_TEXT_TYPE:203}};b.exports=c},{}],202:[function(a,b){"use strict";var c={get:function(a){var b=window.document.getElementById(a+"Data");return b?JSON.parse(b.getAttribute("data-json")):null}},d=a("../../common/lib/underscore");c.get=d.memoize(c.get),b.exports=c},{"../../common/lib/underscore":72}],203:[function(a,b){"use strict";var c={TYPES:{SINGLE_CHOICE:1,MULTI_CHOICE:2,UNCERTAIN_CHOICE:3,CLOZE:4,TRUE_OR_FALSE:5,READING_COMPREHENSION_5_IN_7:6,PROOF:11,ESSAY:12,CALCULATION:13,READING_COMPREHENSION:14,ANALYSIS:15,CORRECTION:16,OTHER:50,BLANKFILLING:61,ACCOUNTING_ENTRY:62}};b.exports=c},{}],204:[function(a,b){"use strict";var c=a("../../common/lib/raphael"),d=a("../../common/lib/underscore"),e=a("../../common/util/DateUtil"),f=a("../../common/lib/raphael"),g={init:function(){f.fn.drawGrid=function(a,b,c,d,e,f){var g=["M",Math.round(a)+.5,Math.round(b)+.5,"L",Math.round(a+c)+.5,Math.round(b)+.5,Math.round(a+c)+.5,Math.round(b+d)+.5,Math.round(a)+.5,Math.round(b+d)+.5,Math.round(a)+.5,Math.round(b)+.5],h=c/e;f.forEach(function(e){var f=e*d;g=g.concat(["M",Math.round(a)+.5,Math.round(b+f)+.5,"H",Math.round(a+c)+.5])});for(var i=1;e>i;i++)g=g.concat(["M",Math.round(a+i*h)+.5,Math.round(b)+.5,"V",Math.round(b+d)+.5]);return this.path(g.join(",")).attr({stroke:"#D7D7D7","stroke-dasharray":"-"}).toBack()}},draw:function(a,b){b=d.extend({gutter:[15,15,15,45]},b),g.init();var f=a.data("trendPoints"),h=Math.max.apply(Math,[a.data("fullMark")].concat(f.map(function(a){return a.score}))),i=c(a.get(0)),j=b.gutter,k=i.width-j[3]-j[1],l=i.height-j[0]-j[2],m=function(){return 60>h?10:120>h?20:30}(),n=Math.round(h/m),o=d.range(n+1).map(function(a){return m*(n-a)});o[0]=h,setTimeout(function(){i.drawGrid(j[3],j[0],k,l,Math.min(4,f.length),o.map(function(a){return 1-a/h}))},25);var p=f.map(function(a){return a.score});if(setTimeout(function(){o.forEach(function(a){var b=j[0]+l*(h-a)/h;i.text(j[3]-18,b,a).attr({fill:"#3A8FFB","font-size":14,"font-family":"Arial, Helvetica, sans-serif","text-anchor":"end"})})},50),0!==f.length){var q=p.length>1?k/(p.length-1):0,r=f.map(function(a,b){var c=Math.round(j[3]+q*b),d=Math.round(j[0]+(1-a.score/h)*l);return{x:c,y:d}}),s=null;r.forEach(function(a,b){s=0===b?["M",a.x,a.y,"L"]:s.concat(b<f.length-1?["L",a.x,a.y]:[a.x,a.y])}),1===r.length?i.circle(r[0].x,r[0].y,6).attr({fill:"#52D075","stroke-width":0}).glow({width:4,color:"#050000",opacity:.3,offsety:2}):i.path().attr({path:s,stroke:"#52D075","stroke-width":6}).glow({width:4,color:"#050000",opacity:.3,offsety:2});var t=null,u=a.find(".popup"),v=u.parent().offset();u.detach().show();var w=a.find(".event-layer"),x=w.offset(),y=null;w.css({height:w.height(),width:w.width(),position:"absolute","z-index":3}).appendTo(document.body),w.offset(x),w.on("mousemove",d.debounce(function(a){clearTimeout(y);var b=a.offsetX,c=null;if(r.length>1?r.forEach(function(a,d){b>a.x-q/2&&b<=a.x+q/2&&(c=d)}):c=0,null!==c&&t!==c){t=c;var d=r[c];u.appendTo(document.body),u.find(".score").text(Math.round(f[c].score)),u.find(".time").text(e.formatTimestamp(f[c].time||Date.now(),{isWithTime:!0})),u.css({left:v.left+d.x,top:v.top+d.y})}},10)).on("mouseleave",d.debounce(function(){clearTimeout(y),y=setTimeout(function(){u.detach(),t=null},50)},50))}}};g.init=d.once(g.init),g.initPopup=d.once(g.initPopup),b.exports=g},{"../../common/lib/raphael":70,"../../common/lib/underscore":72,"../../common/util/DateUtil":81}]},{},[97]);